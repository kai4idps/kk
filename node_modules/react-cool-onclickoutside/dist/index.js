"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=function(e){return!(!e.includes("touch")||!function(){if("undefined"==typeof window||"function"!=typeof window.addEventListener)return!1;var e=!1,n=Object.defineProperty({},"passive",{get:function(){e=!0}}),t=function(){return null};return window.addEventListener("test",t,n),window.removeEventListener("test",t,n),e}())&&{passive:!0}};exports.DEFAULT_IGNORE_CLASS="ignore-onclickoutside",exports.default=function(t,r){var i=void 0===r?{}:r,o=i.refs,u=i.disabled,c=void 0!==u&&u,f=i.eventTypes,s=void 0===f?["mousedown","touchstart"]:f,d=i.excludeScrollbar,a=void 0!==d&&d,l=i.ignoreClass,v=void 0===l?"ignore-onclickoutside":l,E=e.useRef(t),m=e.useState([]),p=m[0],g=m[1];e.useEffect((function(){E.current=t}),[t]);var h=e.useCallback((function(e){g((function(n){return[].concat(n,[{current:e}])}))}),[]);return e.useEffect((function(){if(null!=o&&o.length||p.length){var e=function(e){if(!function(e,n){for(var t=e.target;t;){var r;if(null!=(r=t.classList)&&r.contains(n))return!0;t=t.parentElement}return!1}(e,v)){var n=[];(o||p).forEach((function(e){var t=e.current;t&&n.push(t)})),a&&function(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}(e)||n.length&&n.every((function(n){return!n.contains(e.target)}))&&E.current(e)}},t=function(){s.forEach((function(t){document.removeEventListener(t,e,n(t))}))};if(!c)return s.forEach((function(t){document.addEventListener(t,e,n(t))})),function(){t()};t()}}),[p,v,a,c,JSON.stringify(s)]),h};
