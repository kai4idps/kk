/**************************************************************************** 
 * Copyright (C) 2021, Bitmovin, Inc., All Rights Reserved 
 * 
 * This source code and its use and distribution, is subject to the terms 
 * and conditions of the applicable license agreement. 
 * 
 * Bitmovin Player Version 8.60.0 
 * 
 ****************************************************************************/
(function() {
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.analytics=t():(e.bitmovin=e.bitmovin||{},e.bitmovin.player=e.bitmovin.player||{},e.bitmovin.player.analytics=t())}(this,function(){return webpackJsonpbitmovin_player__name_([34],{228:function(e,t,n){/*!
 * 
 * Copyright (C) 2020, Bitmovin, Inc., All Rights Reserved
 * 
 * This source code and its use and distribution, is subject to the terms
 * and conditions of the applicable license agreement.
 * 
 * bitmovin-analytics version v2.17.2
 * 
 */
!function(t,n){e.exports=n()}(window,function(){return function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(a,i,function(t){return e[t]}.bind(null,i));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/Users/peterpf/workspace/bitmovin/collector-web/build/release",t(t.s=22)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(25);t.validString=function(e){return null!=e&&"string"==typeof e},t.isNullOrEmptyString=function(e){return null==e||"string"!=typeof e||0===e.length},t.validBoolean=function(e){return null!=e&&"boolean"==typeof e},t.validNumber=function(e){return null!=e&&"number"==typeof e},t.sanitizePath=function(e){return e.replace(/\/$/g,"")},t.calculateTimeWithUndefined=function(e){return void 0===e?e:(e*=1e3,Math.round(e))},t.calculateTime=function(e){return e*=1e3,Math.round(e)},t.getCurrentTimestamp=function(){return Date.now()},t.getDurationFromTimestampToNow=function(e){return t.getCurrentTimestamp()-e},t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.getCookie=function(e){for(var t=e+"=",n=0,a=document.cookie.split(";");n<a.length;n++){for(var i=a[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},t.noOp=function(){},t.getCustomDataString=function(e){return"object"==typeof e?JSON.stringify(e):"function"==typeof e?t.getCustomDataString(e()):void 0===e?e:"string"!=typeof e?String(e):e},t.getDocumentPropWithPrefix=function(e){if(e in document)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0,a=["webkit","moz","ms","o"];n<a.length;n++){var i=a[n];if(i+t in document)return i+t}},t.isVideoInFullscreen=function(){var e=t.getDocumentPropWithPrefix("fullscreenElement");return void 0!==e&&document[e]&&"VIDEO"===document[e].nodeName},t.getHiddenProp=function(){return t.getDocumentPropWithPrefix("hidden")},t.getPageLoadType=function(){return!0===document[t.getHiddenProp()]?a.PAGE_LOAD_TYPE.BACKGROUND:a.PAGE_LOAD_TYPE.FOREGROUND},t.getHostnameAndPathFromUrl=function(e){var t=document.createElement("a");return t.href=e,{hostname:t.hostname,path:t.pathname}},t.calculatePercentage=function(e,t){if(void 0!==t&&0!==t)return Math.round((e||0)/t*100)},t.getBrowserInfo=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?{name:e[1].replace("OPR","Opera"),version:e[2]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})},t.getURLResourceName=function(e){return 0===e.length?"":e.split("/").pop()||""},t.joinUrls=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.reduce(function(e,n){return(t.endsWith(e,"/")&&void 0!==n?e.substr(0,e.length-1):e)+"/"+(t.startsWith(n,"/")?n.substr(1):n)})},t.endsWith=function(e,t){return String.prototype.endsWith?e.endsWith(t):e.substring(e.length-t.length)===t},t.startsWith=function(e,t){return String.prototype.startsWith?e.startsWith(t):e.substring(0,t.length)===t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){void 0===e&&(e=!1),this.showLogs=e}return e.prototype.setLogging=function(e){this.showLogs=e},e.prototype.isLogging=function(){return this.showLogs},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.showLogs&&console.log.apply(console,[e].concat(t))},e.prototype.logTable=function(e){console.table(e)},e.prototype.errorMessageToUser=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.error.apply(console,[e].concat(t))},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.showLogs&&console.error.apply(console,[e].concat(t))},e.prototype.warning=function(e){this.showLogs&&console.warn(e)},e.prototype.warningMessageToUser=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.warn.apply(console,[e].concat(t))},e}();t.padRight=function(e,t){return(e+new Array(t).join(" ")).slice(0,t)},t.logger=new a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.READY="ready",e.SOURCE_LOADED="sourceLoaded",e.PLAY="play",e.PLAYING="playing",e.PAUSE="pause",e.TIMECHANGED="timechanged",e.SEEK="seek",e.SEEKED="seeked",e.START_CAST="startCasting",e.END_CAST="endCasting",e.START_BUFFERING="startBuffering",e.END_BUFFERING="endBuffering",e.AUDIOTRACK_CHANGED="audioTrackChanged",e.AUDIO_CHANGE="audioChange",e.VIDEO_CHANGE="videoChange",e.START_FULLSCREEN="startFullscreen",e.END_FULLSCREEN="endFullscreen",e.START_AD="adStart",e.SUBTITLE_CHANGE="subtitleChange",e.END_AD="adEnd",e.MUTE="mute",e.UN_MUTE="unMute",e.ERROR="playerError",e.PLAYBACK_FINISHED="end",e.SCREEN_RESIZE="resize",e.UNLOAD="unload",e.END="end",e.SOURCE_UNLOADED="sourceUnloaded",e.MANUAL_SOURCE_CHANGE="manualSourceChangeInitiated",e.VIDEOSTART_TIMEOUT="VIDEOSTART_TIMEOUT"}(t.Event||(t.Event={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BITMOVIN="bitmovin",e.JW="jw",e.RADIANT="radiant",e.VIDEOJS="videojs",e.HLSJS="hlsjs",e.SHAKA="shaka",e.DASHJS="dashjs",e.HTML5="html5"}(t.Player||(t.Player={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_NAMESPACE="urn:x-cast:com.bitmovin.analytics.cast",t.ANALYTICS_BACKEND_BASE_URL="https://analytics-ingress-global.bitmovin.com",t.ANALYTICS_LICENSECALL_TIMEOUT=6e4,t.ANALYTICS_VIDEOSTART_TIMEOUT=6e4,t.ANALYTICS_QUALITY_CHANGE_COUNT_THRESHOLD=50,t.ANALYTICS_QUALITY_CHANGE_COUNT_RESET_INTERVAL=36e5,t.ANALYTICS_REBUFFER_TIMEOUT=12e4},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n(8),o=n(24),s=n(1),E=n(4),l=n(0),u=n(16),c=n(26),d=n(31),A=n(42),m=function(){function e(e,t,n){var i=this;void 0===n&&(n=new d.BackendFactory),this.pageLoadTime=0,this.playerStartupTime=0,this.videoStartupTime=0,this.autoplay=void 0,this.droppedSampleFrames=0,this.startupTime=0,this.setCustomDataOnce=function(e){var t=i.config;i.setCustomData(e),i.setCustomData(t)},this.guardAgainstMissingVideoTitle=function(e,t){e&&t&&e.title&&!t.title&&s.logger.error("The new analytics configuration does not contain the field title")},this.guardAgainstMissingIsLive=function(e,t){null!=e&&null!=t&&e.isLive&&null==t.isLive&&s.logger.error("The new analytics configuration does not contain the field `isLive`. It will default to `false` which might be unintended? Once stream playback information is available the type will be populated.")},this.sourceChange=function(e){s.logger.log("Processing Source Change for Analytics",e),i.guardAgainstMissingVideoTitle(i.config,e),i.guardAgainstMissingIsLive(i.config,e);var t=i.getMergedAnalyticsConfig(e);i.adapter.sourceChange(t,l.getCurrentTimestamp())},this.setCustomData=function(e){var t,n,r,o,s,E,l,u,c,d;i.sendAnalyticsRequestAndClearValues(),i.config=a({},i.config,(n=(t=e).customData1,r=t.customData2,o=t.customData3,s=t.customData4,E=t.customData5,l=t.customData6,u=t.customData7,c=t.experimentName,d={customData1:n,customData2:r,customData3:o,customData4:s,customData5:E,customData6:l,customData7:u,experimentName:c},n&&(d.customData1=n),r&&(d.customData2=r),o&&(d.customData3=o),s&&(d.customData4=s),E&&(d.customData5=E),l&&(d.customData6=l),u&&(d.customData7=u),c&&(d.experimentName=c),d)),i.setConfigParameters()},this.getCurrentImpressionId=function(){return i.sample.impressionId},this.config=this.buildDefaultAnalyticsConfigValues(e),this.adapter=t,this.backendFactory=n,this.sessionHandler=new A.SessionPersistenceHandler(e);var r=this.adapter.onLicenseKeyReceived.subscribe(function(e){i.config.key||(i.config.key=e.licenseKey),r()});this.sample=this.setupSample(),this.init(),this.setupStateMachineCallbacks(),this.adapter.initialize(),this.adapter.adModule&&new c.AdAnalytics(this,this.adapter.adModule),this.checkForErrorsInConfig(e)}return Object.defineProperty(e.prototype,"version",{get:function(){return u.VERSION},enumerable:!0,configurable:!0}),e.prototype.getPlayerInformationFromAdapter=function(){var e=this.config.player||this.adapter.getPlayerName();return{player:e,version:e+"-"+this.adapter.getPlayerVersion(),playerTech:this.adapter.getPlayerTech()}},e.prototype.updateSamplesToCastClientConfig=function(e,t){for(var n=0,a=e;n<a.length;n++){var i=a[n];this.updateSampleToCastClientConfig(i,t)}},e.prototype.updateSampleToCastClientConfig=function(e,t){var n=t.config,a=t.userId,i=t.impressionId,r=t.domain,o=t.path,s=t.language,E=t.userAgent;e.impressionId=i,e.userId=a,e.userAgent=E,e.domain=r,e.path=o,e.language=s,this.setConfigParameters(e,n)},e.prototype.init=function(){!0===this.adapter.supportsDeferredLicenseLoading||""!==this.config.key&&l.validString(this.config.key)?(s.logger.setLogging(this.config.debug||!1),this.backend=this.createBackend(this.config),this.videoStartupTime=0,this.setConfigParameters(),this.generateNewImpressionId(),this.setUserId(),this.adapter.videoCompletionTracker&&this.adapter.videoCompletionTracker.reset(),this.clearResetQualityChangeIntverval(),this.adapter.resetQualityChangeCount()):s.logger.error("Invalid analytics license key provided")},e.prototype.setConfigParameters=function(e,t){void 0===e&&(e=this.sample),void 0===t&&(t=this.config),e.key=t.key,e.playerKey=t.playerKey,t.player&&(e.player=t.player),e.domain=this.getDomainFromConfig(t)||l.sanitizePath(window.location.hostname),e.cdnProvider=t.cdnProvider,e.videoId=t.videoId,e.videoTitle=t.title,e.customUserId=null!=t.userId?t.userId:t.customUserId,e.customData1=l.getCustomDataString(t.customData1),e.customData2=l.getCustomDataString(t.customData2),e.customData3=l.getCustomDataString(t.customData3),e.customData4=l.getCustomDataString(t.customData4),e.customData5=l.getCustomDataString(t.customData5),e.customData6=l.getCustomDataString(t.customData6),e.customData7=l.getCustomDataString(t.customData7),e.experimentName=t.experimentName},e.prototype.generateNewImpressionId=function(){this.sample.impressionId=l.generateUUID()},e.prototype.setUserId=function(){this.sample.userId=this.sessionHandler.userId},e.prototype.setupStateMachineCallbacks=function(){var e=this;this.adapter.stateMachineCallbacks.setup=function(t,n,a){if(s.logger.log("Setup bitmovin analytics "+e.sample.analyticsVersion+" with impressionId: "+e.sample.impressionId),e.setDuration(t),e.setState(n),e.playerStartupTime=e.sample.playerStartupTime=t,window.performance&&window.performance.timing){var i=l.getCurrentTimestamp()-window.performance.timing.navigationStart;e.pageLoadTime=e.sample.pageLoadTime=i}e.startupTime=t,e.sendAnalyticsRequestAndClearValues(),e.sample.pageLoadTime=0},this.adapter.stateMachineCallbacks.startup=function(t,n){e.setDuration(t),e.videoStartupTime=e.sample.videoStartupTime=t,e.sample.supportedVideoCodecs=o.CodecHelper.supportedVideoFormats,e.setState(n),e.startupTime>0&&(e.startupTime+=t),e.sample.startupTime=e.startupTime,e.autoplay=e.sample.autoplay=e.adapter.getAutoPlay();var a=e.adapter.getDrmPerformanceInfo();null!=a&&(e.sample.drmType=a.drmType,e.sample.drmLoadTime=a.drmLoadTime),e.sendAnalyticsRequestAndClearValues(),e.sample.autoplay=void 0},this.adapter.stateMachineCallbacks.playing=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.played=t,e.setCompletionValues(),e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.unload=function(t,n,a){"playing"===n&&(e.setDuration(t),e.setState(n),e.sample.played=t,e.setCompletionValues(),e.sendUnloadRequest()),e.videoStartupTime>0&&(e.clearValues(),e.setState("closed"),e.sendUnloadRequest())},this.adapter.stateMachineCallbacks.heartbeat=function(t,n,i){e.setState(n),e.setDuration(t),e.sample=a({},e.sample,i),"playing"===n&&e.setCompletionValues(),e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.qualitychange=function(t,n){e.sendQualityChange(n,t)},this.adapter.stateMachineCallbacks.qualitychange_pause=function(t,n){e.sendQualityChange(n,t)},this.adapter.stateMachineCallbacks.qualitychange_rebuffering=function(t,n){e.sendQualityChange(n,t)},this.adapter.stateMachineCallbacks.videoChange=function(t){e.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setPlaybackVideoPropertiesFromEvent(t)},this.adapter.stateMachineCallbacks.audioChange=function(t){e.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setPlaybackAudioPropertiesFromEvent(t)},this.adapter.stateMachineCallbacks.audiotrack_changing=function(){e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.pause=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.paused=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.paused_seeking=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.seeked=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.end_play_seeking=function(t,n,a){e.setState(n),e.setDuration(t),e.sample.seeked=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.rebuffering=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.buffered=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.videoStartFailed=function(t,n){void 0===n&&(n=!0),e.sample.videoStartFailed=!0,e.sample.videoStartFailedReason=t.reason,n&&e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.error=function(t){e.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setState("error"),e.sample.errorCode=t.code,e.sample.errorMessage=t.message,e.sample.errorData=JSON.stringify(t.data);var n=e.adapter.segments.map(function(e){return e.name});e.sample.errorSegments=n,e.adapter.onError&&e.adapter.onError(),e.sendAnalyticsRequestAndClearValues(),delete e.sample.errorCode,delete e.sample.errorMessage,delete e.sample.errorData},this.adapter.stateMachineCallbacks.ad=function(t,n,a){e.setDuration(t),e.setState(n),e.sample.ad=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.mute=function(){e.sample.isMuted=!0},this.adapter.stateMachineCallbacks.unMute=function(){e.sample.isMuted=!1},this.adapter.stateMachineCallbacks.subtitle_changing=function(){e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent=function(t){l.validNumber(t.currentTime)&&(e.sample.videoTimeEnd=l.calculateTime(t.currentTime))},this.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent=function(t){l.validNumber(t.currentTime)&&(e.sample.videoTimeStart=l.calculateTime(t.currentTime))},this.adapter.stateMachineCallbacks.manualSourceChange=function(t){e.sample=e.setupSample(),e.startupTime=0,e.config=t.config?t.config:e.config,e.init()},this.adapter.stateMachineCallbacks.initialSourceChange=function(t){e.config=t.config,e.setConfigParameters()},this.adapter.stateMachineCallbacks.end=function(t,n,a){e.sample=e.setupSample(),e.startupTime=0,e.init()}},e.prototype.setDuration=function(e){this.sample.duration=e},e.prototype.setState=function(e){this.sample.state=e},e.prototype.setPlaybackVideoPropertiesFromEvent=function(e){l.validNumber(e.width)&&(this.sample.videoPlaybackWidth=e.width),l.validNumber(e.height)&&(this.sample.videoPlaybackHeight=e.height),l.validNumber(e.bitrate)&&(this.sample.videoBitrate=e.bitrate),l.validString(e.codec)&&(this.sample.videoCodec=e.codec)},e.prototype.setPlaybackAudioPropertiesFromEvent=function(e){l.validNumber(e.bitrate)&&(this.sample.audioBitrate=e.bitrate),l.validString(e.codec)&&(this.sample.audioCodec=e.codec)},e.prototype.setPlaybackInfoFromAdapter=function(){var e=this.adapter.getCurrentPlaybackInfo();e&&(this.sample.isLive=this.getIsLiveFromConfigOrPlaybackInfo(this.config,e.isLive),l.validString(e.size)&&(this.sample.size=e.size),l.validString(e.playerTech)&&(this.sample.playerTech=e.playerTech),l.validNumber(e.videoDuration)&&(this.sample.videoDuration=l.calculateTime(e.videoDuration||0)),l.validString(e.streamFormat)&&(this.sample.streamFormat=e.streamFormat),l.validString(e.mpdUrl)&&(this.sample.mpdUrl=e.mpdUrl),l.validString(e.m3u8Url)&&(this.sample.m3u8Url=e.m3u8Url),l.validString(e.progUrl)&&(this.sample.progUrl=e.progUrl),l.validNumber(e.videoWindowWidth)&&(this.sample.videoWindowWidth=e.videoWindowWidth),l.validNumber(e.videoWindowHeight)&&(this.sample.videoWindowHeight=e.videoWindowHeight),l.validNumber(e.screenHeight)&&(this.sample.screenHeight=e.screenHeight),l.validNumber(e.screenWidth)&&(this.sample.screenWidth=e.screenWidth),l.validNumber(e.videoPlaybackHeight)&&(this.sample.videoPlaybackHeight=e.videoPlaybackHeight),l.validNumber(e.videoPlaybackWidth)&&(this.sample.videoPlaybackWidth=e.videoPlaybackWidth),l.validNumber(e.videoBitrate)&&(this.sample.videoBitrate=e.videoBitrate),l.validNumber(e.audioBitrate)&&(this.sample.audioBitrate=e.audioBitrate),l.validBoolean(e.isMuted)&&(this.sample.isMuted=e.isMuted),l.validBoolean(e.isCasting)&&(this.sample.isCasting=e.isCasting),l.validString(e.videoTitle)&&!this.config.title&&(this.sample.videoTitle=e.videoTitle),l.validString(e.audioCodec)&&(this.sample.audioCodec=e.audioCodec),l.validString(e.videoCodec)&&(this.sample.videoCodec=e.videoCodec),l.validString(e.audioLanguage)&&(this.sample.audioLanguage=e.audioLanguage),l.validBoolean(e.subtitleEnabled)&&(this.sample.subtitleEnabled=e.subtitleEnabled),l.validString(e.subtitleLanguage)?this.sample.subtitleLanguage=e.subtitleLanguage:this.sample.subtitleLanguage=void 0,l.validNumber(e.droppedFrames)&&(this.sample.droppedFrames=Math.max(e.droppedFrames-this.droppedSampleFrames,0),this.droppedSampleFrames=e.droppedFrames))},e.prototype.setupSample=function(){return this.droppedSampleFrames=0,a({platform:"web",playerStartupTime:0,pageLoadType:l.getPageLoadType(),path:l.sanitizePath(window.location.pathname),language:navigator.language||navigator.userLanguage,userAgent:navigator.userAgent,screenWidth:screen.width,screenHeight:screen.height,isLive:!1,videoDuration:0,size:r.PlayerSize.Window,time:0,videoWindowWidth:0,videoWindowHeight:0,droppedFrames:0,played:0,buffered:0,paused:0,ad:0,seeked:0,videoPlaybackWidth:0,videoPlaybackHeight:0,videoBitrate:0,audioBitrate:0,videoTimeStart:0,videoTimeEnd:0,videoStartupTime:0,duration:0,startupTime:0,analyticsVersion:u.VERSION,pageLoadTime:0,completedTotal:0},this.getPlayerInformationFromAdapter())},e.prototype.sendAnalyticsRequest=function(){this.setPlaybackInfoFromAdapter(),this.sample.time=l.getCurrentTimestamp(),this.sample.downloadSpeedInfo=this.adapter.downloadSpeedInfo;var e=a({},this.sample);this.backend.sendRequest(e)},e.prototype.sendAnalyticsRequestAndClearValues=function(){this.sendAnalyticsRequest(),this.clearValues()},e.prototype.sendUnloadRequest=function(){this.backend.sendUnloadRequest(this.sample)},e.prototype.sendAnalyticsRequestSynchronous=function(){this.backend.sendRequestSynchronous(this.sample)},e.prototype.clearValues=function(){this.sample.ad=0,this.sample.paused=0,this.sample.played=0,this.sample.seeked=0,this.sample.buffered=0,this.sample.playerStartupTime=0,this.sample.videoStartupTime=0,this.sample.startupTime=0,this.sample.duration=0,this.sample.droppedFrames=0,this.sample.drmLoadTime=void 0,this.sample.videoStartFailed=void 0,this.sample.videoStartFailedReason=void 0,this.sample.completed=void 0,this.adapter.clearValues()},e.prototype.getIsLiveFromConfigOrPlaybackInfo=function(e,t){return null==t?e.isLive||!1:!!l.validBoolean(t)&&t},e.prototype.getMergedCollectorConfig=function(e,t){void 0===t&&(t=this.config);var n=(t||{}).config;return null!=e&&(n=a({},n,{enabled:!0},e.config)),n},e.prototype.getMergedAnalyticsConfig=function(e,t){void 0===t&&(t=this.config);var n=this.getMergedCollectorConfig(e,t);return a({},t,e,{config:n})},e.prototype.buildDefaultAnalyticsConfigValues=function(e){return l.validBoolean(e.isLive)||(e.isLive=!1),e},e.prototype.checkForErrorsInConfig=function(e){null!=e.customUserId&&null!=e.userId&&s.logger.warning("Configuration Warning: \nCustomUserId and UserId are set in the config \nValue of UserId will be used in sample \nPlease only use one configuartion field to set your userId")},e.prototype.getDomainFromConfig=function(e){var t=e.config;return null!=t&&null!=t.origin?t.origin:void 0},e.prototype.createBackend=function(e){var t=this.getDomainFromConfig(e)||l.sanitizePath(window.location.hostname);return this.backendFactory.createBackend(e,{key:e.key,domain:t,version:u.VERSION},this.adapter)},e.prototype.setCompletionValues=function(){if(this.adapter.videoCompletionTracker){var e=this.adapter.videoCompletionTracker.addWatched({start:this.sample.videoTimeStart,end:this.sample.videoTimeEnd}),t=this.adapter.videoCompletionTracker.getCompletionPercentage();Number.isNaN(e)||Number.isNaN(t)||(this.sample.completed=e,this.sample.completedTotal=t)}},e.prototype.sendQualityChange=function(e,t){var n=this;null==this.resetQualityChangeCountIntervalId&&(this.resetQualityChangeCountIntervalId=window.setInterval(function(){n.adapter.resetQualityChangeCount()},E.ANALYTICS_QUALITY_CHANGE_COUNT_RESET_INTERVAL)),this.adapter.increaseQualityChangeCount(),this.adapter.isQualityChangeEventEnabled()?(this.setDuration(t),this.setState(e),this.sendAnalyticsRequestAndClearValues()):(this.setDuration(t),this.adapter.stateMachineCallbacks.error({code:i.ErrorCode.QualityChangeThresholdExceeded,message:"ANALYTICS_QUALITY_CHANGE_THRESHOLD_EXCEEDED",data:void 0,currentTime:t}))},e.prototype.clearResetQualityChangeIntverval=function(){null!=this.resetQualityChangeCountIntervalId&&(window.clearInterval(this.resetQualityChangeCountIntervalId),delete this.resetQualityChangeCountIntervalId)},e.version=u.VERSION,e.LICENSE_CALL_PENDING_TIMEOUT=200,e.PAGE_LOAD_TYPE_TIMEOUT=200,e.CAST_RECEIVER_CONFIG_MESSAGE="CAST_RECEIVER_CONFIG_MESSAGE",e}();t.Analytics=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=function(){function e(){}return e.prototype.getCurrentImpressionId=function(){if(this.guardAgainstNotInitializedAnalytics())return this.analytics.getCurrentImpressionId()},e.prototype.setCustomData=function(e){this.guardAgainstNotInitializedAnalytics()&&this.analytics.setCustomData(e)},e.prototype.setCustomDataOnce=function(e){this.guardAgainstNotInitializedAnalytics()&&this.analytics.setCustomDataOnce(e)},e.prototype.sourceChange=function(e){this.guardAgainstNotInitializedAnalytics()&&this.analytics.sourceChange(e)},e.prototype.guardAgainstNotInitializedAnalytics=function(){return!!this.analytics||(a.logger.log("Bitmovin Analytics: Adapter hasn't been initialized yet"),!1)},e}();t.Adapter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i="video/mp4",r="video/webm",o="application/x-mpegURL",s="application/dash+xml";t.MIMETypes={MP4:i,WEBM:r,HLS:o,DASH:s},t.getMIMETypeFromFileExtension=function(e){return e=e.toLowerCase(),a.endsWith(e,".m3u8")?o:a.endsWith(e,".mp4")||a.endsWith(e,".m4v")||a.endsWith(e,".m4a")?i:a.endsWith(e,".webm")?r:a.endsWith(e,".mpd")?s:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Window="WINDOW",e.Fullscreen="FULLSCREEN"}(t.PlayerSize||(t.PlayerSize={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BitmovinPlayerLicensingError=1103]="BitmovinPlayerLicensingError",e[e.SetupMissingLicenseWhitelist=1105]="SetupMissingLicenseWhitelist",e[e.QualityChangeThresholdExceeded=1e4]="QualityChangeThresholdExceeded",e[e.BufferingTimeoutReached=10001]="BufferingTimeoutReached"}(t.ErrorCode||(t.ErrorCode={}))},function(e,t,n){var a;a={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(e,t){var n="string"==typeof e.initial?{state:e.initial}:e.initial,i=e.terminal||e["final"],r=t||e.target||{},o=e.events||[],s=e.callbacks||{},E={},l={},u=function(e){var t=Array.isArray(e.from)?e.from:e.from?[e.from]:[a.WILDCARD];E[e.name]=E[e.name]||{};for(var n=0;n<t.length;n++)l[t[n]]=l[t[n]]||[],l[t[n]].push(e.name),E[e.name][t[n]]=e.to||t[n];e.to&&(l[e.to]=l[e.to]||[])};n&&(n.event=n.event||"startup",u({name:n.event,from:"none",to:n.state}));for(var c=0;c<o.length;c++)u(o[c]);for(var d in E)E.hasOwnProperty(d)&&(r[d]=a.buildEvent(d,E[d]));for(var d in s)s.hasOwnProperty(d)&&(r[d]=s[d]);return r.current="none",r.is=function(e){return Array.isArray(e)?e.indexOf(this.current)>=0:this.current===e},r.can=function(e){return!this.transition&&void 0!==E[e]&&(E[e].hasOwnProperty(this.current)||E[e].hasOwnProperty(a.WILDCARD))},r.cannot=function(e){return!this.can(e)},r.transitions=function(){return(l[this.current]||[]).concat(l[a.WILDCARD]||[])},r.isFinished=function(){return this.is(i)},r.error=e.error||function(e,t,n,a,i,r,o){throw o||r},r.states=function(){return Object.keys(l).sort()},n&&!n.defer&&r[n.event](),r},doCallback:function(e,t,n,i,r,o){if(t)try{return t.apply(e,[n,i,r].concat(o))}catch(t){return e.error(n,i,r,o,a.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",t)}},beforeAnyEvent:function(e,t,n,i,r){return a.doCallback(e,e.onbeforeevent,t,n,i,r)},afterAnyEvent:function(e,t,n,i,r){return a.doCallback(e,e.onafterevent||e.onevent,t,n,i,r)},leaveAnyState:function(e,t,n,i,r){return a.doCallback(e,e.onleavestate,t,n,i,r)},enterAnyState:function(e,t,n,i,r){return a.doCallback(e,e.onenterstate||e.onstate,t,n,i,r)},changeState:function(e,t,n,i,r){return a.doCallback(e,e.onchangestate,t,n,i,r)},beforeThisEvent:function(e,t,n,i,r){return a.doCallback(e,e["onbefore"+t],t,n,i,r)},afterThisEvent:function(e,t,n,i,r){return a.doCallback(e,e["onafter"+t]||e["on"+t],t,n,i,r)},leaveThisState:function(e,t,n,i,r){return a.doCallback(e,e["onleave"+n],t,n,i,r)},enterThisState:function(e,t,n,i,r){return a.doCallback(e,e["onenter"+i]||e["on"+i],t,n,i,r)},beforeEvent:function(e,t,n,i,r){if(!1===a.beforeThisEvent(e,t,n,i,r)||!1===a.beforeAnyEvent(e,t,n,i,r))return!1},afterEvent:function(e,t,n,i,r){a.afterThisEvent(e,t,n,i,r),a.afterAnyEvent(e,t,n,i,r)},leaveState:function(e,t,n,i,r){var o=a.leaveThisState(e,t,n,i,r),s=a.leaveAnyState(e,t,n,i,r);return!1!==o&&!1!==s&&(a.ASYNC===o||a.ASYNC===s?a.ASYNC:void 0)},enterState:function(e,t,n,i,r){a.enterThisState(e,t,n,i,r),a.enterAnyState(e,t,n,i,r)},buildEvent:function(e,t){return function(){var n=this.current,i=t[n]||(t[a.WILDCARD]!=a.WILDCARD?t[a.WILDCARD]:n)||n,r=Array.prototype.slice.call(arguments);if(this.transition)return this.error(e,n,i,r,a.Error.PENDING_TRANSITION,"event "+e+" inappropriate because previous transition did not complete");if(this.cannot(e))return this.error(e,n,i,r,a.Error.INVALID_TRANSITION,"event "+e+" inappropriate in current state "+this.current);if(!1===a.beforeEvent(this,e,n,i,r))return a.Result.CANCELLED;if(n===i)return a.afterEvent(this,e,n,i,r),a.Result.NOTRANSITION;var o=this;this.transition=function(){return o.transition=null,o.current=i,a.enterState(o,e,n,i,r),a.changeState(o,e,n,i,r),a.afterEvent(o,e,n,i,r),a.Result.SUCCEEDED},this.transition.cancel=function(){o.transition=null,a.afterEvent(o,e,n,i,r)};var s=a.leaveState(this,e,n,i,r);return!1===s?(this.transition=null,a.Result.CANCELLED):a.ASYNC===s?a.Result.PENDING:this.transition?this.transition():void 0}}},e.exports&&(t=e.exports=a),t.StateMachine=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),i=n(2),r=n(45),o=n(4),s=n(0),E=[3e3,5e3,1e4,3e4,59700],l=function(){function e(e,t){this.stateMachineCallbacks=e,this.onEnterStateTimestamp=0,this.currentRebufferingIntervalIndex=0,this.stateMachine=this.createStateMachine(t)}return e.prototype.startRebufferingHeartbeatInterval=function(e){var t=this;void 0===e&&(e=!0),this.resetRebufferingHelpers(e),this.startRebufferingTimeoutHandle(),this.rebufferingHeartbeatIntervalHandle=window.setInterval(function(){if("rebuffering"===t.stateMachine.current.toLowerCase()){var e=(new Date).getTime(),n=e-t.onEnterStateTimestamp;t.stateMachineCallbacks.heartbeat(n,t.stateMachine.current.toLowerCase(),{buffered:n}),t.onEnterStateTimestamp=e,t.currentRebufferingIntervalIndex=Math.min(t.currentRebufferingIntervalIndex+1,E.length-1),t.startRebufferingHeartbeatInterval(!1)}else t.resetRebufferingHelpers()},E[this.currentRebufferingIntervalIndex])},e.prototype.resetRebufferingHelpers=function(e){void 0===e&&(e=!0),e&&(this.currentRebufferingIntervalIndex=0),this.clearRebufferingHeartbeatHandle(),this.clearRebufferingTimeoutHandle(e)},e.prototype.clearRebufferingHeartbeatHandle=function(){null!=this.rebufferingHeartbeatIntervalHandle&&(window.clearInterval(this.rebufferingHeartbeatIntervalHandle),this.rebufferingHeartbeatIntervalHandle=void 0)},e.prototype.startRebufferingTimeoutHandle=function(){var e=this;this.currentRebufferingIntervalIndex>0||(this.rebufferingTimeoutHandle=window.setTimeout(function(){e.callEvent(i.Event.ERROR,new r["default"](a.ErrorCode.BufferingTimeoutReached),s.getCurrentTimestamp())},o.ANALYTICS_REBUFFER_TIMEOUT))},e.prototype.clearRebufferingTimeoutHandle=function(e){e&&null!=this.rebufferingTimeoutHandle&&(window.clearTimeout(this.rebufferingTimeoutHandle),this.rebufferingTimeoutHandle=void 0)},e}();t.AnalyticsStateMachine=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(46),i=n(1),r=n(4),o=n(0),s=function(){function e(e){var t=this;this.stateMachineCallbacks={setup:function(e,t,n){},startup:function(e,t){},playing:function(e,t,n){},heartbeat:function(e,t,n){},qualitychange:function(e,t){},qualitychange_pause:function(e,t){},qualitychange_rebuffering:function(e,t){},videoChange:function(e){},audioChange:function(e){},audiotrack_changing:function(){},pause:function(e,t,n){},paused_seeking:function(e,t,n){},end_play_seeking:function(e,t,n){},rebuffering:function(e,t,n){},error:function(e){},end:function(e,t,n){},unload:function(e,t,n){},ad:function(e,t,n){},mute:function(){},unMute:function(){},subtitle_changing:function(){},setVideoTimeEndFromEvent:function(e){},setVideoTimeStartFromEvent:function(e){},videoStartFailed:function(e,t){},source_changing:function(e,t,n){},ready:function(e,t,n){},startCasting:function(e,t){},manualSourceChange:function(e){},initialSourceChange:function(e){},muting_ready:function(e,t,n){}},this._onLicenseKeyReceived=new a.EventDispatcher,this._onLicenseCallFailed=new a.EventDispatcher,this.drmPerformanceInfo=void 0,this.previousVideoBitrate=0,this.previousAudioBitrate=0,this.qualityChangeCount=0,this.eventCallback=function(e,n){n=n||{},t.stateMachine?t.stateMachine.callEvent(e,n,o.getCurrentTimestamp()):i.logger.log("Bitmovin Analytics: StateMachine isn't ready yet");
},e||(e={starttime:void 0}),e.starttime||(e.starttime=o.getCurrentTimestamp()),this.opts=e}return Object.defineProperty(e.prototype,"onLicenseKeyReceived",{get:function(){return this._onLicenseKeyReceived},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onLicenseCallFailed",{get:function(){return this._onLicenseCallFailed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"downloadSpeedInfo",{get:function(){return{segmentsDownloadCount:0,segmentsDownloadSize:0,segmentsDownloadTime:0,avgDownloadSpeed:0,minDownloadSpeed:0,maxDownloadSpeed:0,avgTimeToFirstByte:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segments",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.getCommonPlaybackInfo=function(){return{screenHeight:screen.height,screenWidth:screen.width}},e.prototype.clearValues=function(){},e.prototype.clearSegments=function(){},e.prototype.increaseQualityChangeCount=function(){this.qualityChangeCount++},e.prototype.resetQualityChangeCount=function(){this.qualityChangeCount=0},e.prototype.isQualityChangeEventEnabled=function(){return this.qualityChangeCount<=r.ANALYTICS_QUALITY_CHANGE_COUNT_THRESHOLD},e.prototype.shouldAllowVideoQualityChange=function(e){return null!=e&&!isNaN(e)&&this.previousVideoBitrate!==e&&this.isQualityChangeEventEnabled()},e.prototype.setPreviousVideoBitrate=function(e){this.previousVideoBitrate=e},e.prototype.shouldAllowAudioQualityChange=function(e){return null!=e&&!isNaN(e)&&this.previousAudioBitrate!==e&&this.isQualityChangeEventEnabled()},e.prototype.setPreviousAudioBitrate=function(e){this.previousAudioBitrate=e},e}();t.InternalAdapter=s},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(59),s=n(15),E=n(2),l=n(7),u=n(3),c=n(8),d=n(21),A=n(0),m=function(e){function t(t,n){var a=e.call(this,n)||this;return a.mediaElement=t,a.onBeforeUnLoadEvent=!1,a.getPlayerName=function(){return u.Player.HTML5},a.getPlayerTech=function(){return"html5"},a.getAutoPlay=function(){return!!a.mediaElement&&a.mediaElement.autoplay},a.getDrmPerformanceInfo=function(){return a.drmPerformanceInfo},a.isLive=function(){return!!a.mediaElement&&a.mediaElement.duration===1/0},a.stateMachine=new o.HTML5AnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.mediaElEventHandlers=[],a.bufferingTimeout=void 0,a.isBuffering=!1,a.lastIsLiveStatus=!1,a.isPaused=!1,a.isSeeking=!1,a.previousMediaTime=0,a.previousClientTime=0,a.needsReadyEvent=!0,a.needsFirstPlayIntent=!0,a.mediaElementSet=!1,a.videoCompletionTracker=new s["default"],a}return i(t,e),Object.defineProperty(t.prototype,"segments",{get:function(){return[]},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.mediaElement&&this.setMediaElement(),this.registerWindowEvents()},t.prototype.getStreamSources=function(e){if(!e)return{};switch(this.getStreamType()){case"hls":return{m3u8Url:e};case"dash":return{mpdUrl:e};default:return{progUrl:e}}},t.prototype.getCurrentPlaybackInfo=function(){var e=r({},this.getCommonPlaybackInfo(),this.getStreamSources(this.getStreamURL()),{streamFormat:this.getStreamType(),isLive:this.isLive(),size:A.isVideoInFullscreen()?c.PlayerSize.Fullscreen:c.PlayerSize.Window,playerTech:this.getPlayerTech(),droppedFrames:0});this.mediaElement&&(e=r({},e,{videoDuration:this.mediaElement.duration,isMuted:this.mediaElement.muted,videoWindowHeight:this.mediaElement.height,videoWindowWidth:this.mediaElement.width}));var t=this.getCurrentQualityLevelInfo();return t&&(e=r({},e,{videoPlaybackHeight:t.height,videoPlaybackWidth:t.width,videoBitrate:t.bitrate})),e},t.prototype.setMediaElement=function(e){if(void 0===e&&(e=null),e&&this.mediaElement&&(this.unregisterMediaElement(),this.mediaElementSet=!1),e&&(this.mediaElement=e),!this.mediaElement)throw new Error("No media element owned");if(this.mediaElementSet)throw new Error("Media element already set (only call this once)");this.mediaElementSet=!0,this.registerMediaElement(),this.onMaybeReady()},t.prototype.getMIMEType=function(){var e=this.getStreamURL();if(e&&void 0!==e)return l.getMIMETypeFromFileExtension(e)},t.prototype.getStreamType=function(){var e=this.getMIMEType();if(e)return d.getStreamTypeFromMIMEType(e)},t.prototype.getStreamURL=function(){var e=this.mediaElement;if(e)return e.src},t.prototype.resetMedia=function(){this.mediaElement=null,this.mediaElEventHandlers=[],window.clearTimeout(this.bufferingTimeout)},t.prototype.registerMediaElement=function(){var e=this,t=this.mediaElement;t&&(this.listenToMediaElementEvent("loadstart",function(){e.eventCallback(E.Event.READY,{})}),this.listenToMediaElementEvent("loadedmetadata",function(){1===t.readyState&&(e.checkQualityLevelAttributes(!0),null!=e.mediaElement&&(e.videoCompletionTracker.reset(),e.videoCompletionTracker.setVideoDuration(e.mediaElement.duration)))}),this.listenToMediaElementEvent("play",function(){var n=t.currentTime;e.needsFirstPlayIntent=!1,e.eventCallback(E.Event.PLAY,{currentTime:n})}),this.listenToMediaElementEvent("pause",function(){e.onPaused()}),this.listenToMediaElementEvent("playing",function(){var n=t.currentTime;e.isPaused=!1,e.needsFirstPlayIntent||e.eventCallback(E.Event.TIMECHANGED,{currentTime:n})}),this.listenToMediaElementEvent("error",function(){var n=t.currentTime,a=t.error;e.eventCallback(E.Event.ERROR,{currentTime:n,code:a?a.code:null,message:a?a.message:null})}),this.listenToMediaElementEvent("volumechange",function(){var n=t.muted,a=t.currentTime;n?e.eventCallback(E.Event.MUTE,{currentTime:a}):e.eventCallback(E.Event.UN_MUTE,{currentTime:a})}),this.listenToMediaElementEvent("seeking",function(){var n=t.currentTime;e.eventCallback(E.Event.SEEK,{currentTime:n})}),this.listenToMediaElementEvent("seeked",function(){var n=t.currentTime;clearTimeout(e.bufferingTimeout),e.eventCallback(E.Event.SEEKED,{currentTime:n})}),this.listenToMediaElementEvent("timeupdate",function(){var n=t.currentTime;e.isBuffering=!1,e.isSeeking=!1,e.needsFirstPlayIntent||(e.isPaused||e.eventCallback(E.Event.TIMECHANGED,{currentTime:n}),e.checkQualityLevelAttributes(),e.checkSeeking(),e.checkPlayheadProgress(),e.previousMediaTime=n)}),this.listenToMediaElementEvent("stalled",function(){}),this.listenToMediaElementEvent("waiting",function(){e.checkSeeking(),e.onBuffering()}))},t.prototype.listenToMediaElementEvent=function(e,t){if(!this.mediaElement)throw new Error("No media attached");var n=t.bind(this);this.mediaElEventHandlers.push({event:e,handler:n}),this.mediaElement.addEventListener(e,n,!1)},t.prototype.onMaybeReady=function(){if(this.needsReadyEvent&&this.mediaElement){this.needsReadyEvent=!1;var e=this.getCurrentPlaybackInfo();this.videoCompletionTracker.reset(),this.videoCompletionTracker.setVideoDuration(this.mediaElement.duration),this.eventCallback(E.Event.READY,e)}},t.prototype.unregisterMediaElement=function(){if(!this.mediaElement)throw new Error("No media attached");var e=this.mediaElement;this.mediaElEventHandlers.forEach(function(t){e.removeEventListener(t.event,t.handler)}),this.resetMedia()},t.prototype.onBuffering=function(){if(!this.mediaElement)throw new Error("No media attached");var e=this.mediaElement.currentTime;this.isBuffering||this.isPaused&&!this.isSeeking||(this.isSeeking?this.eventCallback(E.Event.SEEK,{currentTime:e}):this.eventCallback(E.Event.START_BUFFERING,{currentTime:e}),this.isBuffering=!0)},t.prototype.onPaused=function(e){if(!this.isPaused){if(!this.mediaElement)throw new Error("No media attached");e||(e=this.mediaElement.currentTime),this.eventCallback(E.Event.PAUSE,{currentTime:e}),this.isPaused=!0}},t.prototype.registerWindowEvents=function(){window.addEventListener("beforeunload",this.onPageClose.bind(this)),window.addEventListener("unload",this.onPageClose.bind(this))},t.prototype.onPageClose=function(){if(!this.onBeforeUnLoadEvent){this.onBeforeUnLoadEvent=!0;var e=this.mediaElement,t=void 0;null!=e&&(t=e.currentTime),this.eventCallback(E.Event.UNLOAD,{currentTime:t})}},t.prototype.checkPlayheadProgress=function(){var e=this;if(!this.mediaElement)throw new Error("No media attached");var n=this.mediaElement;n.paused&&this.onPaused(),clearTimeout(this.bufferingTimeout),this.bufferingTimeout=window.setTimeout(function(){n.paused||n.ended&&!e.isBuffering||n.currentTime-e.previousMediaTime<t.BUFFERING_TIMECHANGED_TIMEOUT&&e.onBuffering()},t.BUFFERING_TIMECHANGED_TIMEOUT)},t.prototype.checkQualityLevelAttributes=function(e){if(void 0===e&&(e=!1),!this.mediaElement)throw new Error("No media attached");var t=this.mediaElement,n=this.getCurrentQualityLevelInfo();if(n){var a=n.bitrate,i=n.width,r=n.height,o=this.isLive();if(o!==this.lastIsLiveStatus&&(this.lastIsLiveStatus=o),null!=a&&this.shouldAllowVideoQualityChange(a)){this.setPreviousVideoBitrate(a);var s={width:i,height:r,bitrate:a,currentTime:t.currentTime};e||this.eventCallback(E.Event.VIDEO_CHANGE,s)}}},t.prototype.sourceChange=function(e,t){this.stateMachine.sourceChange(e,t,this.mediaElement?this.mediaElement.currentTime:void 0)},t.prototype.getSelectedSubtitleFromMediaElement=function(e){if(null!=e.textTracks){for(var t=0,n=e.textTracks;t<n.length;t++){var a=n[t];if(null!=a.mode&&"showing"===a.mode){var i=null!=a.language&&a.language.length>0;return{enabled:i,language:i?a.language:void 0}}}return{enabled:!1}}},t.prototype.checkSeeking=function(){if(!this.mediaElement)throw new Error("No media attached");var e=this.mediaElement.currentTime,t=Date.now(),n=this.previousMediaTime<e?e-this.previousMediaTime:this.previousMediaTime-e,a=(t-this.previousClientTime)/1e3;n>2*a&&(this.isSeeking=!0,this.onPaused(this.previousMediaTime+a)),this.previousClientTime=Date.now()},t.BUFFERING_TIMECHANGED_TIMEOUT=1e3,t}(n(12).InternalAdapter);t.HTML5InternalAdapter=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PageClosed="PAGE_CLOSED",e.PlayerError="PLAYER_ERROR",e.Timeout="TIMEOUT",e.Unknown="UNKNOWN"}(t.VideoStartFailedReason||(t.VideoStartFailedReason={}))},function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.None=0]="None",e[e.Overlapping=1]="Overlapping",e[e.FirstContainedInSecond=2]="FirstContainedInSecond",e[e.SecondContainedInFirst=3]="SecondContainedInFirst"}(a||(a={}));var i=function(){function e(){this.watched=[],this.videoDuration=null}return e.prototype.reset=function(){this.watched=[]},e.prototype.setVideoDuration=function(e){this.videoDuration=1e3*e},e.prototype.addWatched=function(e){if(null==this.videoDuration)throw new Error("no video duration set for completion tracker");this.watched.push(e);var t=this.mergeWatched(this.watched);return(this.getDuration(e)-t)/this.videoDuration},e.prototype.getCompletionPercentage=function(){if(null==this.videoDuration)throw new Error("no video duration set for completion tracker");for(var e=0,t=0,n=this.watched;t<n.length;t++){var a=n[t];e+=this.getDuration(a)}return e/this.videoDuration},e.prototype.mergeWatched=function(e){for(var t=0;t<e.length;t++)for(var n=e[t],i=t+1;i<e.length;i++){var r=e[i],o=0,s=this.getOverlappingType(n,r);if(s===a.Overlapping?(this.mergeAndReplace(n,t,r,i),o=this.getOverlappingTimespan(n,r)):s===a.FirstContainedInSecond?(this.watched.splice(t,1),o=this.getDuration(n)):s===a.SecondContainedInFirst&&(this.watched.splice(i,1),o=this.getDuration(r)),s!==a.None)return o+this.mergeWatched(this.watched)}return 0},e.prototype.getOverlappingType=function(e,t){return this.isMomentInTimespan(e.end,t)&&e.start<t.start||this.isMomentInTimespan(e.start,t)&&e.end>t.end?a.Overlapping:this.isMomentInTimespan(e.start,t)&&this.isMomentInTimespan(e.end,t)?a.FirstContainedInSecond:this.isMomentInTimespan(t.start,e)&&this.isMomentInTimespan(t.end,e)?a.SecondContainedInFirst:a.None},e.prototype.isMomentInTimespan=function(e,t){return e>=t.start&&e<t.end},e.prototype.mergeAndReplace=function(e,t,n,a){var i=e.end>n.end?e.end:n.end,r={start:e.start<n.start?e.start:n.start,end:i};this.watched.splice(t,1,r),this.watched.splice(a,1)},e.prototype.getOverlappingTimespan=function(e,t){return(e.end<t.end?e.end:t.end)-(e.start>=t.start?e.start:t.start)},e.prototype.getDuration=function(e){return Math.abs(e.end-e.start)},e}();t["default"]=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION="v2.17.2"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.post=function(e,t,n,i){var r;void 0===i&&(i=!0);var o=!1;window.XDomainRequest&&(o=!0),r=o?new window.XDomainRequest:new XMLHttpRequest;var s=function(){if(r.readyState==XMLHttpRequest.DONE){if(r.responseText<=0)return;var e=JSON.parse(r.responseText);n(e)}};o?r.onload=s:r.onreadystatechange=s;try{r.open("POST",e,i),o||r.setRequestHeader("Content-Type","text/plain"),r.send(JSON.stringify(t))}catch(e){a.logger.error("Failed to send POST request.",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(e,t,n,a,i){this.event=e,this.from=t,this.to=n,this.timestamp=a,this.eventObject=i}}();t.EventDebugging=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSourceInfoFromBitmovinSourceConfig=function(e,t){if(!e)return{progBitrate:void 0,progUrl:void 0};if("string"==typeof e)return{progBitrate:0,progUrl:e};if(Array.isArray(e)){var n=+t.getPlaybackVideoData().id;return isNaN(n)&&(n=0),{progBitrate:e[n].bitrate||0,progUrl:e[n].url}}return"object"==typeof e?{progBitrate:e.bitrate||0,progUrl:e.url}:{progBitrate:void 0,progUrl:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(50),i=n(51),r=function(){function e(){this.measures=[]}return e.prototype.reset=function(){this.measures=[]},e.prototype.addMeasurement=function(e){if(!(e.httpStatus>=400)){var t=new i.Measure(e),n=a.Converter.bitsToBytes(3e8);t.speed>=n||this.measures.push(t)}},e.prototype.getInfo=function(){return{segmentsDownloadCount:this.measures.length,segmentsDownloadSize:this.measures.map(function(e){return e.size}).reduce(this.add,0),segmentsDownloadTime:Math.ceil(1e3*this.totalTime()),avgDownloadSpeed:this.avgSpeed(),minDownloadSpeed:this.minSpeed(),maxDownloadSpeed:this.maxSpeed(),avgTimeToFirstByte:this.avgTimeToFirstByte()}},e.prototype.add=function(e,t){return e+t},e.prototype.avgSpeed=function(){if(0===this.measures.length)return 0;var e=this.speeds().reduce(function(e,t){return e+t},0),t=this.measures.length;return this.bytePerSecondToBitPerSecond(e/t)},e.prototype.bytePerSecondToBitPerSecond=function(e){return a.Converter.bytesToBits(e)},e.prototype.minSpeed=function(){return 0===this.measures.length?0:this.bytePerSecondToBitPerSecond(Math.min.apply(Math,this.speeds()))},e.prototype.speeds=function(){return this.measures.map(function(e){return e.speed})},e.prototype.maxSpeed=function(){return 0===this.measures.length?0:this.bytePerSecondToBitPerSecond(Math.max.apply(Math,this.speeds()))},e.prototype.totalTime=function(){return 0===this.measures.length?0:this.measures.reduce(function(e,t){return e+t.duration},0)},e.prototype.avgTimeToFirstByte=function(){if(0===this.measures.length)return 0;var e=this.measures.reduce(function(e,t){return e+1e3*t.timeToFirstByte},0)/this.measures.length;return Math.ceil(e)},e}();t.DownloadSpeedMeter=r},function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=i.MIMETypes.MP4,o=i.MIMETypes.WEBM,s=i.MIMETypes.HLS,E=i.MIMETypes.DASH,l=((a={})[r]="progressive",a[o]="progressive",a[s]="hls",a[E]="dash",a);t.getStreamTypeFromMIMEType=function(e){return l[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(23);t.Bitmovin7Adapter=a.Bitmovin7Adapter;var i=n(47);t.Bitmovin8Adapter=i.Bitmovin8Adapter;var r=n(57);t.DashjsAdapter=r.DashjsAdapter;var o=n(60);t.HlsAdapter=o.HlsAdapter;var s=n(63);t.HTMLVideoElementAdapter=s.HTMLVideoElementAdapter;var E=n(65);t.ShakaAdapter=E.ShakaAdapter;var l=n(67);t.VideojsAdapter=l.VideojsAdapter;var u=n(71);t.CdnProviders=u.CdnProvider;var c=n(3);t.Players=c.Player;var d=n(16);t.version=d.VERSION;var A={name:"analytics",module:{Analytics:i.Bitmovin8Adapter},hooks:{setup:function(e,t){var n=t.getConfig();if(!n||!1===n.analytics)return Promise.resolve();var a=new(0,e.Analytics)(t);return Promise.resolve(a)}}};t.PlayerModule=A;var m={HlsAdapter:o.HlsAdapter,Bitmovin8Adapter:i.Bitmovin8Adapter,Bitmovin7Adapter:a.Bitmovin7Adapter,VideojsAdapter:l.VideojsAdapter,ShakaAdapter:E.ShakaAdapter,DashjsAdapter:r.DashjsAdapter,HTMLVideoElementAdapter:s.HTMLVideoElementAdapter};t.adapters=m,t["default"]={PlayerModule:A}},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(1),s=n(6),E=n(43),l=function(e){function t(t,n){var a=e.call(this)||this;return a.augment(t,n),a}return i(t,e),t.prototype.augment=function(e,t){if(this.hasPlayerAlreadyBeenAugmented(e))o.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this player instance");else{this.markPlayerInstanceAsAugmented(e);var n=this,a=e.setup;e.setup=function(){var i=a.apply(e,arguments);if(0===arguments.length)return i;var s=arguments[0].analytics;return s?(n.internalAdapter=new E.Bitmovin7InternalAdapter(e,t),n.analytics=new r.Analytics(s,n.internalAdapter),e.analytics=n.analytics,n.wrapPlayerLoad(e,n.analytics),i):(o.logger.error("Bitmovin Analytics: No analytics config provided!"),i)}}},t.prototype.wrapPlayerLoad=function(e,t){var n=e.load;e.load=function(){if(arguments.length>0){var a=arguments[0].analytics;t.sourceChange(a)}return n.apply(e,arguments)}},t.prototype.hasPlayerAlreadyBeenAugmented=function(e){return e.__analyticsHasBeenSetup},t.prototype.markPlayerInstanceAsAugmented=function(e){e.__analyticsHasBeenSetup=!0},t}(s.Adapter);t.Bitmovin7Adapter=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={avc:['video/mp4; codecs="avc1.42000a"'],vp9:['video/mp4; codecs="vp09.00.50.08"'],av1:['video/mp4; codecs="av01.0.08M.08"'],hevc:['video/mp4; codecs="hev1.1.6.L93.B0"']},i=function(){function e(){}return Object.defineProperty(e,"supportedVideoFormats",{get:function(){var e=this;return Object.getOwnPropertyNames(a).filter(function(t){return a[t].some(function(t){return e.isCodecSupported(t)})})},enumerable:!0,configurable:!0}),e.isCodecSupported=function(e){return MediaSource.isTypeSupported(e)},e}();t.CodecHelper=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.FOREGROUND=1]="FOREGROUND",e[e.BACKGROUND=2]="BACKGROUND"}(t.PAGE_LOAD_TYPE||(t.PAGE_LOAD_TYPE={}))},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(27),o=n(28),s=n(29),E=n(1),l=n(0),u=n(30);!function(e){e.FIRST_QUARTILE="firstQuartile",e.MIDPOINT="midpoint",e.THIRD_QUARTILE="thirdQuartile"}(i||(i={}));var c=function(){function e(e,t){var n=this;this.onBeforeUnLoadEvent=!1,this.adManifestLoadedEvents=[],this.isPlaying=!1,this.adPodPosition=0,this.analytics=e,this.adapter=t,this.adapter.adCallbacks.onAdStarted=function(e){return n.onAdStarted(e)},this.adapter.adCallbacks.onAdFinished=function(e){return n.onAdFinished(e)},this.adapter.adCallbacks.onAdBreakStarted=function(e){return n.onAdBreakStarted(e)},this.adapter.adCallbacks.onAdBreakFinished=function(e){return n.onAdBreakFinished(e)},this.adapter.adCallbacks.onAdClicked=function(e){return n.onAdClicked(e)},this.adapter.adCallbacks.onAdError=function(e){return n.onAdError(e)},this.adapter.adCallbacks.onAdManifestLoaded=function(e){return n.onAdManifestLoaded(e)},this.adapter.adCallbacks.onPlay=function(){return n.onPlay()},this.adapter.adCallbacks.onPause=function(){return n.onPause()},this.adapter.adCallbacks.onBeforeUnload=function(){return n.onBeforeUnload()},this.adapter.adCallbacks.onAdSkipped=function(e){return n.onAdSkipped(e)},this.adapter.adCallbacks.onAdQuartile=function(e){return n.onAdQuartile(e)},this.viewportTracker=new u.ViewportTracker(this.adapter.getContainer(),function(){return n.onIntersectionChanged()},.5)}return e.prototype.onIntersectionChanged=function(){this.activeAdSample&&(this.isContainerInViewport()?this.enterViewportTimestamp=l.getCurrentTimestamp():this.enterViewportTimestamp&&(this.activeAdSample.timeInViewport=(this.activeAdSample.timeInViewport||0)+l.getCurrentTimestamp()-this.enterViewportTimestamp))},e.prototype.isContainerInViewport=function(){return!this.viewportTracker||this.viewportTracker.isInViewport()},e.prototype.onPlay=function(){if(this.adapter&&this.adapter.isLinearAdActive()&&this.activeAdSample){var e=l.getCurrentTimestamp();this.beginPlayingTimestamp=e,this.enterViewportTimestamp=e,this.isPlaying=!0}},e.prototype.onPause=function(){this.adapter&&this.adapter.isLinearAdActive()&&this.activeAdSample&&(this.updatePlayingTime(this.activeAdSample),this.isPlaying=!1)},e.prototype.onAdManifestLoaded=function(e){var t=e.adConfig;t&&t.tag&&"vmap"===t.tag.type?this.sendAnalyticsRequest(new o.AdBreakSample(e.adConfig,e)):e.adBreak&&this.adManifestLoadedEvents.push(e)},e.prototype.onAdBreakStarted=function(e){this.adPodPosition=0,this.activeAdBreakSample=new o.AdBreakSample(e.adBreak,this.getAdManifestLoadedEvent(e.adBreak)),this.adStartupTimestamp=l.getCurrentTimestamp()},e.prototype.onAdBreakFinished=function(e){this.resetActiveAd(),this.activeAdBreakSample=void 0},e.prototype.onAdStarted=function(e){e.ad.isLinear&&(this.resetActiveAd(),this.activeAdSample=new s.AdSample(e.ad),this.currentTime=void 0,this.activeAdSample.adStartupTime=this.adStartupTimestamp?l.getCurrentTimestamp()-this.adStartupTimestamp:void 0,this.startAd(this.activeAdSample))},e.prototype.onAdFinished=function(e){if(this.activeAdBreakSample&&this.activeAdSample){var t=a({},this.activeAdSample);t.completed=1,this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,t,t.adDuration)}},e.prototype.onAdSkipped=function(e){if(this.activeAdBreakSample&&this.activeAdSample){var t=a({},this.activeAdSample);t.skipped=1,t.skipPosition=this.currentTime,t.skipPercentage=l.calculatePercentage(this.activeAdSample.skipPosition,this.activeAdSample.adDuration),this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,t,t.skipPosition)}},e.prototype.onAdError=function(e){var t,n,a=this,i=e.data||{adBreak:void 0,adConfig:void 0,code:void 0,message:void 0},r=i.adConfig,s=i.adBreak,E=i.code,u=i.message,c=new o.AdBreakSample(s||r,s?this.getAdManifestLoadedEvent(s):void 0);c.errorCode=E||e.code,c.errorData=JSON.stringify(e.data),c.errorMessage=u||e.name,this.activeAdSample&&s&&s.ads&&s.ads.includes(function(e){return e.id===a.activeAdSample.adId})&&(n=(t=this.activeAdSample).errorPosition=this.currentTime,t.errorPercentage=l.calculatePercentage(t.errorPosition,t.adDuration)),this.completeAd(c,t,n)},e.prototype.onAdLinearityChanged=function(e){},e.prototype.onAdClicked=function(e){this.activeAdSample&&(this.activeAdSample.adClickthroughUrl=e.clickThroughUrl,this.activeAdSample.clicked=1,this.activeAdSample.clickPosition=this.currentTime,this.activeAdSample.clickPercentage=l.calculatePercentage(this.activeAdSample.clickPosition,this.activeAdSample.adDuration))},e.prototype.onAdQuartile=function(e){this.activeAdSample&&(e.quartile===i.FIRST_QUARTILE?this.activeAdSample.quartile1=1:e.quartile===i.MIDPOINT?this.activeAdSample.midpoint=1:e.quartile===i.THIRD_QUARTILE&&(this.activeAdSample.quartile3=1))},e.prototype.onBeforeUnload=function(){if(!this.onBeforeUnLoadEvent&&(this.onBeforeUnLoadEvent=!0,this.activeAdSample&&this.activeAdBreakSample)){var e=a({},this.activeAdSample);e.closed=1,e.closePosition=this.currentTime,e.closePercentage=l.calculatePercentage(e.closePosition,e.adDuration),this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,e,e.closePosition)}},e.prototype.createNewAdAnalyticsSample=function(e){var t=this.adapter.getAdModuleInfo();return a({},new r.AdAnalyticsSample(e),{analyticsVersion:"v2.17.2",adModule:t.name,adModuleVersion:t.version,playerStartupTime:this.analytics.playerStartupTime,pageLoadTime:this.analytics.pageLoadTime,autoplay:this.analytics.autoplay,pageLoadType:l.getPageLoadType()})},e.prototype.getAdManifestLoadedEvent=function(e){if(e)return this.adManifestLoadedEvents.find(function(t){return t.adBreak&&t.adBreak.id===e.id})},e.prototype.sendAnalyticsRequest=function(e,t){var n=a({},this.createNewAdAnalyticsSample(this.analytics.sample),e,t||new s.AdSample);n.time=l.getCurrentTimestamp(),n.adImpressionId=l.generateUUID(),n.percentageInViewport=l.calculatePercentage(n.timeInViewport,n.timePlayed),this.analytics.backend.sendAdRequest(n)},e.prototype.updatePlayingTime=function(e){var t=l.getCurrentTimestamp();this.beginPlayingTimestamp&&this.isPlaying&&(void 0!==e.timePlayed&&(e.timePlayed+=t-this.beginPlayingTimestamp),this.isContainerInViewport()&&this.enterViewportTimestamp&&void 0!==e.timeInViewport&&(e.timeInViewport+=t-this.enterViewportTimestamp))},e.prototype.startAd=function(t){var n=this;t.started=1,t.timePlayed=0,t.timeInViewport=0,t.adPodPosition=this.adPodPosition;var a=l.getCurrentTimestamp();this.beginPlayingTimestamp=a,this.enterViewportTimestamp=this.isContainerInViewport()?a:void 0,this.isPlaying=!0,this.currentTime=0,this.adPodPosition++,this.currentTimeInterval=window.setInterval(function(){try{t&&void 0!==t.adDuration&&t.adDuration>0&&n.adapter.isLinearAdActive()&&(n.currentTime=l.calculateTime(Math.max(n.adapter.currentTime(),0)))}catch(e){E.logger.log("AdStarted monitoring interval failed and got cleared",e),n.resetActiveAd()}},e.TIMEOUT_CURRENT_TIME_INTERVAL)},e.prototype.completeAd=function(e,t,n){void 0===t&&(t=new s.AdSample),t.exitPosition=n,t.playPercentage=l.calculatePercentage(t.exitPosition,t.adDuration),this.adStartupTimestamp=l.getCurrentTimestamp(),this.updatePlayingTime(t),this.isPlaying=!1,this.sendAnalyticsRequest(e,t)},e.prototype.resetActiveAd=function(){window.clearInterval(this.currentTimeInterval),this.currentTime=void 0,this.activeAdSample=void 0},e.MODULE_NAME="ads",e.TIMEOUT_CURRENT_TIME_INTERVAL=100,e}();t.AdAnalytics=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(e){this.platform="web",e&&(this.videoImpressionId=e.impressionId,this.userAgent=e.userAgent,this.language=e.language,this.cdnProvider=e.cdnProvider,this.customData1=e.customData1,this.customData2=e.customData2,this.customData3=e.customData3,this.customData4=e.customData4,this.customData5=e.customData5,this.customData6=e.customData6,this.customData7=e.customData7,this.customUserId=e.customUserId,this.domain=e.domain,this.experimentName=e.experimentName,this.key=e.key,this.path=e.path,this.player=e.player,this.playerKey=e.playerKey,this.playerTech=e.playerTech,this.screenHeight=e.screenHeight,this.screenWidth=e.screenWidth,this.version=e.version,this.size=e.size,this.userId=e.userId,this.videoId=e.videoId,this.videoTitle=e.videoTitle,this.videoWindowHeight=e.videoWindowHeight,this.videoWindowWidth=e.videoWindowWidth,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec)}}();t.AdAnalyticsSample=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(){return function(e,t){this.adFallbackIndex=0,t&&(this.manifestDownloadTime=a.calculateTime(t.downloadTiming.downloadTime)),e&&(this.adReplaceContentDuration=a.calculateTimeWithUndefined(e.replaceContentDuration),this.adFallbackIndex=(e.currentFallbackIndex||-1)+1);var n=e;n&&("pre"===n.position||"post"===n.position?this.adPosition=n.position:(this.adPosition="mid",this.adOffset=n.position),this.adPreloadOffset=a.calculateTimeWithUndefined(n.preloadOffset));var i=e;if(i){this.adIsPersistent=i.persistent;var r=i.tag;if(this.adFallbackIndex>0&&i.fallbackTags&&i.fallbackTags.length>=this.adFallbackIndex&&(r=i.fallbackTags[this.adFallbackIndex-1]),r&&(this.adTagType=r.type,this.adTagUrl=r.url),this.adTagUrl){var o=a.getHostnameAndPathFromUrl(this.adTagUrl);this.adTagServer=o.hostname,this.adTagPath=o.path}}var s=e;s&&(this.adScheduleTime=a.calculateTimeWithUndefined(s.scheduleTime),this.adIdPlayer=s.id)}}();t.AdBreakSample=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(){function e(t){if(this.clicked=0,this.closed=0,this.completed=0,this.midpoint=0,this.quartile1=0,this.quartile3=0,this.skipped=0,this.started=0,t){this.adClickthroughUrl=t.clickThroughUrl,this.adId=t.id,this.mediaUrl=t.mediaFileUrl;var n=a.getHostnameAndPathFromUrl(this.mediaUrl||"");this.mediaPath=n.path,this.mediaServer=n.hostname,this.isLinear=t.isLinear,this.adPlaybackHeight=t.height,this.adPlaybackWidth=t.width,t.data&&(this.videoBitrate=void 0===t.data.bitrate?void 0:1e3*t.data.bitrate,this.streamFormat=t.data.mimeType);var i=t.data;i&&(i.adSystem&&(this.adSystem=i.adSystem.name),i.advertiser&&(this.advertiserName=i.advertiser.name),this.apiFramework=i.apiFramework,i.creative&&(this.creativeAdId=i.creative.adId,this.creativeId=i.creative.id,i.creative.universalAdId&&(this.universalAdIdRegistry=i.creative.universalAdId.idRegistry,this.universalAdIdValue=i.creative.universalAdId.value)),this.adDescription=i.adDescription,this.minSuggestedDuration=a.calculateTimeWithUndefined(i.minSuggestedDuration),i.survey&&(this.surveyUrl=i.survey.uri),this.adTitle=i.adTitle,this.wrapperAdsCount=i.wrapperAdIds?i.wrapperAdIds.length:0)}var r=t;r&&(this.adSkippableAfter=e.parseSkipAfter(r.skippableAfter),this.adSkippable=r.skippable||(void 0===this.adSkippableAfter?void 0:this.adSkippableAfter>=0),this.adDuration=a.calculateTime(r.duration))}return e.parseSkipAfter=function(e){if(void 0!==e)return-1===e?e:a.calculateTime(e)},e}();t.AdSample=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n(0),r=function(){function e(e,t,n){var r=this;void 0===n&&(n=1),this.inViewport=void 0,this.threshold=n,this.onIntersectionChanged=t,this.element=e;try{var o={root:null,rootMargin:"0px",threshold:n};this.observer=new IntersectionObserver(function(e,t){return r.handleIntersect(e,t)},o),this.observer.observe(e)}catch(e){a.logger.log("Couldn't create instance of IntersectionObserver. timeInViewport will always be reported as 100%.")}this.hidden=i.getHiddenProp(),this.hidden&&(this.visibilityChange=this.hidden.replace("hidden","")+"visibilitychange",document.addEventListener(this.visibilityChange,this.handleVisibilityChange=this.handleVisibilityChange.bind(this),!1))}return e.prototype.isHidden=function(){return this.hidden&&document[this.hidden]},e.prototype.isInViewport=function(){return!this.isHidden()&&(null==this.inViewport||this.inViewport)},e.prototype.dispose=function(){this.observer&&(this.observer.unobserve(this.element),this.observer.disconnect()),this.visibilityChange&&document.removeEventListener(this.visibilityChange,this.handleVisibilityChange,!1)},e.prototype.handleVisibilityChange=function(){this.onIntersectionChanged()},e.prototype.handleIntersect=function(e,t){
var n=this;e.forEach(function(e){e.target===n.element&&(n.inViewport=!(e.intersectionRatio<n.threshold))}),this.onIntersectionChanged()},e}();t.ViewportTracker=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(32),i=n(4),r=n(33),o=n(34),s=n(35),E=n(41),l=function(){function e(){}return e.prototype.createBackend=function(e,t,n){var a=this.createInnerBackend(e,t,n);return e.debug?new r.DebuggingBackend(e,a):a},e.prototype.createInnerBackend=function(e,t,n){if(void 0===this.backend){var r=e.config&&e.config.backendUrl||i.ANALYTICS_BACKEND_BASE_URL,l=new s.LicenseCheckingBackend(t,a.LicenseCall,r,n);this.backend=new o.DisableBackend(l)}return this.backend.enabled=void 0===e.config||!1!==e.config.enabled,new E.SequenceNumberBackend(this.backend)},e}();t.BackendFactory=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),i=n(0);t.LicenseCall=function(e,t,n,r){var o=i.joinUrls(r,"/licensing"),s={analyticsVersion:n,domain:t,key:e};return new Promise(function(e){a.post(o,s,function(t){e(t)})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=function(){function e(e,t){this.underlying=t,e.debug&&e.debug.fields&&(this.debugFields=e.debug.fields)}return e.prototype.sendRequest=function(e){this.printFields(e),this.underlying.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this.printFields(e),this.underlying.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.printFields(e),this.underlying.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this.underlying.sendAdRequest(e)},e.prototype.printFields=function(e){if(this.debugFields&&this.debugFields.length){var t={};this.debugFields.forEach(function(n){return t[n]=e[n]}),a.logger.logTable([t])}},e}();t.DebuggingBackend=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.innerBackend=e,this._enabled=!0,this.startupInformationSent=!1}return Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!0,configurable:!0}),e.prototype.sendRequest=function(e){this.decorateSampleIfEnabled(e)&&this.innerBackend.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this._enabled&&this.innerBackend.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.decorateSampleIfEnabled(e)&&this.innerBackend.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this._enabled&&this.innerBackend.sendAdRequest(e)},e.prototype.decorateSampleIfEnabled=function(e){return!this.startupInformationSent&&e.playerStartupTime&&e.playerStartupTime>0&&(this.startupInformation={playerStartupTime:e.playerStartupTime,pageLoadTime:e.pageLoadTime},!0===this._enabled)?(this.startupInformationSent=!0,!0):!!this._enabled&&(!this.startupInformationSent&&this.startupInformation&&e.videoStartupTime&&e.videoStartupTime>0&&(this.copyPropertiesToSample(e,this.startupInformation),e.startupTime=(e.playerStartupTime||0)+e.videoStartupTime,this.startupInformationSent=!0),!0)},e.prototype.copyPropertiesToSample=function(e,t){Object.getOwnPropertyNames(t).forEach(function(n){return e[n]=t[n]})},e}();t.DisableBackend=a},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),r=n(1),o=n(4),s=n(37),E=n(38),l=n(39),u=function(){function e(e,t,n,i){var r=this;this.licenseCall=t,this.backendBaseUrl=n,this.adapter=i,this.licenseKeyReceived=function(e){clearTimeout(r.licenseLazyLoadingTimeoutHandle),r.unsubscribeFromAdapter(),r.info.key=e.licenseKey,r.promise=r.performLicenseCheck()},this.licenseCallFailed=function(){clearTimeout(r.licenseLazyLoadingTimeoutHandle),r.unsubscribeFromAdapter(),r.backend=new s.NoOpBackend},this.licenseLazyLoadingTimeout=function(){r.unsubscribeFromAdapter(),r.backend=new s.NoOpBackend},this.info=a({},e),this.backend=new E.QueueBackend,this.licenseCall=t,void 0!==e.key&&""!==e.key?this.promise=this.performLicenseCheck():!0===i.supportsDeferredLicenseLoading?(i.onLicenseKeyReceived.subscribe(this.licenseKeyReceived),i.onLicenseCallFailed.subscribe(this.licenseCallFailed),this.licenseLazyLoadingTimeoutHandle=window.setTimeout(this.licenseLazyLoadingTimeout,o.ANALYTICS_LICENSECALL_TIMEOUT)):this.backend=new s.NoOpBackend}return e.prototype.performLicenseCheck=function(){var e=this,t=this.info,n=t.key,a=t.domain,o=t.version;if(!n||""===n){var E={status:i.LicensingResult.Denied,message:"No license key provided"};return this.backend=new s.NoOpBackend,Promise.resolve(E)}return this.licenseCall(n,a,o,this.backendBaseUrl).then(function(t){if(t.status!==i.LicensingResult.Granted)throw new Error(t.message);var a=new l.RemoteBackend((!0),e.backendBaseUrl,n);return e.backend.flushTo(a),e.backend=a,t})["catch"](function(t){return"Ignoring Impression due to DNT Header being set"===t.message?r.logger.error("License Check for Bitmovin Analytics failed because of",t):r.logger.errorMessageToUser("License Check for Bitmovin Analytics failed because of",t),e.backend=new s.NoOpBackend,{status:i.LicensingResult.Denied,message:t.message}})},e.prototype.sendRequest=function(e){this.backend.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this.backend.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.backend.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this.backend.sendAdRequest(e)},e.prototype.unsubscribeFromAdapter=function(){this.adapter.onLicenseKeyReceived.unsubscribe(this.licenseKeyReceived),this.adapter.onLicenseCallFailed.unsubscribe(this.licenseCallFailed)},e}();t.LicenseCheckingBackend=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Granted="granted",e.Denied="denied",e.Skip="skip"}(t.LicensingResult||(t.LicensingResult={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){}return e.prototype.sendRequest=function(e){},e.prototype.sendUnloadRequest=function(e){},e.prototype.sendRequestSynchronous=function(e){},e.prototype.sendAdRequest=function(e){},e}();t.NoOpBackend=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.queue=[],this.unloadQueue=[],this.syncQueue=[],this.adQueue=[]}return e.prototype.sendRequest=function(e){this.queue.push(e)},e.prototype.sendUnloadRequest=function(e){this.unloadQueue.push(e)},e.prototype.sendRequestSynchronous=function(e){this.syncQueue.push(e)},e.prototype.sendAdRequest=function(e){this.adQueue.push(e)},e.prototype.flushTo=function(e){this.queue.forEach(function(t){e.sendRequest(t)}),this.unloadQueue.forEach(function(t){e.sendUnloadRequest(t)}),this.syncQueue.forEach(function(t){e.sendRequestSynchronous(t)}),this.adQueue.forEach(function(t){e.sendAdRequest(t)})},e}();t.QueueBackend=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),i=n(0),r=function(){function e(e,t,n){this.licenseKey=n,this.hasAdModule=e,this.analyticsCall=new a.AnalyticsCall(t)}return e.prototype.sendRequest=function(e){e.key=this.licenseKey,this.analyticsCall.sendRequest(e,i.noOp)},e.prototype.sendUnloadRequest=function(e){e.key=this.licenseKey,this.analyticsCall.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){e.key=this.licenseKey,this.analyticsCall.sendRequestSynchronous(e,i.noOp)},e.prototype.sendAdRequest=function(e){e.key=this.licenseKey,this.hasAdModule&&this.analyticsCall.sendAdRequest(e)},e}();t.RemoteBackend=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(17),r=n(0),o=function(){function e(e){this.analyticsServerUrl=r.joinUrls(e,"analytics"),this.adAnalyticsServerUrl=r.joinUrls(e,"analytics/a")}return e.prototype.sendRequest=function(e,t){i.post(this.analyticsServerUrl,e,t)},e.prototype.sendUnloadRequest=function(e){var t=this;this.trySendBeacon(function(e){return t.sendRequestSynchronous(e,a.noOp)},this.getAnalyticsServerUrl(),e)},e.prototype.trySendBeacon=function(e,t,n){void 0===navigator.sendBeacon?e(n):navigator.sendBeacon(t,JSON.stringify(n))||e(n)},e.prototype.sendRequestSynchronous=function(e,t){i.post(this.analyticsServerUrl,e,t,!1)},e.prototype.sendAdRequest=function(e){var t=this;this.trySendBeacon(function(e){return i.post(t.getAdAnalyticsServerUrl(),e,a.noOp)},this.getAdAnalyticsServerUrl(),e)},e.prototype.getAnalyticsServerUrl=function(){return this.analyticsServerUrl},e.prototype.getAdAnalyticsServerUrl=function(){return this.adAnalyticsServerUrl},e}();t.AnalyticsCall=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.sequenceNumber=0,this.underlying=e}return e.prototype.sendRequest=function(e){this.updateSampleBeforeSending(e),this.underlying.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this.updateSampleBeforeSending(e),this.underlying.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.updateSampleBeforeSending(e),this.underlying.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this.underlying.sendAdRequest(e)},e.prototype.updateSampleBeforeSending=function(e){e.sequenceNumber=this.sequenceNumber++},e}();t.SequenceNumberBackend=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);t.BITMOVIN_ANALYTICS_UUID_COOKIE_NAME="bitmovin_analytics_uuid";var i=function(){function e(e){var t=e.config;this.cookiesEnabled=null==t||!1!==t.cookiesEnabled,null!=t&&null!=t.cookiesDomain?this.cookiesDomain=t.cookiesDomain:this.cookiesDomain=null,this.userId=this.setupUserId()}return e.prototype.setupUserId=function(){var e=a.getCookie(t.BITMOVIN_ANALYTICS_UUID_COOKIE_NAME);return a.isNullOrEmptyString(e)&&(e=this.createAndSetNewUserId()),e},e.prototype.createAndSetNewUserId=function(){var e=a.generateUUID();return this.writeCookie(e),e},e.prototype.writeCookie=function(e){if(this.cookiesEnabled){var n=t.BITMOVIN_ANALYTICS_UUID_COOKIE_NAME+"="+e+'; path=/; expires="Mon, 31 Dec 2029 23:00:00 GMT"; max-age=315400000';null!=this.cookiesDomain&&(n+="; domain="+this.cookiesDomain),document.cookie=n}},e}();t.SessionPersistenceHandler=i},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(44),s=n(2),E=n(3),l=n(8),u=n(19),c=function(e){function t(t,n){var a=e.call(this,n)||this;return a.player=t,a.onBeforeUnLoadEvent=!1,a.getPlayerVersion=function(){return a.player.version},a.getPlayerName=function(){return E.Player.BITMOVIN},a.getPlayerTech=function(){return a.player.getPlayerType()},a.getDrmPerformanceInfo=function(){return a.drmPerformanceInfo},a.stateMachine=new o.Bitmovin7AnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a}return i(t,e),t.prototype.initialize=function(){this.register()},t.prototype.getAutoPlay=function(){return this.player.getConfig().playback&&this.player.getConfig().playback.autoplay||!1},t.prototype.getCurrentPlaybackInfo=function(){var t=this,n={},a=this.player.getConfig().source;if(a){var i=u.getSourceInfoFromBitmovinSourceConfig(a.progressive,this.player);n.videoTitle=a.title,n.mpdUrl=a.dash,n.m3u8Url=a.hls,n.progUrl=i.progUrl,n.progBitrate=i.progBitrate}var o=this.player.getSubtitle()||{},s=r({},e.prototype.getCommonPlaybackInfo.call(this),{size:this.player.isFullscreen()?l.PlayerSize.Fullscreen:l.PlayerSize.Window,playerTech:this.getPlayerTech(),isLive:this.player.isLive(),videoDuration:this.player.getDuration(),streamFormat:this.player.getStreamType(),videoWindowWidth:this.player.getFigure().offsetWidth,videoWindowHeight:this.player.getFigure().offsetHeight,isMuted:this.player.isMuted(),isCasting:this.player.isCasting(),audioLanguage:null!=this.player.getAudio()?this.player.getAudio().lang:null,subtitleEnabled:null!=o.id,subtitleLanguage:o.lang,droppedFrames:t.player.isReady()?t.player.getDroppedFrames():0},n),E=this.player.getPlaybackVideoData();E&&(s.videoBitrate=E.bitrate,s.videoPlaybackHeight=E.height,s.videoPlaybackWidth=E.width),"progressive"===s.streamFormat&&(s.videoBitrate=n.progBitrate);var c=this.player.getPlaybackAudioData();return c&&(s.audioBitrate=c.bitrate),s},t.prototype.register=function(){var e=this;this.player.addEventHandler(this.player.EVENT.ON_SOURCE_UNLOADED,function(t){e.eventCallback(s.Event.SOURCE_UNLOADED,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_SOURCE_LOADED,function(t){e.eventCallback(s.Event.SOURCE_LOADED,{})}),this.player.addEventHandler(this.player.EVENT.ON_READY,function(){e.eventCallback(s.Event.READY,{})}),this.player.addEventHandler(this.player.EVENT.ON_CAST_STARTED,function(t){e.eventCallback(s.Event.START_CAST,t)}),this.player.addEventHandler(this.player.EVENT.ON_CAST_STOPPED,function(){e.eventCallback(s.Event.END_CAST,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_PLAY,function(){e.eventCallback(s.Event.PLAY,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_PAUSED,function(){e.eventCallback(s.Event.PAUSE,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_TIME_CHANGED,function(){e.eventCallback(s.Event.TIMECHANGED,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_SEEK,function(){e.eventCallback(s.Event.SEEK,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_SEEKED,function(){e.eventCallback(s.Event.SEEKED,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_STALL_STARTED,function(){e.eventCallback(s.Event.START_BUFFERING,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_STALL_ENDED,function(){e.eventCallback(s.Event.END_BUFFERING,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_AUDIO_PLAYBACK_QUALITY_CHANGED,function(){var t=e.player.getPlaybackAudioData();e.shouldAllowAudioQualityChange(t.bitrate)&&(e.setPreviousAudioBitrate(t.bitrate),e.eventCallback(s.Event.AUDIO_CHANGE,{bitrate:t.bitrate,currentTime:e.player.getCurrentTime()}))}),this.player.addEventHandler(this.player.EVENT.ON_VIDEO_PLAYBACK_QUALITY_CHANGED,function(){var t=e.player.getPlaybackVideoData();e.shouldAllowVideoQualityChange(t.bitrate)&&(e.setPreviousVideoBitrate(t.bitrate),e.eventCallback(s.Event.VIDEO_CHANGE,{width:t.width,height:t.height,bitrate:t.bitrate,currentTime:e.player.getCurrentTime()}))}),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER,function(){e.eventCallback(s.Event.START_FULLSCREEN,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT,function(){e.eventCallback(s.Event.END_FULLSCREEN,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_AD_STARTED,function(){e.eventCallback(s.Event.START_AD,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_AD_FINISHED,function(){e.eventCallback(s.Event.END_AD,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_MUTED,function(){e.eventCallback(s.Event.MUTE,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_UNMUTED,function(){e.eventCallback(s.Event.UN_MUTE,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_ERROR,function(t){e.eventCallback(s.Event.ERROR,{code:t.code,message:t.message,currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_PLAYBACK_FINISHED,function(){e.eventCallback(s.Event.PLAYBACK_FINISHED,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_DOWNLOAD_FINISHED,function(t){0===t.downloadType.indexOf("drm/license/")&&(e.drmPerformanceInfo={drmType:t.downloadType.replace("drm/license/",""),drmLoadTime:1e3*t.downloadTime})}),this.player.addEventHandler(this.player.EVENT.ON_AUDIO_CHANGED,function(t){e.eventCallback(s.Event.AUDIOTRACK_CHANGED,{currentTime:e.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_SUBTITLE_CHANGED,function(t){e.eventCallback(s.Event.SUBTITLE_CHANGE,{currentTime:e.player.getCurrentTime()})});var t=function(){e.onBeforeUnLoadEvent||(e.onBeforeUnLoadEvent=!0,e.eventCallback(s.Event.UNLOAD,{currentTime:e.player.getCurrentTime()}))};window.addEventListener("beforeunload",t),window.addEventListener("unload",t)},t.prototype.sourceChange=function(e,t){this.stateMachine.sourceChange(e,t,this.player.getCurrentTime())},t}(n(12).InternalAdapter);t.Bitmovin7InternalAdapter=c},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(10),s=n(2),E=n(18),l=n(1),u=n(11);!function(e){e.SETUP="SETUP",e.STARTUP="STARTUP",e.READY="READY",e.PLAYING="PLAYING",e.REBUFFERING="REBUFFERING",e.PAUSE="PAUSE",e.QUALITYCHANGE="QUALITYCHANGE",e.PAUSED_SEEKING="PAUSED_SEEKING",e.PLAY_SEEKING="PLAY_SEEKING",e.END_PLAY_SEEKING="END_PLAY_SEEKING",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.END="END",e.ERROR="ERROR",e.AD="AD",e.MUTING_READY="MUTING_READY",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_PAUSE="MUTING_PAUSE",e.CASTING="CASTING",e.SOURCE_CHANGING="SOURCE_CHANGING",e.SUBTITLE_CHANGING="SUBTITLE_CHANGING",e.AUDIOTRACK_CHANGING="AUDIOTRACK_CHANGING"}(r||(r={}));var c=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.debuggingStates=[],a.enabledDebugging=!1,a.sourceChange=function(e,t,n){a.callEvent(s.Event.MANUAL_SOURCE_CHANGE,{config:e,currentTime:n},t)},a.pausedTimestamp=null,a.seekTimestamp=0,a.seekedTimestamp=0,a.seekedTimeout=0,a}return i(t,e),t.prototype.getAllStates=function(){return Object.keys(r).map(function(e){return r[e]}).concat(["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])},t.prototype.createStateMachine=function(e){var n=this;return o.create({initial:r.SETUP,error:function(e,t,n,a,i,r){l.logger.error("Error in statemachine: "+r)},events:[{name:s.Event.READY,from:[r.SETUP,r.ERROR],to:r.READY},{name:s.Event.PLAY,from:r.READY,to:r.STARTUP},{name:s.Event.START_BUFFERING,from:r.STARTUP,to:r.STARTUP},{name:s.Event.END_BUFFERING,from:r.STARTUP,to:r.STARTUP},{name:s.Event.VIDEO_CHANGE,from:r.STARTUP,to:r.STARTUP},{name:s.Event.AUDIO_CHANGE,from:r.STARTUP,to:r.STARTUP},{name:s.Event.TIMECHANGED,from:r.STARTUP,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.PLAYING,to:r.PLAYING},{name:s.Event.END_BUFFERING,from:r.PLAYING,to:r.PLAYING},{name:s.Event.START_BUFFERING,from:r.PLAYING,to:r.REBUFFERING},{name:s.Event.END_BUFFERING,from:r.REBUFFERING,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.PAUSE,from:r.PLAYING,to:r.PAUSE},{name:s.Event.PAUSE,from:r.REBUFFERING,to:r.PAUSE},{name:s.Event.PLAY,from:r.PAUSE,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PLAYING,to:r.QUALITYCHANGE},{name:s.Event.AUDIO_CHANGE,from:r.PLAYING,to:r.QUALITYCHANGE},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE,to:r.QUALITYCHANGE},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE,to:r.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:r.QUALITYCHANGE,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.AUDIO_CHANGE,from:r.PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE_PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE_PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:r.QUALITYCHANGE_PAUSE,to:r.PAUSE},{name:s.Event.SEEK,from:r.PAUSE,to:r.PAUSED_SEEKING},{name:s.Event.SEEK,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.AUDIO_CHANGE,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.VIDEO_CHANGE,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.START_BUFFERING,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.END_BUFFERING,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.SEEKED,from:r.PAUSED_SEEKING,to:r.PAUSE},{name:s.Event.PLAY,from:r.PAUSED_SEEKING,to:r.PLAYING},{name:s.Event.PAUSE,from:r.PAUSED_SEEKING,to:r.PAUSE},{name:"PLAY_SEEK",from:r.PAUSE,to:r.PLAY_SEEKING},{name:"PLAY_SEEK",from:r.PAUSED_SEEKING,to:r.PLAY_SEEKING},{name:"PLAY_SEEK",from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.SEEK,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.AUDIO_CHANGE,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.VIDEO_CHANGE,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.START_BUFFERING,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.END_BUFFERING,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.SEEKED,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.PLAY,from:r.PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.START_BUFFERING,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.END_BUFFERING,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.SEEKED,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.TIMECHANGED,from:r.END_PLAY_SEEKING,to:r.PLAYING},{name:s.Event.END,from:r.PLAY_SEEKING,to:r.END},{name:s.Event.END,from:r.PAUSED_SEEKING,to:r.END},{name:s.Event.END,from:r.PLAYING,to:r.END},{name:s.Event.END,from:r.PAUSE,to:r.END},{name:s.Event.SEEK,from:r.END,to:r.END},{name:s.Event.SEEKED,from:r.END,to:r.END},{name:s.Event.TIMECHANGED,from:r.END,to:r.END},{name:s.Event.END_BUFFERING,from:r.END,to:r.END},{name:s.Event.START_BUFFERING,from:r.END,to:r.END},{name:s.Event.END,from:r.END,to:r.END},{name:s.Event.PLAY,from:r.END,to:r.STARTUP},{name:s.Event.ERROR,from:this.getAllStates(),to:r.ERROR},{name:s.Event.SEEK,from:r.END_PLAY_SEEKING,to:r.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:r.END_PLAY_SEEKING,to:r.PLAYING},{name:s.Event.UNLOAD,from:this.getAllStates(),to:r.END},{name:s.Event.START_AD,from:r.PLAYING,to:r.AD},{name:s.Event.END_AD,from:r.AD,to:r.PLAYING},{name:s.Event.MUTE,from:r.READY,to:r.MUTING_READY},{name:s.Event.UN_MUTE,from:r.READY,to:r.MUTING_READY},{name:"FINISH_MUTING",from:r.MUTING_READY,to:r.READY},{name:s.Event.MUTE,from:r.PLAYING,to:r.MUTING_PLAY},{name:s.Event.UN_MUTE,from:r.PLAYING,to:r.MUTING_PLAY},{name:"FINISH_MUTING",from:r.MUTING_PLAY,to:r.PLAYING},{name:s.Event.MUTE,from:r.PAUSE,to:r.MUTING_PAUSE},{name:s.Event.UN_MUTE,from:r.PAUSE,to:r.MUTING_PAUSE},{name:"FINISH_MUTING",from:r.MUTING_PAUSE,to:r.PAUSE},{name:s.Event.START_CAST,from:[r.READY,r.PAUSE],to:r.CASTING},{name:s.Event.PAUSE,from:r.CASTING,to:r.CASTING},{name:s.Event.PLAY,from:r.CASTING,to:r.CASTING},{name:s.Event.TIMECHANGED,from:r.CASTING,to:r.CASTING},{name:s.Event.MUTE,from:r.CASTING,to:r.CASTING},{name:s.Event.SEEK,from:r.CASTING,to:r.CASTING},{name:s.Event.SEEKED,from:r.CASTING,to:r.CASTING},{name:s.Event.END_CAST,from:r.CASTING,to:r.READY},{name:s.Event.SEEK,from:r.READY,to:r.READY},{name:s.Event.SEEKED,from:r.READY,to:r.READY},{name:s.Event.SEEKED,from:r.STARTUP,to:r.STARTUP},{name:s.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStates(),to:r.SOURCE_CHANGING},{name:s.Event.SOURCE_UNLOADED,from:this.getAllStates(),to:r.SOURCE_CHANGING},{name:s.Event.READY,from:r.SOURCE_CHANGING,to:r.READY},{name:s.Event.VIDEO_CHANGE,from:r.REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.AUDIO_CHANGE,from:r.REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE_REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE_REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:r.QUALITYCHANGE_REBUFFERING,to:r.REBUFFERING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.PLAYING,to:r.AUDIOTRACK_CHANGING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.PAUSE,to:r.PAUSE},{name:s.Event.AUDIOTRACK_CHANGED,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.AUDIOTRACK_CHANGING,to:r.AUDIOTRACK_CHANGING},{name:s.Event.TIMECHANGED,from:r.AUDIOTRACK_CHANGING,to:r.PLAYING},{name:s.Event.SUBTITLE_CHANGE,from:r.PLAYING,to:r.SUBTITLE_CHANGING},{name:s.Event.SUBTITLE_CHANGE,from:r.PAUSE,to:r.PAUSE},{name:s.Event.SUBTITLE_CHANGE,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.SUBTITLE_CHANGE,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.SUBTITLE_CHANGE,from:r.SUBTITLE_CHANGING,to:r.SUBTITLE_CHANGING},{name:s.Event.TIMECHANGED,from:r.SUBTITLE_CHANGING,to:r.PLAYING}],callbacks:{onpause:function(e,t,a,i){t===r.PLAYING&&(n.pausedTimestamp=i)},onbeforeevent:function(e,a,i,o,E){return e===s.Event.SEEK&&a===r.PAUSE&&(n.seekTimestamp=o,o-n.pausedTimestamp<t.PAUSE_SEEK_DELAY)?(n.stateMachine.PLAY_SEEK(o),!1):(e===s.Event.SEEK&&window.clearTimeout(n.seekedTimeout),e===s.Event.SEEKED&&a===r.PAUSED_SEEKING?(n.seekedTimestamp=o,n.seekedTimeout=window.setTimeout(function(){n.stateMachine.pause(o,E)},t.SEEKED_PAUSE_DELAY),!1):(a!==r.REBUFFERING||i!==r.QUALITYCHANGE_REBUFFERING)&&void 0)},onafterevent:function(e,t,a,i){a===r.QUALITYCHANGE_PAUSE&&n.stateMachine.FINISH_QUALITYCHANGE_PAUSE(i),a===r.QUALITYCHANGE&&n.stateMachine.FINISH_QUALITYCHANGE(i),a===r.QUALITYCHANGE_REBUFFERING&&n.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(i),a!==r.MUTING_READY&&a!==r.MUTING_PLAY&&a!==r.MUTING_PAUSE||n.stateMachine.FINISH_MUTING(i)},onenterstate:function(t,a,i,o,E){"none"===a&&e.starttime?n.onEnterStateTimestamp=e.starttime:n.onEnterStateTimestamp=o||(new Date).getTime(),l.logger.log("[ENTER] "+l.padRight(i,20)+"EVENT: "+l.padRight(t,20)+" from "+l.padRight(a,14)),E&&i!==r.PAUSED_SEEKING&&i!==r.PLAY_SEEKING&&i!==r.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(E),t===s.Event.START_CAST&&i===r.CASTING&&n.stateMachineCallbacks.startCasting(o,E),i===r.REBUFFERING&&n.startRebufferingHeartbeatInterval()},onleavestate:function(e,t,a,i,o){if(t===r.REBUFFERING&&n.resetRebufferingHelpers(),i){n.addStatesToLog(e,t,a,i,o);var E=i-n.onEnterStateTimestamp;if(o&&a!==r.PAUSED_SEEKING&&a!==r.PLAY_SEEKING&&a!==r.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeEndFromEvent(o),"PLAY_SEEK"===e&&t===r.PAUSE)return!0;var u=String(t).toLowerCase();if(t===r.END_PLAY_SEEKING||t===r.PAUSED_SEEKING){var c=n.seekedTimestamp-n.seekTimestamp;n.stateMachineCallbacks[u](c,u,o)}else if(e===s.Event.UNLOAD)n.stateMachineCallbacks.unload(E,u,o);else if(t===r.PAUSE&&a!==r.PAUSED_SEEKING)n.stateMachineCallbacks.setVideoTimeStartFromEvent(e),n.stateMachineCallbacks.pause(E,u,o);else{var d=n.stateMachineCallbacks[u];"function"==typeof d?d(E,u,o):l.logger.error("Could not find callback function for "+u)}o&&a!==r.PAUSED_SEEKING&&a!==r.PLAY_SEEKING&&a!==r.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(o),e===s.Event.VIDEO_CHANGE?n.stateMachineCallbacks.videoChange(o):e===s.Event.AUDIO_CHANGE?n.stateMachineCallbacks.audioChange(o):e===s.Event.MUTE?n.stateMachineCallbacks.mute():e===s.Event.UN_MUTE?n.stateMachineCallbacks.unMute():e===s.Event.MANUAL_SOURCE_CHANGE&&n.stateMachineCallbacks.manualSourceChange(o)}},onseek:function(e,t,a,i){n.seekTimestamp=i},onseeked:function(e,t,a,i){n.seekedTimestamp=i},ontimechanged:function(e,t,a,i,r){var o=i-n.onEnterStateTimestamp;o>59700&&(n.stateMachineCallbacks.setVideoTimeEndFromEvent(r),n.stateMachineCallbacks.heartbeat(o,String(t).toLowerCase(),{played:o}),n.onEnterStateTimestamp=i,n.stateMachineCallbacks.setVideoTimeStartFromEvent(r))},onplayerError:function(e,t,a,i,r){n.stateMachineCallbacks.error(r)}}})},t.prototype.callEvent=function(e,t,n){var a=this.stateMachine[e];if(a)try{a.call(this.stateMachine,n,t)}catch(n){l.logger.error("Exception occured in State Machine callback "+e,a,t,n)}else l.logger.log("Ignored Event: "+e)},t.prototype.addStatesToLog=function(e,t,n,a,i){this.enabledDebugging&&this.debuggingStates.push(new E.EventDebugging(e,t,n,a,i))},t.prototype.getStates=function(){return this.debuggingStates},t.prototype.setEnabledDebugging=function(e){this.enabledDebugging=e},t.PAUSE_SEEK_DELAY=200,t.SEEKED_PAUSE_DELAY=300,t}(u.AnalyticsStateMachine);t.Bitmovin7AnalyticsStateMachine=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),i=function(){function e(e){this.code=e,this.message=this.getMessageFromCode(e)}return e.prototype.getMessageFromCode=function(e){switch(e){case a.ErrorCode.BufferingTimeoutReached:return"ANALYTICS_BUFFERING_TIMEOUT_REACHED";default:return}},e}();t["default"]=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.callbacks=[]}return e.prototype.subscribe=function(e){var t=this;return this.callbacks.push(e),function(){return t.unsubscribe(e)}},e.prototype.dispatch=function(e){this.callbacks.slice(0).forEach(function(t){t(e)})},e.prototype.unsubscribe=function(e){var t=this.callbacks.indexOf(e);t>-1&&this.callbacks.splice(t,1)},Object.defineProperty(e.prototype,"subscriberCount",{get:function(){return this.callbacks.length},enumerable:!0,configurable:!0}),e}();t.EventDispatcher=a},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(6),s=n(48),E=function(e){function t(t,n){var a=e.call(this)||this,i=t.getConfig(),o=i.analytics;return void 0===o&&(o={}),o.playerKey=o.playerKey||i.key,a.internalAdapter=new s.Bitmovin8InternalAdapter(t,n),a.analytics=new r.Analytics(o,a.internalAdapter),t.analytics=a.analytics,a.wrapPlayerLoad(t,a.analytics),a}return i(t,e),t.prototype.wrapPlayerLoad=function(e,t){var n=e.load;e.load=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(a.length>0){var r=a[0].analytics;t.sourceChange(r)}return n.apply(e,a)}},t}(o.Adapter);t.Bitmovin8Adapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o,s=n(49),E=n(20),l=n(52),u=n(15),c=n(9),d=n(2),A=n(3),m=n(8),p=n(19),h=n(53),f=n(55),v=n(56),T=n(12);!function(e){e.Inline="inline",e.Fullscreen="fullscreen",e.PictureInPicture="pictureinpicture";
}(o||(o={}));var N=function(e){function t(t,n){var a=e.call(this,n)||this;return a.player=t,a.onBeforeUnLoadEvent=!1,a.getPlayerVersion=function(){return a.player.version},a.getPlayerName=function(){return A.Player.BITMOVIN},a.getPlayerTech=function(){return a.player.getPlayerType()},a.getDrmPerformanceInfo=function(){return a.drmPerformanceInfo},a.stateMachine=new s.Bitmovin8AnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.speedMeter=new v.Bitmovin8SpeedMeterAdapter(t,new E.DownloadSpeedMeter).getDownloadSpeedMeter(),a.segmentTracker=new f.Bitmovin8SegmentTrackerAdapter(t,new l.SegmentTracker).getSegmentTracker(),a.videoCompletionTracker=new u["default"],a}return i(t,e),Object.defineProperty(t.prototype,"downloadSpeedInfo",{get:function(){return this.speedMeter.getInfo()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"segments",{get:function(){return this.segmentTracker.getSegments()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"adModule",{get:function(){return this._adModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportsDeferredLicenseLoading",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.register()},t.prototype.clearValues=function(){this.speedMeter.reset()},t.prototype.clearSegments=function(){this.segmentTracker.reset()},t.prototype.getAutoPlay=function(){return this.player.getConfig().playback&&this.player.getConfig().playback.autoplay||!1},t.prototype.getCurrentPlaybackInfo=function(){var t,n=this,a={},i=this.player.getSource();if(i){var s=p.getSourceInfoFromBitmovinSourceConfig(i.progressive,this.player);a.videoTitle=i.title,a.mpdUrl=i.dash,a.m3u8Url=i.hls,a.progUrl=s.progUrl,a.progBitrate=s.progBitrate}this.player.subtitles&&(t=this.player.subtitles.list().find(function(e){return!0===e.enabled}));var E=r({},e.prototype.getCommonPlaybackInfo.call(this),{size:this.player.getViewMode()===o.Fullscreen?m.PlayerSize.Fullscreen:m.PlayerSize.Window,playerTech:this.getPlayerTech(),isLive:this.player.isLive(),videoDuration:this.player.getDuration(),streamFormat:this.player.getStreamType(),videoWindowWidth:this.player.getContainer().offsetWidth,videoWindowHeight:this.player.getContainer().offsetHeight,isMuted:this.player.isMuted(),isCasting:this.player.isCasting(),audioLanguage:null!=this.player.getAudio()?this.player.getAudio().lang:null,subtitleEnabled:null!=t,subtitleLanguage:null!=t?t.lang:null,droppedFrames:null!=n.player.getSource()?n.player.getDroppedVideoFrames():0},a),l=this.player.getPlaybackVideoData();E.videoBitrate=l.bitrate,E.videoPlaybackHeight=l.height,E.videoPlaybackWidth=l.width,E.videoCodec=l.codec,"progressive"===E.streamFormat&&(E.videoBitrate=a.progBitrate);var u=this.player.getPlaybackAudioData();return E.audioBitrate=u.bitrate,E.audioCodec=u.codec,E},t.prototype.register=function(){var e=this;this.player.on(this.player.exports.PlayerEvent.SourceUnloaded,function(t){e.segmentTracker.reset(),e.eventCallback(d.Event.SOURCE_UNLOADED,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.SourceLoaded,function(t){e.videoCompletionTracker.reset(),e.videoCompletionTracker.setVideoDuration(e.player.getDuration()),e.eventCallback(d.Event.SOURCE_LOADED,{})}),this.player.on(this.player.exports.PlayerEvent.CastStarted,function(t){e.eventCallback(d.Event.START_CAST,t)}),this.player.on(this.player.exports.PlayerEvent.CastStopped,function(){e.eventCallback(d.Event.END_CAST,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Play,function(t){"ui-seek"!==t.issuer&&e.eventCallback(d.Event.PLAY,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Playing,function(t){"advertising-api"!==t.issuer&&e.eventCallback(d.Event.PLAYING,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Paused,function(t){"ui-seek"!==t.issuer&&e.eventCallback(d.Event.PAUSE,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.TimeChanged,function(){e.eventCallback(d.Event.TIMECHANGED,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Seek,function(){e.eventCallback(d.Event.SEEK,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Seeked,function(){e.eventCallback(d.Event.SEEKED,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.StallStarted,function(){e.eventCallback(d.Event.START_BUFFERING,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.StallEnded,function(){e.eventCallback(d.Event.END_BUFFERING,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.AudioPlaybackQualityChanged,function(){var t=e.player.getPlaybackAudioData();e.shouldAllowAudioQualityChange(t.bitrate)&&(e.setPreviousAudioBitrate(t.bitrate),e.eventCallback(d.Event.AUDIO_CHANGE,{bitrate:t.bitrate,currentTime:e.player.getCurrentTime(),codec:t.codec}))}),this.player.on(this.player.exports.PlayerEvent.VideoPlaybackQualityChanged,function(){var t=e.player.getPlaybackVideoData();e.shouldAllowVideoQualityChange(t.bitrate)&&(e.setPreviousVideoBitrate(t.bitrate),e.eventCallback(d.Event.VIDEO_CHANGE,{width:t.width,height:t.height,bitrate:t.bitrate,currentTime:e.player.getCurrentTime(),codec:t.codec}))}),this.player.on(this.player.exports.PlayerEvent.ViewModeChanged,function(t){"fullscreen"===t.to?e.eventCallback(d.Event.START_FULLSCREEN,{currentTime:e.player.getCurrentTime()}):"fullscreen"===t.from&&e.eventCallback(d.Event.END_FULLSCREEN,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.AdStarted,function(t){e.eventCallback(d.Event.START_AD,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.AdFinished,function(t){e.eventCallback(d.Event.END_AD,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Muted,function(){e.eventCallback(d.Event.MUTE,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Unmuted,function(){e.eventCallback(d.Event.UN_MUTE,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.AdSkipped,function(t){e.eventCallback(d.Event.END_AD,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Error,function(t){e.eventCallback(d.Event.ERROR,{code:t.code,message:t.name,data:t.data,currentTime:e.player.getCurrentTime()}),t.code!==c.ErrorCode.BitmovinPlayerLicensingError&&t.code!==c.ErrorCode.SetupMissingLicenseWhitelist||e._onLicenseCallFailed.dispatch({})}),this.player.on(this.player.exports.PlayerEvent.PlaybackFinished,function(){e.eventCallback(d.Event.PLAYBACK_FINISHED,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.DownloadFinished,function(t){0===t.downloadType.indexOf("drm/license/")&&(e.drmPerformanceInfo={drmType:t.downloadType.replace("drm/license/",""),drmLoadTime:1e3*t.downloadTime})}),this.player.on(this.player.exports.PlayerEvent.AudioChanged,function(t){e.eventCallback(d.Event.AUDIOTRACK_CHANGED,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.SubtitleEnabled,function(t){e.eventCallback(d.Event.SUBTITLE_CHANGE,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.SubtitleDisabled,function(t){e.eventCallback(d.Event.SUBTITLE_CHANGE,{currentTime:e.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.LicenseValidated,function(t){t.data.analytics&&void 0!==t.data.analytics.key?e._onLicenseKeyReceived.dispatch({licenseKey:t.data.analytics.key}):e._onLicenseCallFailed.dispatch({})});var t=function(){e.onBeforeUnLoadEvent||(e.onBeforeUnLoadEvent=!0,e.eventCallback(d.Event.UNLOAD,{currentTime:e.player.getCurrentTime()}))};window.addEventListener("beforeunload",t),window.addEventListener("unload",t),this._adModule=new h.Bitmovin8AdModule(this.player)},t.prototype.sourceChange=function(e,t){this.stateMachine.sourceChange(e,t,this.player.getCurrentTime())},t.prototype.onError=function(){this.clearSegments()},t}(T.InternalAdapter);t.Bitmovin8InternalAdapter=N},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(10),s=n(2),E=n(14),l=n(18),u=n(1),c=n(4),d=n(0),A=n(11);!function(e){e.SETUP="SETUP",e.STARTUP="STARTUP",e.READY="READY",e.PLAYING="PLAYING",e.REBUFFERING="REBUFFERING",e.PAUSE="PAUSE",e.QUALITYCHANGE="QUALITYCHANGE",e.PAUSED_SEEKING="PAUSED_SEEKING",e.END_PAUSED_SEEKING="END_PAUSED_SEEKING",e.PLAY_SEEKING="PLAY_SEEKING",e.END_PLAY_SEEKING="END_PLAY_SEEKING",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.END="END",e.ERROR="ERROR",e.AD_STARTUP="AD_STARTUP",e.AD_READY="AD_READY",e.AD_PAUSE="AD_PAUSE",e.AD_PLAYING="AD_PLAYING",e.MUTING_READY="MUTING_READY",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_PAUSE="MUTING_PAUSE",e.CASTING="CASTING",e.SOURCE_CHANGING="SOURCE_CHANGING",e.INITIAL_SOURCE_CHANGE="INITIAL_SOURCE_CHANGE",e.SOURCE_LOADED="SOURCE_LOADED",e.SUBTITLE_CHANGING="SUBTITLE_CHANGING",e.AUDIOTRACK_CHANGING="AUDIOTRACK_CHANGING",e.EXIT_BEFORE_VIDEOSTART="EXIT_BEFORE_VIDEOSTART"}(r||(r={}));var m=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.debuggingStates=[],a.enabledDebugging=!1,a.sourceChange=function(e,t,n){a.callEvent(s.Event.MANUAL_SOURCE_CHANGE,{config:e,currentTime:n},t)},a.seekTimestamp=0,a.seekedTimestamp=0,a}return i(t,e),t.prototype.getAllStatesBut=function(e){return this.getAllStates().filter(function(t){return e.indexOf(t)<0})},t.prototype.getAllStates=function(){return Object.keys(r).map(function(e){return r[e]})},t.prototype.createStateMachine=function(e){var t=this;return o.create({initial:r.SETUP,error:function(e,t,n,a,i,r){u.logger.error("Error in statemachine: "+r)},events:[{name:s.Event.SOURCE_LOADED,from:[r.SETUP,r.ERROR,r.SOURCE_CHANGING,r.INITIAL_SOURCE_CHANGE],to:r.READY},{name:s.Event.PLAY,from:r.READY,to:r.STARTUP},{name:s.Event.PLAYING,from:r.READY,to:r.PLAYING},{name:s.Event.READY,from:r.READY,to:r.READY},{name:s.Event.VIDEO_CHANGE,from:r.READY,to:r.READY},{name:s.Event.AUDIO_CHANGE,from:r.READY,to:r.READY},{name:s.Event.ERROR,from:[r.STARTUP,r.AD_STARTUP],to:r.EXIT_BEFORE_VIDEOSTART},{name:s.Event.UNLOAD,from:[r.STARTUP,r.AD_STARTUP],to:r.EXIT_BEFORE_VIDEOSTART},{name:s.Event.VIDEOSTART_TIMEOUT,from:r.STARTUP,to:r.EXIT_BEFORE_VIDEOSTART},{name:s.Event.PLAY,from:r.STARTUP,to:r.STARTUP},{name:s.Event.PLAYING,from:r.STARTUP,to:r.STARTUP},{name:s.Event.TIMECHANGED,from:r.STARTUP,to:r.PLAYING},{name:s.Event.START_BUFFERING,from:r.STARTUP,to:r.STARTUP},{name:s.Event.END_BUFFERING,from:r.STARTUP,to:r.STARTUP},{name:s.Event.VIDEO_CHANGE,from:r.STARTUP,to:r.STARTUP},{name:s.Event.AUDIO_CHANGE,from:r.STARTUP,to:r.STARTUP},{name:s.Event.READY,from:r.STARTUP,to:r.STARTUP},{name:s.Event.PLAYING,from:r.PLAYING,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.PLAYING,to:r.PLAYING},{name:s.Event.END_BUFFERING,from:r.PLAYING,to:r.PLAYING},{name:s.Event.START_BUFFERING,from:r.PLAYING,to:r.REBUFFERING},{name:s.Event.END_BUFFERING,from:r.REBUFFERING,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.PAUSE,from:r.PLAYING,to:r.PAUSE},{name:s.Event.PAUSE,from:r.REBUFFERING,to:r.PAUSE},{name:s.Event.PLAY,from:r.PAUSE,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PLAYING,to:r.QUALITYCHANGE},{name:s.Event.AUDIO_CHANGE,from:r.PLAYING,to:r.QUALITYCHANGE},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE,to:r.QUALITYCHANGE},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE,to:r.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:r.QUALITYCHANGE,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.AUDIO_CHANGE,from:r.PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE_PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE_PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:r.QUALITYCHANGE_PAUSE,to:r.PAUSE},{name:s.Event.SEEK,from:r.PAUSE,to:r.PAUSED_SEEKING},{name:s.Event.SEEK,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.SEEKED,from:r.PAUSED_SEEKING,to:r.PAUSE},{name:s.Event.PLAY,from:r.PAUSED_SEEKING,to:r.END_PAUSED_SEEKING},{name:s.Event.PLAYING,from:r.END_PAUSED_SEEKING,to:r.END_PAUSED_SEEKING},{name:s.Event.TIMECHANGED,from:r.END_PAUSED_SEEKING,to:r.END_PAUSED_SEEKING},{name:s.Event.SEEKED,from:r.END_PAUSED_SEEKING,to:r.PLAYING},{name:s.Event.AUDIO_CHANGE,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.VIDEO_CHANGE,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.START_BUFFERING,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.END_BUFFERING,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.SEEK,from:r.PLAYING,to:r.PLAY_SEEKING},{name:s.Event.SEEK,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.AUDIO_CHANGE,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.VIDEO_CHANGE,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.START_BUFFERING,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.END_BUFFERING,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.PLAY,from:r.PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.PLAYING,from:r.PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.SEEKED,from:r.PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.SEEK,from:r.END_PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.START_BUFFERING,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.END_BUFFERING,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.SEEKED,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.PLAY,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.PLAYING,from:r.END_PLAY_SEEKING,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.END_PLAY_SEEKING,to:r.PLAYING},{name:s.Event.END,from:r.PLAY_SEEKING,to:r.END},{name:s.Event.END,from:r.PAUSED_SEEKING,to:r.END},{name:s.Event.END,from:r.PLAYING,to:r.END},{name:s.Event.END,from:r.PAUSE,to:r.END},{name:s.Event.SEEK,from:r.END,to:r.END},{name:s.Event.SEEKED,from:r.END,to:r.END},{name:s.Event.TIMECHANGED,from:r.END,to:r.END},{name:s.Event.END_BUFFERING,from:r.END,to:r.END},{name:s.Event.START_BUFFERING,from:r.END,to:r.END},{name:s.Event.END,from:r.END,to:r.END},{name:s.Event.PLAY,from:r.END,to:r.STARTUP},{name:s.Event.ERROR,from:this.getAllStatesBut([r.STARTUP]),to:r.ERROR},{name:s.Event.UNLOAD,from:this.getAllStatesBut([r.STARTUP,r.AD_STARTUP]),to:r.END},{name:s.Event.SUBTITLE_CHANGE,from:r.PLAYING,to:r.SUBTITLE_CHANGING},{name:s.Event.SUBTITLE_CHANGE,from:r.PAUSE,to:r.PAUSE},{name:s.Event.SUBTITLE_CHANGE,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.SUBTITLE_CHANGE,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.SUBTITLE_CHANGE,from:r.SUBTITLE_CHANGING,to:r.SUBTITLE_CHANGING},{name:s.Event.TIMECHANGED,from:r.SUBTITLE_CHANGING,to:r.PLAYING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.PLAYING,to:r.AUDIOTRACK_CHANGING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.PAUSE,to:r.PAUSE},{name:s.Event.AUDIOTRACK_CHANGED,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.AUDIOTRACK_CHANGING,to:r.AUDIOTRACK_CHANGING},{name:s.Event.TIMECHANGED,from:r.AUDIOTRACK_CHANGING,to:r.PLAYING},{name:s.Event.START_AD,from:r.STARTUP,to:r.AD_STARTUP},{name:s.Event.END_AD,from:r.AD_STARTUP,to:r.STARTUP},{name:s.Event.PLAY,from:r.AD_STARTUP,to:r.AD_STARTUP},{name:s.Event.PAUSE,from:r.AD_STARTUP,to:r.AD_STARTUP},{name:s.Event.TIMECHANGED,from:r.AD_STARTUP,to:r.AD_STARTUP},{name:s.Event.START_AD,from:r.READY,to:r.AD_READY},{name:s.Event.END_AD,from:r.AD_READY,to:r.STARTUP},{name:s.Event.PLAY,from:r.AD_READY,to:r.AD_READY},{name:s.Event.PAUSE,from:r.AD_READY,to:r.AD_READY},{name:s.Event.TIMECHANGED,from:r.AD_READY,to:r.AD_READY},{name:s.Event.START_AD,from:r.PAUSE,to:r.AD_PAUSE},{name:s.Event.END_AD,from:r.AD_PAUSE,to:r.PAUSE},{name:s.Event.PLAY,from:r.AD_PAUSE,to:r.AD_PAUSE},{name:s.Event.PAUSE,from:r.AD_PAUSE,to:r.AD_PAUSE},{name:s.Event.TIMECHANGED,from:r.AD_PAUSE,to:r.AD_PAUSE},{name:s.Event.START_AD,from:r.PLAYING,to:r.AD_PLAYING},{name:s.Event.END_AD,from:r.AD_PLAYING,to:r.PLAYING},{name:s.Event.PLAY,from:r.AD_PLAYING,to:r.AD_PLAYING},{name:s.Event.PAUSE,from:r.AD_PLAYING,to:r.AD_PLAYING},{name:s.Event.TIMECHANGED,from:r.AD_PLAYING,to:r.AD_PLAYING},{name:s.Event.END,from:r.AD_PLAYING,to:r.END},{name:s.Event.MUTE,from:r.READY,to:r.MUTING_READY},{name:s.Event.UN_MUTE,from:r.READY,to:r.MUTING_READY},{name:"FINISH_MUTING",from:r.MUTING_READY,to:r.READY},{name:s.Event.MUTE,from:r.PLAYING,to:r.MUTING_PLAY},{name:s.Event.UN_MUTE,from:r.PLAYING,to:r.MUTING_PLAY},{name:"FINISH_MUTING",from:r.MUTING_PLAY,to:r.PLAYING},{name:s.Event.MUTE,from:r.PAUSE,to:r.MUTING_PAUSE},{name:s.Event.UN_MUTE,from:r.PAUSE,to:r.MUTING_PAUSE},{name:"FINISH_MUTING",from:r.MUTING_PAUSE,to:r.PAUSE},{name:s.Event.START_CAST,from:[r.READY,r.PAUSE],to:r.CASTING},{name:s.Event.PAUSE,from:r.CASTING,to:r.CASTING},{name:s.Event.PLAY,from:r.CASTING,to:r.CASTING},{name:s.Event.TIMECHANGED,from:r.CASTING,to:r.CASTING},{name:s.Event.MUTE,from:r.CASTING,to:r.CASTING},{name:s.Event.SEEK,from:r.CASTING,to:r.CASTING},{name:s.Event.SEEKED,from:r.CASTING,to:r.CASTING},{name:s.Event.END_CAST,from:r.CASTING,to:r.READY},{name:s.Event.SEEK,from:r.READY,to:r.READY},{name:s.Event.SEEKED,from:r.READY,to:r.READY},{name:s.Event.SEEKED,from:r.STARTUP,to:r.STARTUP},{name:s.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStatesBut([r.SETUP]),to:r.SOURCE_CHANGING},{name:s.Event.MANUAL_SOURCE_CHANGE,from:r.SETUP,to:r.INITIAL_SOURCE_CHANGE},{name:s.Event.SOURCE_UNLOADED,from:this.getAllStates(),to:r.SOURCE_CHANGING},{name:s.Event.VIDEO_CHANGE,from:r.REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.AUDIO_CHANGE,from:r.REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE_REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE_REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:r.QUALITYCHANGE_REBUFFERING,to:r.REBUFFERING}],callbacks:{onbeforeevent:function(e,t,n,a,i){if(t===r.REBUFFERING&&n===r.QUALITYCHANGE_REBUFFERING)return!1},onafterevent:function(e,n,a,i,o){e===s.Event.MANUAL_SOURCE_CHANGE&&n===r.SETUP?t.stateMachineCallbacks.initialSourceChange(o):e===s.Event.MANUAL_SOURCE_CHANGE&&t.stateMachineCallbacks.manualSourceChange(o),a===r.QUALITYCHANGE_PAUSE&&t.stateMachine.FINISH_QUALITYCHANGE_PAUSE(i),a===r.QUALITYCHANGE&&t.stateMachine.FINISH_QUALITYCHANGE(i),a===r.QUALITYCHANGE_REBUFFERING&&t.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(i),a!==r.MUTING_READY&&a!==r.MUTING_PLAY&&a!==r.MUTING_PAUSE||t.stateMachine.FINISH_MUTING(i)},onenterstate:function(n,a,i,o,E){"none"===a&&e.starttime?t.onEnterStateTimestamp=e.starttime:t.onEnterStateTimestamp=o||(new Date).getTime(),u.logger.log("[ENTER "+o+"] "+u.padRight(i,20)+"EVENT: "+u.padRight(n,20)+" from "+u.padRight(a,20)),E&&i!==r.END_PAUSED_SEEKING&&i!==r.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(E),n===s.Event.START_CAST&&i===r.CASTING&&t.stateMachineCallbacks.startCasting(o,E),i===r.REBUFFERING&&t.startRebufferingHeartbeatInterval()},onleavestate:function(e,n,a,i,o){if(n===r.REBUFFERING&&t.resetRebufferingHelpers(),i){u.logger.log("[LEAVE "+i+"] "+u.padRight(n,20)+"EVENT: "+u.padRight(e,20)+" to "+u.padRight(a,20)),t.addStatesToLog(e,n,a,i,o);var E=i-t.onEnterStateTimestamp;if(n===r.PAUSED_SEEKING&&a===r.END_PAUSED_SEEKING)return!0;o&&a!==r.END_PAUSED_SEEKING&&a!==r.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeEndFromEvent(o),n!==r.READY&&n!==r.AD_STARTUP||a!==r.STARTUP?n!==r.STARTUP||a!==r.PLAYING&&a!==r.AD_STARTUP||t.clearVideoStartTimeout():t.setVideoStartTimeout();var l=String(n).toLowerCase();if(a===r.EXIT_BEFORE_VIDEOSTART){t.clearVideoStartTimeout();var c=t.getReasonForVideoStartFailure(e),A=e!==s.Event.ERROR;t.stateMachineCallbacks.videoStartFailed({timestamp:i,reason:c},A)}else if(n===r.PAUSED_SEEKING||n===r.END_PAUSED_SEEKING){var m=i-t.seekTimestamp;t.stateMachineCallbacks.paused_seeking(m,l,o)}else if(n===r.END_PLAY_SEEKING)m=t.seekedTimestamp-t.seekTimestamp,t.stateMachineCallbacks.end_play_seeking(m,l,o);else if(e===s.Event.UNLOAD)t.stateMachineCallbacks.unload(E,l,o);else if(n===r.AD_PAUSE||n===r.AD_READY||n===r.AD_PLAYING||n===r.AD_STARTUP)t.stateMachineCallbacks.ad(E,"ad",o);else if(e===s.Event.START_AD&&n===r.STARTUP)d.noOp();else if(e===s.Event.SOURCE_LOADED&&n===r.INITIAL_SOURCE_CHANGE)d.noOp();else if(n!==r.ERROR){var p=t.stateMachineCallbacks[l];if("function"==typeof p)try{p(E,l,o)}catch(e){u.logger.error("Exception occured in State Machine callback "+l,o,e)}else u.logger.error("Could not find callback function for "+l)}o&&a!==r.END_PAUSED_SEEKING&&a!==r.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(o),e===s.Event.VIDEO_CHANGE?t.stateMachineCallbacks.videoChange(o):e===s.Event.AUDIO_CHANGE?t.stateMachineCallbacks.audioChange(o):e===s.Event.MUTE?t.stateMachineCallbacks.mute():e===s.Event.UN_MUTE&&t.stateMachineCallbacks.unMute()}},onseek:function(e,n,a,i){t.seekTimestamp=i},onseeked:function(e,n,a,i){t.seekedTimestamp=i},ontimechanged:function(e,n,a,i,r){var o=i-t.onEnterStateTimestamp;o>59700&&(t.stateMachineCallbacks.setVideoTimeEndFromEvent(r),t.stateMachineCallbacks.heartbeat(o,String(n).toLowerCase(),{played:o}),t.onEnterStateTimestamp=i,t.stateMachineCallbacks.setVideoTimeStartFromEvent(r))},onplayerError:function(e,n,a,i,r){t.stateMachineCallbacks.error(r)}}})},t.prototype.callEvent=function(e,t,n){var a=this.stateMachine[e];if(a)try{a.call(this.stateMachine,n,t)}catch(n){u.logger.error("Exception occured in State Machine callback "+e,a,t,n)}else u.logger.log("Ignored Event: "+e)},t.prototype.addStatesToLog=function(e,t,n,a,i){this.enabledDebugging&&this.debuggingStates.push(new l.EventDebugging(e,t,n,a,i))},t.prototype.getStates=function(){return this.debuggingStates},t.prototype.setEnabledDebugging=function(e){this.enabledDebugging=e},t.prototype.getReasonForVideoStartFailure=function(e){switch(e){case s.Event.ERROR:return E.VideoStartFailedReason.PlayerError;case s.Event.UNLOAD:return E.VideoStartFailedReason.PageClosed;case s.Event.VIDEOSTART_TIMEOUT:return E.VideoStartFailedReason.Timeout;default:return E.VideoStartFailedReason.Unknown}},t.prototype.setVideoStartTimeout=function(){var e=this;null!=this.videoStartTimeout&&this.clearVideoStartTimeout(),this.videoStartTimeout=window.setTimeout(function(){e.callEvent(s.Event.VIDEOSTART_TIMEOUT,{},d.getCurrentTimestamp())},c.ANALYTICS_VIDEOSTART_TIMEOUT)},t.prototype.clearVideoStartTimeout=function(){window.clearTimeout(this.videoStartTimeout),this.videoStartTimeout=void 0},t}(A.AnalyticsStateMachine);t.Bitmovin8AnalyticsStateMachine=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(){function e(){}return e.bytesToBits=function(e){return 8*e},e.bitsToBytes=function(e){return Math.round(e/8)},e.bytesToKiloBytes=function(e){return a.calculateTime(1e3*e)},e.kiloBytesToMegaBytes=function(e){return 1e3*e},e}();t.Converter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.download=e}return Object.defineProperty(e.prototype,"speed",{get:function(){return this.download.size/this.download.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.download.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.download.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeToFirstByte",{get:function(){return this.download.timeToFirstByte},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.download.timestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpStatus",{get:function(){return this.download.httpStatus},enumerable:!0,configurable:!0}),e}();t.Measure=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.segments=[]}return e.prototype.reset=function(){this.segments=[]},e.prototype.addSegment=function(e){this.segments.push(e)},e.prototype.removeSegment=function(e){this.segments=this.segments.filter(function(t){return t.url!==e})},e.prototype.getSegments=function(){return this.segments},e}();t.SegmentTracker=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(54),i=function(){function e(e){var t=this;this.player=e,this.adCallbacks=new a.AdCallbacks,this.isLinearAdActive=function(){return t.player.ads&&t.player.ads.isLinearAdActive()||!1},this.getContainer=function(){return t.player.getContainer()},this.getAdModuleInfo=function(){return t.player.ads?t.player.ads.getModuleInfo():{name:void 0,version:void 0}},this.currentTime=function(){return t.player.getCurrentTime()},this.register()}return e.prototype.register=function(){var e=this;this.player.on(this.player.exports.PlayerEvent.Play,function(t){"advertising-api"===t.issuer&&e.adCallbacks.onPlay(t.issuer)}),this.player.on(this.player.exports.PlayerEvent.Paused,function(t){"advertising-api"===t.issuer&&e.adCallbacks.onPause(t.issuer)}),this.player.on(this.player.exports.PlayerEvent.AdStarted,function(t){e.adCallbacks.onAdStarted(t)}),this.player.on(this.player.exports.PlayerEvent.AdFinished,function(t){e.adCallbacks.onAdFinished(t)}),this.player.on(this.player.exports.PlayerEvent.AdBreakStarted,function(t){e.adCallbacks.onAdBreakStarted(t)}),this.player.on(this.player.exports.PlayerEvent.AdBreakFinished,function(t){e.adCallbacks.onAdBreakFinished(t)}),this.player.on(this.player.exports.PlayerEvent.AdClicked,function(t){e.adCallbacks.onAdClicked(t)}),this.player.on(this.player.exports.PlayerEvent.AdQuartile,function(t){e.adCallbacks.onAdQuartile(t)}),this.player.on(this.player.exports.PlayerEvent.AdSkipped,function(t){e.adCallbacks.onAdSkipped(t)}),this.player.on(this.player.exports.PlayerEvent.AdError,function(t){e.adCallbacks.onAdError(t)}),this.player.on(this.player.exports.PlayerEvent.AdManifestLoaded,function(t){e.adCallbacks.onAdManifestLoaded(t)});var t=function(){e.adCallbacks.onBeforeUnload()};window.addEventListener("beforeunload",t),window.addEventListener("unload",t)},e}();t.Bitmovin8AdModule=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(){this.onAdStarted=function(e){},this.onAdFinished=function(e){},this.onAdBreakStarted=function(e){},this.onAdBreakFinished=function(e){},this.onAdClicked=function(e){},this.onAdError=function(e){},this.onAdManifestLoaded=function(e){},this.onAdQuartile=function(e){},this.onAdSkipped=function(e){},this.onPlay=function(e){},this.onPause=function(e){},this.onBeforeUnload=function(){}}}();t.AdCallbacks=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=function(){function e(e,t){var n=this;this.handleSegmentPlaybackEvent=function(e){n.segmentTracker.removeSegment(e.url)},this.segmentTracker=t,e.on(e.exports.PlayerEvent.DownloadFinished,function(e){return n.handleOnDownloadFinishEvent(e)}),e.on(e.exports.PlayerEvent.SegmentPlayback,function(e){return n.handleSegmentPlaybackEvent(e)})}return e.prototype.getSegmentTracker=function(){return this.segmentTracker},e.prototype.handleOnDownloadFinishEvent=function(e){if(0===e.downloadType.indexOf("media/video")){var t=e.url,n={name:a.getURLResourceName(t),url:t,timestamp:e.timestamp};this.segmentTracker.addSegment(n)}},e}();t.Bitmovin8SegmentTrackerAdapter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=this;this.meter=t,e.on(e.exports.PlayerEvent.DownloadFinished,function(e){return n.handleOnDownloadFinishEvent(e)})}return e.prototype.getDownloadSpeedMeter=function(){return this.meter},e.prototype.handleOnDownloadFinishEvent=function(e){e.success&&0===e.downloadType.indexOf("media/video")&&this.meter.addMeasurement({duration:e.downloadTime,size:e.size,timeToFirstByte:e.timeToFirstByte,timestamp:new Date,httpStatus:e.httpStatus})},e}();t.Bitmovin8SpeedMeterAdapter=a},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(6),s=n(58),E=function(e){function t(t,n,a){var i=e.call(this)||this;return i.internalAdapter=new s.DashjsInternalAdapter(n,a),i.analytics=new r.Analytics(t,i.internalAdapter),i}return i(t,e),t}(o.Adapter);t.DashjsAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(7),s=n(3),E=function(e){function t(t,n){var a=e.call(this,null,n)||this;return a.mediaPlayer=t,a.getPlayerName=function(){return s.Player.DASHJS},a.getPlayerVersion=function(){return a.mediaPlayer.getVersion()},a}return i(t,e),t.prototype.initialize=function(){var e=this;a.prototype.initialize.call(this);var t=null,n=!1;try{t=this.mediaPlayer.getVideoElement()}catch(a){}t?(this.setMediaElement(t),this.registerMediaElementEventsForDashJS()):this.mediaPlayer.on("canPlay",function(){n||(t=e.mediaPlayer.getVideoElement(),n=!0,e.setMediaElement(t),e.registerMediaElementEventsForDashJS())},this)},t.prototype.registerMediaElementEventsForDashJS=function(){var e=this,t=this.mediaElement;t&&this.listenToMediaElementEvent("playing",function(){var n=t.currentTime;e.needsFirstPlayIntent=!1,e.eventCallback(r.Event.TIMECHANGED,{currentTime:n})})},t.prototype.getMIMEType=function(){return o.MIMETypes.DASH},t.prototype.getStreamURL=function(){if(this.mediaPlayer){var e=this.mediaPlayer.getSource();return e?e.toString():void 0}},t.prototype.getCurrentQualityLevelInfo=function(){if(!this.mediaPlayer)return null;var e=this.mediaPlayer.getBitrateInfoListFor("video")[this.mediaPlayer.getQualityFor("video")];return null==e?null:{width:e.width,height:e.height,bitrate:e.bitrate}},t}(n(13).HTML5InternalAdapter);t.DashjsInternalAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(10),s=n(2),E=n(14),l=n(1),u=n(4),c=n(0),d=n(11);!function(e){e.SETUP="SETUP",e.STARTUP="STARTUP",e.READY="READY",e.PLAYING="PLAYING",e.REBUFFERING="REBUFFERING",e.PAUSE="PAUSE",e.QUALITYCHANGE="QUALITYCHANGE",e.PAUSED_SEEKING="PAUSED_SEEKING",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.END="END",e.ERROR="ERROR",e.AD="AD",
e.SOURCE_CHANGING="SOURCE_CHANGING",e.MUTING_READY="MUTING_READY",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_PAUSE="MUTING_PAUSE",e.CASTING="CASTING",e.SUBTITLE_CHANGING="SUBTITLE_CHANGING",e.AUDIOTRACK_CHANGING="AUDIOTRACK_CHANGING",e.EXIT_BEFORE_VIDEOSTART="EXIT_BEFORE_VIDEOSTART"}(r||(r={}));var A=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.sourceChange=function(e,t,n){a.callEvent(s.Event.MANUAL_SOURCE_CHANGE,{config:e,currentTime:n},t)},a.seekStartedAt=null,a.createStateMachine(n),a}return i(t,e),t.prototype.getAllStates=function(){return Object.keys(r).map(function(e){return r[e]}).concat(["FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])},t.prototype.getAllStatesBut=function(e){return this.getAllStates().filter(function(t){return e.indexOf(t)<0})},t.prototype.createStateMachine=function(e){var t=this;return o.create({initial:r.SETUP,error:function(e,t,n,a,i,r){l.logger.error("Error in statemachine: "+r)},events:[{name:s.Event.TIMECHANGED,from:r.SETUP,to:r.SETUP},{name:s.Event.READY,from:[r.SETUP,r.ERROR,r.END,r.SOURCE_CHANGING],to:r.READY},{name:s.Event.READY,from:r.READY,to:r.READY},{name:s.Event.READY,from:r.STARTUP,to:r.STARTUP},{name:s.Event.PLAY,from:r.READY,to:r.STARTUP},{name:s.Event.ERROR,from:r.STARTUP,to:r.EXIT_BEFORE_VIDEOSTART},{name:s.Event.UNLOAD,from:r.STARTUP,to:r.EXIT_BEFORE_VIDEOSTART},{name:s.Event.VIDEOSTART_TIMEOUT,from:r.STARTUP,to:r.EXIT_BEFORE_VIDEOSTART},{name:s.Event.START_BUFFERING,from:r.STARTUP,to:r.STARTUP},{name:s.Event.END_BUFFERING,from:r.STARTUP,to:r.STARTUP},{name:s.Event.VIDEO_CHANGE,from:r.STARTUP,to:r.STARTUP},{name:s.Event.AUDIO_CHANGE,from:r.STARTUP,to:r.STARTUP},{name:s.Event.TIMECHANGED,from:r.READY,to:r.STARTUP},{name:s.Event.TIMECHANGED,from:r.STARTUP,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.PLAYING,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.PAUSE,to:r.PAUSE},{name:s.Event.TIMECHANGED,from:r.PAUSE,to:r.PAUSE},{name:s.Event.SEEKED,from:r.PAUSE,to:r.PAUSE},{name:s.Event.END_BUFFERING,from:r.PLAYING,to:r.PLAYING},{name:s.Event.START_BUFFERING,from:r.PLAYING,to:r.REBUFFERING},{name:s.Event.START_BUFFERING,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.PLAY,from:r.REBUFFERING,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.REBUFFERING,to:r.PLAYING},{name:s.Event.SEEK,from:r.STARTUP,to:r.STARTUP},{name:s.Event.PLAY,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.PAUSE,from:r.PLAYING,to:r.PAUSE},{name:s.Event.PAUSE,from:r.REBUFFERING,to:r.PAUSE},{name:s.Event.PLAY,from:r.PAUSE,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.PAUSE,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PLAYING,to:r.QUALITYCHANGE},{name:s.Event.AUDIO_CHANGE,from:r.PLAYING,to:r.QUALITYCHANGE},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE,to:r.QUALITYCHANGE},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE,to:r.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:r.QUALITYCHANGE,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.AUDIO_CHANGE,from:r.PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE_PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE_PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:r.QUALITYCHANGE_PAUSE,to:r.PAUSE},{name:s.Event.SEEK,from:r.PAUSE,to:r.PAUSED_SEEKING},{name:s.Event.SEEK,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.AUDIO_CHANGE,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.VIDEO_CHANGE,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.START_BUFFERING,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.END_BUFFERING,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.SEEKED,from:r.PAUSED_SEEKING,to:r.PAUSE},{name:s.Event.TIMECHANGED,from:r.PAUSED_SEEKING,to:r.PLAYING},{name:s.Event.PAUSE,from:r.PAUSED_SEEKING,to:r.PAUSE},{name:s.Event.END,from:r.PAUSED_SEEKING,to:r.END},{name:s.Event.END,from:r.PLAYING,to:r.END},{name:s.Event.END,from:r.PAUSE,to:r.END},{name:s.Event.PAUSE,from:r.END,to:r.END},{name:s.Event.SEEK,from:r.END,to:r.END},{name:s.Event.SEEKED,from:r.END,to:r.END},{name:s.Event.TIMECHANGED,from:r.END,to:r.END},{name:s.Event.END_BUFFERING,from:r.END,to:r.END},{name:s.Event.START_BUFFERING,from:r.END,to:r.END},{name:s.Event.END,from:r.END,to:r.END},{name:s.Event.SEEKED,from:r.PLAYING,to:r.PLAYING},{name:s.Event.SEEK,from:r.PLAYING,to:r.PLAYING},{name:s.Event.PLAY,from:r.END,to:r.PLAYING},{name:s.Event.ERROR,from:this.getAllStatesBut([r.STARTUP]),to:r.ERROR},{name:s.Event.PAUSE,from:r.ERROR,to:r.ERROR},{name:s.Event.UNLOAD,from:this.getAllStatesBut([r.STARTUP]),to:r.END},{name:s.Event.SUBTITLE_CHANGE,from:r.PLAYING,to:r.SUBTITLE_CHANGING},{name:s.Event.SUBTITLE_CHANGE,from:r.PAUSE,to:r.PAUSE},{name:s.Event.SUBTITLE_CHANGE,from:r.READY,to:r.READY},{name:s.Event.SUBTITLE_CHANGE,from:r.STARTUP,to:r.STARTUP},{name:s.Event.SUBTITLE_CHANGE,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.SUBTITLE_CHANGE,from:r.SUBTITLE_CHANGING,to:r.SUBTITLE_CHANGING},{name:s.Event.TIMECHANGED,from:r.SUBTITLE_CHANGING,to:r.PLAYING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.PLAYING,to:r.AUDIOTRACK_CHANGING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.PAUSE,to:r.PAUSE},{name:s.Event.AUDIOTRACK_CHANGED,from:r.READY,to:r.READY},{name:s.Event.AUDIOTRACK_CHANGED,from:r.STARTUP,to:r.STARTUP},{name:s.Event.AUDIOTRACK_CHANGED,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.AUDIOTRACK_CHANGING,to:r.AUDIOTRACK_CHANGING},{name:s.Event.TIMECHANGED,from:r.AUDIOTRACK_CHANGING,to:r.PLAYING},{name:s.Event.START_AD,from:r.PLAYING,to:r.AD},{name:s.Event.END_AD,from:r.AD,to:r.PLAYING},{name:s.Event.MUTE,from:r.READY,to:r.MUTING_READY},{name:s.Event.UN_MUTE,from:r.READY,to:r.MUTING_READY},{name:"FINISH_MUTING",from:r.MUTING_READY,to:r.READY},{name:s.Event.MUTE,from:r.PLAYING,to:r.MUTING_PLAY},{name:s.Event.UN_MUTE,from:r.PLAYING,to:r.MUTING_PLAY},{name:"FINISH_MUTING",from:r.MUTING_PLAY,to:r.PLAYING},{name:s.Event.MUTE,from:r.PAUSE,to:r.MUTING_PAUSE},{name:s.Event.UN_MUTE,from:r.PAUSE,to:r.MUTING_PAUSE},{name:"FINISH_MUTING",from:r.MUTING_PAUSE,to:r.PAUSE},{name:s.Event.START_CAST,from:[r.READY,r.PAUSE],to:r.CASTING},{name:s.Event.PAUSE,from:r.CASTING,to:r.CASTING},{name:s.Event.PLAY,from:r.CASTING,to:r.CASTING},{name:s.Event.TIMECHANGED,from:r.CASTING,to:r.CASTING},{name:s.Event.MUTE,from:r.CASTING,to:r.CASTING},{name:s.Event.SEEK,from:r.CASTING,to:r.CASTING},{name:s.Event.SEEKED,from:r.CASTING,to:r.CASTING},{name:s.Event.END_CAST,from:r.CASTING,to:r.READY},{name:s.Event.SEEK,from:r.READY,to:r.READY},{name:s.Event.SEEKED,from:r.READY,to:r.READY},{name:s.Event.SEEKED,from:r.STARTUP,to:r.STARTUP},{name:s.Event.SOURCE_LOADED,from:this.getAllStates(),to:r.SETUP},{name:s.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStates(),to:r.SOURCE_CHANGING},{name:s.Event.TIMECHANGED,from:r.SOURCE_CHANGING,to:r.SOURCE_CHANGING},{name:s.Event.PAUSE,from:r.SOURCE_CHANGING,to:r.SOURCE_CHANGING},{name:s.Event.VIDEO_CHANGE,from:r.REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.AUDIO_CHANGE,from:r.REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE_REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE_REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:r.QUALITYCHANGE_REBUFFERING,to:r.REBUFFERING}],callbacks:{onenterstate:function(n,a,i,o,E){"none"===a&&e.starttime?t.onEnterStateTimestamp=e.starttime:t.onEnterStateTimestamp=o||(new Date).getTime(),l.logger.log("[ENTER] "+l.padRight(i,20)+"EVENT: "+l.padRight(n,20)+" from "+l.padRight(a,14)),E&&i!==r.PAUSED_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(E),n===s.Event.START_CAST&&i===r.CASTING&&t.stateMachineCallbacks.startCasting(o,E),i===r.REBUFFERING&&t.startRebufferingHeartbeatInterval()},onafterevent:function(e,n,a,i,o){e===s.Event.MANUAL_SOURCE_CHANGE&&t.stateMachineCallbacks.manualSourceChange(o),a===r.QUALITYCHANGE&&t.stateMachine.FINISH_QUALITYCHANGE(i),a!==r.MUTING_READY&&a!==r.MUTING_PLAY&&a!==r.MUTING_PAUSE||t.stateMachine.FINISH_MUTING(i)},onleavestate:function(e,n,a,i,o){if(n===r.REBUFFERING&&t.resetRebufferingHelpers(),i){var E=i-t.onEnterStateTimestamp;o&&a!==r.PAUSED_SEEKING&&t.stateMachineCallbacks.setVideoTimeEndFromEvent(o),n===r.READY&&a===r.STARTUP?t.setVideoStartTimeout():n===r.STARTUP&&a===r.PLAYING&&t.clearVideoStartTimeout();var u=String(n).toLowerCase();if(a===r.EXIT_BEFORE_VIDEOSTART){t.clearVideoStartTimeout();var c=t.getReasonForVideoStartFailure(e),d=e!==s.Event.ERROR;t.stateMachineCallbacks.videoStartFailed({timestamp:i,reason:c},d)}else if(n===r.PAUSED_SEEKING){var A=i-t.seekStartedAt;t.seekStartedAt=null,t.stateMachineCallbacks[u](A,u,o)}else if(e===s.Event.UNLOAD)t.stateMachineCallbacks.unload(E,u,o);else if(n===r.PAUSE&&a!==r.PAUSED_SEEKING)t.stateMachineCallbacks.setVideoTimeStartFromEvent(e),t.stateMachineCallbacks.pause(E,u,o);else{var m=t.stateMachineCallbacks[u];"function"==typeof m?m(E,u,o):l.logger.error("Could not find callback function for "+u)}o&&a!==r.PAUSED_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(o),e===s.Event.VIDEO_CHANGE?t.stateMachineCallbacks.videoChange(o):e===s.Event.AUDIO_CHANGE?t.stateMachineCallbacks.audioChange(o):e===s.Event.MUTE?t.stateMachineCallbacks.mute():e===s.Event.UN_MUTE&&t.stateMachineCallbacks.unMute()}},onseek:function(e,n,a,i){t.seekStartedAt=t.seekStartedAt||i},ontimechanged:function(e,n,a,i,r){var o=i-t.onEnterStateTimestamp;o>59700&&(t.stateMachineCallbacks.setVideoTimeEndFromEvent(r),t.stateMachineCallbacks.heartbeat(o,String(n).toLowerCase(),{played:o}),t.onEnterStateTimestamp=i,t.stateMachineCallbacks.setVideoTimeStartFromEvent(r))},onplayerError:function(e,n,a,i,r){t.stateMachineCallbacks.error(r)}}})},t.prototype.callEvent=function(e,t,n){var a=this.stateMachine[e];a?a.call(this.stateMachine,n,t):l.logger.log("Ignored Event: "+e)},t.prototype.getReasonForVideoStartFailure=function(e){switch(e){case s.Event.ERROR:return E.VideoStartFailedReason.PlayerError;case s.Event.UNLOAD:return E.VideoStartFailedReason.PageClosed;case s.Event.VIDEOSTART_TIMEOUT:return E.VideoStartFailedReason.Timeout;default:return E.VideoStartFailedReason.Unknown}},t.prototype.setVideoStartTimeout=function(){var e=this;null!=this.videoStartTimeout&&this.clearVideoStartTimeout(),this.videoStartTimeout=window.setTimeout(function(){e.callEvent(s.Event.VIDEOSTART_TIMEOUT,{},c.getCurrentTimestamp())},u.ANALYTICS_VIDEOSTART_TIMEOUT)},t.prototype.clearVideoStartTimeout=function(){window.clearTimeout(this.videoStartTimeout),this.videoStartTimeout=void 0},t}(d.AnalyticsStateMachine);t.HTML5AnalyticsStateMachine=A},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(6),s=n(61),E=function(e){function t(t,n,a){var i=e.call(this)||this;return i.internalAdapter=new s.HlsInternalAdapter(n,a),i.analytics=new r.Analytics(t,i.internalAdapter),i}return i(t,e),t}(o.Adapter);t.HlsAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),s=n(2),E=n(7),l=n(3),u=n(62),c=function(e){function t(t,n){var a=e.call(this,null,n)||this;return a.hls=t,a.getPlayerName=function(){return l.Player.HLSJS},a.getPlayerVersion=function(){return a.hls.constructor.version},a.isLive=function(){var e=a.hls;if(!e.levels||!e.currentLevel)return!1;if(e.currentLevel<0)return!1;var t=e.levels[e.currentLevel];return!!t&&t.details.live},a.resetMedia(),a.speedMeter=new u.HlsSpeedMeterAdapter(t,new o.DownloadSpeedMeter).getDownloadSpeedMeter(),a}return i(t,e),Object.defineProperty(t.prototype,"downloadSpeedInfo",{get:function(){return this.speedMeter.getInfo()},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){e.prototype.initialize.call(this),this.registerHlsEvents()},t.prototype.clearValues=function(){this.speedMeter.reset()},t.prototype.getCurrentQualityLevelInfo=function(){if(!this.hls.levels)return null;var e=this.hls.levels[this.hls.currentLevel];return e?{bitrate:e.bitrate,width:e.width,height:e.height}:null},t.prototype.getMIMEType=function(){return E.MIMETypes.HLS},t.prototype.getStreamURL=function(){return this.hls.url},t.prototype.registerHlsEvents=function(){var e=this.hls;e.on(e.constructor.Events.MEDIA_ATTACHING,this.onMediaAttaching.bind(this)),e.on(e.constructor.Events.MEDIA_DETACHING,this.onMediaDetaching.bind(this)),e.on(e.constructor.Events.MANIFEST_LOADING,this.onManifestLoading.bind(this)),e.on(e.constructor.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched.bind(this)),e.on(e.constructor.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleLanguageSwitched.bind(this)),e.on(e.constructor.Events.ERROR,this.onHlsError.bind(this)),e.media&&(this.onMediaAttaching(),this.onManifestLoading())},t.prototype.onMediaAttaching=function(){this.mediaElement||(this.mediaElement=this.hls.media,this.registerMediaElement(),this.onMaybeReady())},t.prototype.onMediaDetaching=function(){this.unregisterMediaElement()},t.prototype.onManifestLoading=function(){this.onMaybeReady()},t.prototype.getCurrentPlaybackInfo=function(){var t=this.getSelectedSubtitleLanguage();return r({},e.prototype.getCurrentPlaybackInfo.call(this),{audioLanguage:this.getSelectedAudioLanguage(),subtitleEnabled:null!=t?t.enabled:void 0,subtitleLanguage:null!=t?t.language:void 0})},t.prototype.onHlsError=function(e,t){if(!t||t.fatal){var n=this.mediaElement,a=void 0;null!=n&&(a=n.currentTime);var i=t?t.type+": "+t.details:null;this.eventCallback(s.Event.ERROR,{currentTime:a,code:this.getErrorCodeFromHlsErrorType(t.type),message:i})}},t.prototype.onAudioTrackSwitched=function(e,t){var n,a=this.mediaElement;null!=a&&(n=a.currentTime),this.eventCallback(s.Event.AUDIOTRACK_CHANGED,{currentTime:n})},t.prototype.onSubtitleLanguageSwitched=function(e,t){var n,a=this.mediaElement;null!=a&&(n=a.currentTime),this.eventCallback(s.Event.SUBTITLE_CHANGE,{currentTime:n})},t.prototype.getErrorCodeFromHlsErrorType=function(e){switch(e){case"networkError":return 2;case"mediaError":return 3;case"keySystemError":return 4;case"muxError":return 5;default:return 1}},t.prototype.getSelectedAudioLanguage=function(){if(!(null==this.hls.audioTrack||this.hls.audioTrack<0))return this.hls.audioTracks[this.hls.audioTrack].lang},t.prototype.getSelectedSubtitleLanguage=function(){if(null!=this.hls.subtitleDisplay){var e=this.hls.subtitleTrack>=0&&!0===this.hls.subtitleDisplay;return{enabled:e,language:e?this.hls.subtitleTracks[this.hls.subtitleTrack].lang:void 0}}var t=this.hls.subtitleTrackController;if(null!=t&&null!=t.media)return this.getSelectedSubtitleFromMediaElement(t.media)},t}(n(13).HTML5InternalAdapter);t.HlsInternalAdapter=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=this;this.meter=t,e.on(e.constructor.Events.FRAG_LOADED,function(e,t){return n.handleFragmentLoadedEvent(t)})}return e.prototype.getDownloadSpeedMeter=function(){return this.meter},e.prototype.handleFragmentLoadedEvent=function(e){"main"===e.frag.type&&this.meter.addMeasurement({duration:(e.stats.tload-e.stats.trequest)/1e3,size:e.stats.total,timeToFirstByte:(e.stats.tfirst-e.stats.trequest)/1e3,timestamp:new Date,httpStatus:e.networkDetails.status})},e}();t.HlsSpeedMeterAdapter=a},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(6),s=n(64),E=function(e){function t(t,n,a){var i=e.call(this)||this;return i.internalAdapter=new s.HTMLVideoElementInternalAdapter(n,a),i.analytics=new r.Analytics(t,i.internalAdapter),i}return i(t,e),t}(o.Adapter);t.HTMLVideoElementAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(0),s=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.getPlayerName=function(){return r.Player.HTML5},a.getPlayerVersion=function(){var e=o.getBrowserInfo();return e.name+" "+e.version},a}return i(t,e),t.prototype.getStreamURL=function(){return this.mediaElement?this.mediaElement.currentSrc:void 0},t.prototype.getCurrentQualityLevelInfo=function(){return{bitrate:void 0,width:this.mediaElement?this.mediaElement.videoWidth:void 0,height:this.mediaElement?this.mediaElement.videoHeight:void 0}},t}(n(13).HTML5InternalAdapter);t.HTMLVideoElementInternalAdapter=s},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(6),s=n(66),E=function(e){function t(t,n,a){var i=e.call(this)||this;return i.internalAdapter=new s.ShakaInternalAdapter(n,a),i.analytics=new r.Analytics(t,i.internalAdapter),i}return i(t,e),t}(o.Adapter);t.ShakaAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=n(3),s=function(e){function t(t,n){var a=e.call(this,t.getMediaElement(),n)||this;return a.player=t,a.getPlayerName=function(){return o.Player.SHAKA},a.getPlayerVersion=function(){return a.player.constructor.version},a.isLive=function(){return!!a.player&&a.player.isLive()},a}return i(t,e),t.prototype.initialize=function(){var e,t=this;n.prototype.initialize.call(this);try{e=this.player.getMediaElement()}catch(n){}if(null==e){var a=function(n){"media-source"===n.state&&(t.player.removeEventListener("onstatechange",a),e=t.player.getMediaElement(),t.setMediaElement(e))};this.player.addEventListener("onstatechange",a)}else this.setMediaElement(e)},t.prototype.getMIMEType=function(){return r.MIMETypes.DASH},t.prototype.getStreamURL=function(){return this.player?this.player.getAssetUri():null},t.prototype.getCurrentQualityLevelInfo=function(){var e=this.player.getVariantTracks().filter(function(e){return e.active}).filter(function(e){return e.videoCodec||void 0!==e.videoId})[0];return e?{bitrate:e.videoBandwidth||e.bandwidth,width:e.width,height:e.height}:null},t}(n(13).HTML5InternalAdapter);t.ShakaInternalAdapter=s},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(6),s=n(68),E=function(e){function t(t,n,a){var i=e.call(this)||this;return i.internalAdapter=new s.VideojsInternalAdapter(n,a),i.analytics=new r.Analytics(t,i.internalAdapter),i}return i(t,e),t}(o.Adapter);t.VideojsAdapter=E},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(69),s=n(15),E=n(2),l=n(7),u=n(3),c=n(8),d=n(21),A=n(70),m=function(e){function t(t,n){var a=e.call(this,n)||this;return a.player=t,a._subtitleInfo={enabled:!1},a.onBeforeUnLoadEvent=!1,a.previousTime=0,a.getPlayerVersion=function(){return window.videojs?window.videojs.VERSION:"unknown"},a.getPlayerName=function(){return u.Player.VIDEOJS},a.getPlayerTech=function(){return"html5"},a.getAutoPlay=function(){return 1==a.player.autoplay()},a.getDrmPerformanceInfo=function(){return a.drmPerformanceInfo},a.stateMachine=new o.VideojsAnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.videoCompletionTracker=new s["default"],a}return i(t,e),t.prototype.initialize=function(){this.register()},t.prototype.getStreamType=function(e){var t=l.getMIMETypeFromFileExtension(e);if(t)return d.getStreamTypeFromMIMEType(t)},t.prototype.getStreamSources=function(e){switch(this.getStreamType(e)){case"hls":return{m3u8Url:e};case"dash":return{mpdUrl:e};default:return{progUrl:e}}},t.prototype.getCurrentPlaybackInfo=function(){this.selectedAudioLanguage=this.getSelectedAudioTrackLanguage(this.player);var e=r({},this.getCommonPlaybackInfo(),this.getStreamSources(this.player.currentSrc()),{streamFormat:this.getStreamType(this.player.currentSrc()),isLive:this.player.duration()===1/0,size:this.player.isFullscreen()?c.PlayerSize.Fullscreen:c.PlayerSize.Window,playerTech:this.getPlayerTech(),isMuted:this.player.muted(),videoDuration:this.player.duration(),videoWindowHeight:this.player.height(),videoWindowWidth:this.player.width(),videoPlaybackHeight:this.player.videoHeight(),videoPlaybackWidth:this.player.videoWidth(),audioLanguage:this.selectedAudioLanguage,subtitleEnabled:this._subtitleInfo.enabled,subtitleLanguage:this._subtitleInfo.language,droppedFrames:0}),t=this.getCurrentQualityLevelInfo();return t&&(e.videoPlaybackWidth=t.width||e.videoPlaybackWidth,e.videoPlaybackWidth=t.height||e.videoPlaybackHeight,e.videoBitrate=t.bitrate),e},t.prototype.getCurrentQualityLevelInfo=function(){return null},t.prototype.register=function(){var e=this,t=this;this.player.on("loadedmetadata",function(){t.videoCompletionTracker.reset(),t.videoCompletionTracker.setVideoDuration(this.duration()),t.previousTime=0,t.eventCallback(E.Event.SOURCE_LOADED,{})}),this.player.ready(function(){t._subtitleInfo=t.getSubtitleInfo(this),t.eventCallback(E.Event.READY,{})}),this.player.on("play",function(){t.eventCallback(E.Event.PLAY,{currentTime:this.currentTime()})}),this.player.on("pause",function(){this.seeking()||t.eventCallback(E.Event.PAUSE,{currentTime:this.currentTime()})}),this.player.on("error",function(){var e=this.error();t.eventCallback(E.Event.ERROR,{currentTime:this.currentTime(),code:e.code,message:e.message})}),this.player.on("volumechange",function(){this.muted()?t.eventCallback(E.Event.MUTE,{currentTime:this.currentTime()}):t.eventCallback(E.Event.UN_MUTE,{currentTime:this.currentTime()})}),this.player.on("seeking",function(){t.eventCallback(E.Event.SEEK,{currentTime:null!=t.previousTime?t.previousTime:this.currentTime()})}),this.player.on("seeked",function(){t.eventCallback(E.Event.SEEKED,{currentTime:this.currentTime()})}),this.player.on("texttrackchange",function(){var e=t.getSubtitleInfo(this),n=null==t._subtitleInfo||A.isDifferentSubtitleInfo(t._subtitleInfo,e);t._subtitleInfo=e,n&&t.eventCallback(E.Event.SUBTITLE_CHANGE,{currentTime:this.currentTime()})}),this.player.audioTracks().on("change",function(){var e=t.getSelectedAudioTrackLanguage(t.player);null!=e&&e!==t.selectedAudioLanguage&&t.eventCallback(E.Event.AUDIOTRACK_CHANGED,{currentTime:t.player.currentTime()})}),this.player.on("stalled",function(){t.eventCallback(E.Event.START_BUFFERING,{currentTime:this.currentTime()})}),this.player.on("waiting",function(){t.eventCallback(E.Event.START_BUFFERING,{currentTime:this.currentTime()})}),this.player.on("timeupdate",function(){this.seeking()||(t.previousTime=this.currentTime()),t.eventCallback(E.Event.TIMECHANGED,{currentTime:this.currentTime()});var e=this.tech_.hls?this.tech_.hls.playlists.media():null;if(e){var n=e.attributes,a=n.BANDWIDTH,i=(n.RESOLUTION||{}).width,r=(n.RESOLUTION||{}).height;if(t.shouldAllowVideoQualityChange(a)){var o={width:i,height:r,bitrate:a,currentTime:this.currentTime()};t.eventCallback(E.Event.VIDEO_CHANGE,o),t.setPreviousVideoBitrate(a)}if(this.tech({IWillNotUseThisInPlugins:!0}).hls){var s=this.tech_.hls;if(!s.playlists||"function"!=typeof s.playlists.media)return;var l=s.playlists.media();if(!l)return;var u=l.attributes,c=u.BANDWIDTH,d=(u.RESOLUTION||{}).width,A=(u.RESOLUTION||{}).height;t.shouldAllowVideoQualityChange(c)&&(o={width:d,height:A,bitrate:c,currentTime:this.currentTime()},t.eventCallback(E.Event.VIDEO_CHANGE,o),t.setPreviousVideoBitrate(c))}}});var n=function(){e.onBeforeUnLoadEvent||(e.onBeforeUnLoadEvent=!0,e.eventCallback(E.Event.UNLOAD,{currentTime:e.player.currentTime()}))};window.addEventListener("beforeunload",n),window.addEventListener("unload",n)},t.prototype.sourceChange=function(e,t){this.videoCompletionTracker.reset(),this.videoCompletionTracker.setVideoDuration(this.player.duration()),this.previousTime=0,this.stateMachine.sourceChange(e,t,this.player.currentTime())},t.prototype.getSelectedAudioTrackLanguage=function(e){for(var t=0,n=e.audioTracks();t<n.length;t++){var a=n[t];if(a.enabled)return a.language}},t.prototype.getSubtitleInfo=function(e){for(var t,n=!1,a=0,i=e.textTracks()||[];a<i.length;a++){var r=i[a];if("showing"===r.mode){n=!0,t=r.language;break}}return{enabled:n,language:t}},t}(n(12).InternalAdapter);t.VideojsInternalAdapter=m},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(10),s=n(2),E=n(14),l=n(1),u=n(4),c=n(0),d=n(11);!function(e){e.AD="AD",e.SETUP="SETUP",e.STARTUP="STARTUP",e.READY="READY",e.PLAYING="PLAYING",e.REBUFFERING="REBUFFERING",e.PAUSE="PAUSE",e.QUALITYCHANGE="QUALITYCHANGE",e.PAUSED_SEEKING="PAUSED_SEEKING",e.PLAY_SEEKING="PLAY_SEEKING",e.END_PLAY_SEEKING="END_PLAY_SEEKING",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.SOURCE_CHANGING="SOURCE_CHANGING",e.END="END",e.ERROR="ERROR",e.MUTING_READY="MUTING_READY",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_PAUSE="MUTING_PAUSE",e.CASTING="CASTING",e.AUDIOTRACK_CHANGING="AUDIOTRACK_CHANGING",e.AUDIOTRACK_CHANGED_PLAYING="AUDIOTRACK_CHANGED_PLAYING",e.SUBTITLE_CHANGING="SUBTITLE_CHANGING",e.SUBTITLE_CHANGED_PLAYING="SUBTITLE_CHANGED_PLAYING",e.EXIT_BEFORE_VIDEOSTART="EXIT_BEFORE_VIDEOSTART"}(r||(r={}));var A=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.sourceChange=function(e,t,n){a.callEvent(s.Event.MANUAL_SOURCE_CHANGE,{config:e,currentTime:n},t)},a.seekTimestamp=0,a.seekedTimestamp=0,a.seekedTimeout=0,a}return i(t,e),t.prototype.getAllStates=function(){return Object.keys(r).map(function(e){return r[e]}).concat(["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])},t.prototype.getAllStatesBut=function(e){return this.getAllStates().filter(function(t){return t!==e})},t.prototype.createStateMachine=function(e){var t=this;return o.create({initial:r.SETUP,error:function(e,t,n,a,i,r){l.logger.error("Error in statemachine: "+r)},events:[{name:s.Event.SOURCE_LOADED,from:[r.SETUP,r.ERROR,r.SOURCE_CHANGING],to:r.READY},{name:s.Event.TIMECHANGED,from:r.SETUP,to:r.SETUP},{name:s.Event.SOURCE_LOADED,from:r.READY,to:r.READY},{name:s.Event.READY,from:[r.SETUP,r.ERROR],to:r.READY},{name:s.Event.PLAY,from:r.READY,to:r.STARTUP},{name:s.Event.ERROR,from:r.STARTUP,to:r.EXIT_BEFORE_VIDEOSTART},{name:s.Event.UNLOAD,from:r.STARTUP,to:r.EXIT_BEFORE_VIDEOSTART},{name:s.Event.VIDEOSTART_TIMEOUT,from:r.STARTUP,to:r.EXIT_BEFORE_VIDEOSTART},{name:s.Event.START_BUFFERING,from:r.STARTUP,to:r.STARTUP},{name:s.Event.END_BUFFERING,from:r.STARTUP,to:r.STARTUP},{name:s.Event.VIDEO_CHANGE,from:r.STARTUP,to:r.STARTUP},{name:s.Event.AUDIO_CHANGE,from:r.STARTUP,to:r.STARTUP},{name:s.Event.TIMECHANGED,from:r.STARTUP,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.PLAYING,to:r.PLAYING},{name:s.Event.END_BUFFERING,from:r.PLAYING,to:r.PLAYING},{name:s.Event.START_BUFFERING,from:r.PLAYING,to:r.REBUFFERING},{name:s.Event.START_BUFFERING,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.TIMECHANGED,from:r.REBUFFERING,to:r.PLAYING},{name:s.Event.SEEK,from:r.STARTUP,to:r.STARTUP},{name:s.Event.SEEK,from:r.PLAYING,to:r.PLAY_SEEKING},{name:s.Event.TIMECHANGED,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.TIMECHANGED,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.PAUSE,from:r.PLAYING,to:r.PAUSE},{name:s.Event.PAUSE,from:r.REBUFFERING,to:r.PAUSE},{name:s.Event.TIMECHANGED,from:r.PAUSE,to:r.PAUSE},{name:s.Event.PLAY,from:r.PAUSE,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PLAYING,to:r.QUALITYCHANGE},{name:s.Event.AUDIO_CHANGE,from:r.PLAYING,to:r.QUALITYCHANGE},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE,to:r.QUALITYCHANGE},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE,to:r.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:r.QUALITYCHANGE,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.AUDIO_CHANGE,from:r.PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE_PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE_PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:r.QUALITYCHANGE_PAUSE,to:r.PAUSE},{name:s.Event.SEEK,from:r.PAUSE,to:r.PAUSED_SEEKING},{name:s.Event.SEEK,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.AUDIO_CHANGE,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.VIDEO_CHANGE,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.START_BUFFERING,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.END_BUFFERING,from:r.PAUSED_SEEKING,to:r.PAUSED_SEEKING},{name:s.Event.SEEKED,from:r.PAUSED_SEEKING,to:r.PAUSE},{name:s.Event.PLAY,from:r.PAUSED_SEEKING,to:r.PLAYING},{name:s.Event.PAUSE,from:r.PAUSED_SEEKING,to:r.PAUSE},{name:"PLAY_SEEK",from:r.PAUSE,to:r.PLAY_SEEKING},{name:"PLAY_SEEK",from:r.PAUSED_SEEKING,to:r.PLAY_SEEKING},{name:"PLAY_SEEK",from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.SEEK,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.AUDIO_CHANGE,from:r.PLAY_SEEKING,
to:r.PLAY_SEEKING},{name:s.Event.VIDEO_CHANGE,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.START_BUFFERING,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.END_BUFFERING,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.SEEKED,from:r.PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.SEEKED,from:r.PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.START_BUFFERING,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.END_BUFFERING,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.SEEKED,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.TIMECHANGED,from:r.END_PLAY_SEEKING,to:r.PLAYING},{name:s.Event.END,from:r.PLAY_SEEKING,to:r.END},{name:s.Event.END,from:r.PAUSED_SEEKING,to:r.END},{name:s.Event.END,from:r.PLAYING,to:r.END},{name:s.Event.END,from:r.PAUSE,to:r.END},{name:s.Event.SEEK,from:r.END,to:r.END},{name:s.Event.SEEKED,from:r.END,to:r.END},{name:s.Event.TIMECHANGED,from:r.END,to:r.END},{name:s.Event.END_BUFFERING,from:r.END,to:r.END},{name:s.Event.START_BUFFERING,from:r.END,to:r.END},{name:s.Event.END,from:r.END,to:r.END},{name:s.Event.SEEKED,from:r.PLAYING,to:r.PLAYING},{name:s.Event.PLAY,from:r.END,to:r.PLAYING},{name:s.Event.ERROR,from:this.getAllStatesBut(r.STARTUP),to:r.ERROR},{name:s.Event.PAUSE,from:r.ERROR,to:r.ERROR},{name:s.Event.SEEK,from:r.END_PLAY_SEEKING,to:r.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:r.END_PLAY_SEEKING,to:r.PLAYING},{name:s.Event.UNLOAD,from:this.getAllStatesBut(r.STARTUP),to:r.END},{name:s.Event.START_AD,from:r.PLAYING,to:r.AD},{name:s.Event.END_AD,from:r.AD,to:r.PLAYING},{name:s.Event.MUTE,from:r.READY,to:r.MUTING_READY},{name:s.Event.UN_MUTE,from:r.READY,to:r.MUTING_READY},{name:"FINISH_MUTING",from:r.MUTING_READY,to:r.READY},{name:s.Event.MUTE,from:r.PLAYING,to:r.MUTING_PLAY},{name:s.Event.UN_MUTE,from:r.PLAYING,to:r.MUTING_PLAY},{name:"FINISH_MUTING",from:r.MUTING_PLAY,to:r.PLAYING},{name:s.Event.MUTE,from:r.PAUSE,to:r.MUTING_PAUSE},{name:s.Event.UN_MUTE,from:r.PAUSE,to:r.MUTING_PAUSE},{name:"FINISH_MUTING",from:r.MUTING_PAUSE,to:r.PAUSE},{name:s.Event.START_CAST,from:[r.READY,r.PAUSE],to:r.CASTING},{name:s.Event.PAUSE,from:r.CASTING,to:r.CASTING},{name:s.Event.PLAY,from:r.CASTING,to:r.CASTING},{name:s.Event.TIMECHANGED,from:r.CASTING,to:r.CASTING},{name:s.Event.MUTE,from:r.CASTING,to:r.CASTING},{name:s.Event.SEEK,from:r.CASTING,to:r.CASTING},{name:s.Event.SEEKED,from:r.CASTING,to:r.CASTING},{name:s.Event.END_CAST,from:r.CASTING,to:r.READY},{name:s.Event.SEEK,from:r.READY,to:r.READY},{name:s.Event.SEEKED,from:r.READY,to:r.READY},{name:s.Event.SEEKED,from:r.STARTUP,to:r.STARTUP},{name:s.Event.AUDIOTRACK_CHANGED,from:r.PLAYING,to:r.AUDIOTRACK_CHANGED_PLAYING},{name:"FINISH_AUDIOTRACK_CHANGING",from:r.AUDIOTRACK_CHANGED_PLAYING,to:r.PLAYING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.PAUSE,to:r.PAUSE},{name:s.Event.AUDIOTRACK_CHANGED,from:r.READY,to:r.READY},{name:s.Event.AUDIOTRACK_CHANGED,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.AUDIOTRACK_CHANGING,to:r.AUDIOTRACK_CHANGING},{name:s.Event.SUBTITLE_CHANGE,from:r.PLAYING,to:r.SUBTITLE_CHANGED_PLAYING},{name:"FINISH_SUBTITLE_CHANGING",from:r.SUBTITLE_CHANGED_PLAYING,to:r.PLAYING},{name:s.Event.SUBTITLE_CHANGE,from:r.PAUSE,to:r.PAUSE},{name:s.Event.SUBTITLE_CHANGE,from:r.READY,to:r.READY},{name:s.Event.SUBTITLE_CHANGE,from:r.REBUFFERING,to:r.REBUFFERING},{name:s.Event.SUBTITLE_CHANGE,from:r.END_PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.SUBTITLE_CHANGE,from:r.SUBTITLE_CHANGING,to:r.SUBTITLE_CHANGING},{name:s.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStatesBut(r.SETUP),to:r.SOURCE_CHANGING},{name:s.Event.MANUAL_SOURCE_CHANGE,from:r.SETUP,to:r.SETUP},{name:s.Event.TIMECHANGED,from:r.SOURCE_CHANGING,to:r.SOURCE_CHANGING},{name:s.Event.VIDEO_CHANGE,from:r.REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.AUDIO_CHANGE,from:r.REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.VIDEO_CHANGE,from:r.QUALITYCHANGE_REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.AUDIO_CHANGE,from:r.QUALITYCHANGE_REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:r.QUALITYCHANGE_REBUFFERING,to:r.REBUFFERING}],callbacks:{onafterevent:function(e,n,a,i){a===r.QUALITYCHANGE&&t.stateMachine.FINISH_QUALITYCHANGE(i),a!==r.MUTING_READY&&a!==r.MUTING_PLAY&&a!==r.MUTING_PAUSE||t.stateMachine.FINISH_MUTING(i),a===r.AUDIOTRACK_CHANGED_PLAYING&&t.stateMachine.FINISH_AUDIOTRACK_CHANGING(i),a===r.SUBTITLE_CHANGED_PLAYING&&t.stateMachine.FINISH_SUBTITLE_CHANGING(i)},onenterstate:function(n,a,i,o,E){"none"===a&&e.starttime?t.onEnterStateTimestamp=e.starttime:t.onEnterStateTimestamp=o||(new Date).getTime(),l.logger.log("[ENTER] "+l.padRight(i,20)+"EVENT: "+l.padRight(n,20)+" from "+l.padRight(a,14)),E&&i!==r.PAUSED_SEEKING&&i!==r.PLAY_SEEKING&&i!==r.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(E),n===s.Event.SEEK&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(E),n===s.Event.SEEKED&&t.stateMachineCallbacks.setVideoTimeEndFromEvent(E),"PLAY_SEEK"===n&&i===r.PLAY_SEEKING&&i!==r.PLAY_SEEKING&&i!==r.END_PLAY_SEEKING&&(t.seekTimestamp=t.onEnterStateTimestamp),n===s.Event.START_CAST&&i===r.CASTING&&t.stateMachineCallbacks.startCasting(o,E),i===r.REBUFFERING&&t.startRebufferingHeartbeatInterval()},onleavestate:function(e,n,a,i,o){if(n===r.REBUFFERING&&t.resetRebufferingHelpers(),i){l.logger.log("[LEAVE] "+l.padRight(n,20)+" EVENT: "+l.padRight(e,20)+" to "+l.padRight(a,20));var E=i-t.onEnterStateTimestamp;if(o&&a!==r.PAUSED_SEEKING&&a!==r.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeEndFromEvent(o),"PLAY_SEEK"===e&&n===r.PAUSE)return!0;n===r.READY&&a===r.STARTUP?t.setVideoStartTimeout():n!==r.STARTUP||a!==r.PLAYING&&a!==r.EXIT_BEFORE_VIDEOSTART||t.clearVideoStartTimeout();var u=String(n).toLowerCase();if(a===r.EXIT_BEFORE_VIDEOSTART){t.clearVideoStartTimeout();var c=t.getReasonForVideoStartFailure(e),d=e!==s.Event.ERROR;t.stateMachineCallbacks.videoStartFailed({timestamp:i,reason:c},d)}else if(n===r.PAUSED_SEEKING){var A=i-t.seekTimestamp;t.stateMachineCallbacks.paused_seeking(A,u,o)}else if(n===r.END_PLAY_SEEKING)A=t.seekedTimestamp-t.seekTimestamp,t.stateMachineCallbacks.end_play_seeking(A,u,o);else if(e===s.Event.UNLOAD)t.stateMachineCallbacks.unload(E,u,o);else if(n===r.PAUSE&&a!==r.PAUSED_SEEKING)t.stateMachineCallbacks.setVideoTimeStartFromEvent(e),t.stateMachineCallbacks.pause(E,u,o);else{var m=t.stateMachineCallbacks[u];"function"==typeof m?m(E,u,o):null==[r.MUTING_PAUSE,r.MUTING_PLAY,r.AUDIOTRACK_CHANGED_PLAYING,r.SUBTITLE_CHANGED_PLAYING].find(function(e){return n===e})&&l.logger.error("Could not find callback function for "+u)}o&&a!==r.PAUSED_SEEKING&&a!==r.PLAY_SEEKING&&a!==r.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(o),e===s.Event.VIDEO_CHANGE?t.stateMachineCallbacks.videoChange(o):e===s.Event.AUDIO_CHANGE?t.stateMachineCallbacks.audioChange(o):e===s.Event.MUTE?t.stateMachineCallbacks.mute():e===s.Event.UN_MUTE?t.stateMachineCallbacks.unMute():e===s.Event.MANUAL_SOURCE_CHANGE&&t.stateMachineCallbacks.manualSourceChange(o)}},onseek:function(e,n,a,i){t.seekTimestamp=i},onseeked:function(e,n,a,i){t.seekedTimestamp=i},ontimechanged:function(e,n,a,i,r){var o=i-t.onEnterStateTimestamp;o>59700&&(t.stateMachineCallbacks.setVideoTimeEndFromEvent(r),t.stateMachineCallbacks.heartbeat(o,String(n).toLowerCase(),{played:o}),t.onEnterStateTimestamp=i,t.stateMachineCallbacks.setVideoTimeStartFromEvent(r))},onplayerError:function(e,n,a,i,r){t.stateMachineCallbacks.error(r)}}})},t.prototype.callEvent=function(e,t,n){var a=this.stateMachine[e];a?a.call(this.stateMachine,n,t):l.logger.log("Ignored Event: "+e)},t.prototype.getReasonForVideoStartFailure=function(e){switch(e){case s.Event.ERROR:return E.VideoStartFailedReason.PlayerError;case s.Event.UNLOAD:return E.VideoStartFailedReason.PageClosed;case s.Event.VIDEOSTART_TIMEOUT:return E.VideoStartFailedReason.Timeout;default:return E.VideoStartFailedReason.Unknown}},t.prototype.setVideoStartTimeout=function(){var e=this;null!=this.videoStartTimeout&&this.clearVideoStartTimeout(),this.videoStartTimeout=window.setTimeout(function(){e.callEvent(s.Event.VIDEOSTART_TIMEOUT,{},c.getCurrentTimestamp())},u.ANALYTICS_VIDEOSTART_TIMEOUT)},t.prototype.clearVideoStartTimeout=function(){window.clearTimeout(this.videoStartTimeout),this.videoStartTimeout=void 0},t}(d.AnalyticsStateMachine);t.VideojsAnalyticsStateMachine=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDifferentSubtitleInfo=function(e,t){return!(null==e&&null==t||null!=e&&null!=t&&e.enabled===t.enabled&&e.language===t.language)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CLOUDFLARE="cloudflare",e.AKAMAI="akamai",e.FASTLY="fastly",e.MAXCDN="maxcdn",e.CLOUDFRONT="cloudfront",e.CHINACACHE="chinacache",e.BITGRAVITY="bitgravity"}(t.CdnProvider||(t.CdnProvider={}))}])})},392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(228);t["default"]=a["default"].PlayerModule}},[392])});
})();
