/**************************************************************************** 
 * Copyright (C) 2021, Bitmovin, Inc., All Rights Reserved 
 * 
 * This source code and its use and distribution, is subject to the terms 
 * and conditions of the applicable license agreement. 
 * 
 * Bitmovin Player Version 8.60.0 
 * 
 ****************************************************************************/
(function() {
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.hls=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.player=t.bitmovin.player||{},t.bitmovin.player.hls=e())}(this,function(){return webpackJsonpbitmovin_player__name_([8],{141:function(t,e,n){"use strict";function i(t){var e="";return t.RESOLUTION&&(e+=t.RESOLUTION.height+"_"),e+=t.BANDWIDTH}var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(62),o=n(27),u=function(){function t(){var t=this;this.on=function(e,n){t.listeners.hasOwnProperty(e)||(t.listeners[e]=[]),t.listeners[e].push(n)},this.off=function(e,n){if(!t.listeners.hasOwnProperty(e))return!1;var i=t.listeners[e].indexOf(n);return i>-1&&(t.listeners[e].splice(i,1),!0)},this.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.listeners.hasOwnProperty(e)&&t.listeners[e].forEach(function(t){return t.apply(null,n)})},this.pipe=function(e){t.on("data",function(t){e.push(t)})},this.dispose=function(){t.listeners={}},this.listeners={}}return t}(),c=function(t){function e(){var e=t.call(this)||this;return e.buffer="",e}return r(e,t),e.prototype.push=function(t){this.buffer+=t;for(var e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(u),l=function(t){function e(){return t.call(this)||this}return r(e,t),e.parseAttributes=function(t){for(var n=t.split(e.attributeSeparator),i=n.length,r={};i--;)if(""!==n[i]){var a=/([^=]*)=(.*)/.exec(n[i]).slice(1);a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),r[a[0]]=a[1]}return r},e.prototype.push=function(t){var n,i;if(t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),0!==t.length){if("#"!==t[0])return void this.trigger("data",{type:"uri",uri:t});if(t=t.replace("\r",""),n=/^#EXTM3U/.exec(t))return void this.trigger("data",{type:"tag",tagType:"m3u"});if(n=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(t))return void this.trigger("data",{type:"tag",tagType:"independent-segments"});if(n=/^#EXT-X-MEDIA:(.*)$/.exec(t))return i={type:"tag",tagType:"media"},n[1]&&(i.attributes=e.parseAttributes(n[1])),void this.trigger("data",i);if(n=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",tagType:"inf"},n[1]&&(i.duration=parseFloat(n[1])),n[2]&&(i.title=n[2]),void this.trigger("data",i);if(n=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"targetduration"},n[1]&&(i.duration=parseInt(n[1],10)),void this.trigger("data",i);if(n=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"version"},n[1]&&(i.version=parseInt(n[1],10)),void this.trigger("data",i);if(n=/^#EXT-X-START:(.*)$/.exec(t))return i={type:"tag",tagType:"start"},n[1]&&(i.attributes=e.parseAttributes(n[1])),void this.trigger("data",i);if(n=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"media-sequence"},n[1]&&(i.number=parseInt(n[1],10)),void this.trigger("data",i);if(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(i.number=parseInt(n[1],10)),void this.trigger("data",i);if(n=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",tagType:"playlist-type"},n[1]&&(i.playlistType=n[1]),void this.trigger("data",i);if(n=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"byterange"},n[1]&&(i.length=parseInt(n[1],10)),n[2]&&(i.offset=parseInt(n[2],10)),void this.trigger("data",i);if(n=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",tagType:"allow-cache"},n[1]&&(i.allowed=!/NO/.test(n[1])),void this.trigger("data",i);if(n=/^#EXT-X-SESSION-DATA:?(.*)$/.exec(t))return i={type:"tag",tagType:"session-data"},n[1]&&(i.attributes=e.parseAttributes(n[1])),void this.trigger("data",i);if(n=/^#EXT-X-SESSION-KEY:?(.*)$/.exec(t))return i={type:"tag",tagType:"session-key"},n[1]&&(i.attributes=e.parseAttributes(n[1]),i.attributes.IV&&(i.attributes.IV=i.attributes.IV.toLowerCase(),"0x"===i.attributes.IV.substring(0,2)&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=new Uint8Array(o.FormatHelper.hexToBytes(i.attributes.IV)).buffer)),void this.trigger("data",i);if(n=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"stream-inf"},n[1]){if(i.attributes=e.parseAttributes(n[1]),i.attributes.RESOLUTION){var r=i.attributes.RESOLUTION.split("x"),a={};r[0]&&(a.width=parseInt(r[0],10)),r[1]&&(a.height=parseInt(r[1],10)),i.attributes.RESOLUTION=a}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["AVERAGE-BANDWIDTH"]&&(i.attributes["AVERAGE-BANDWIDTH"]=parseInt(i.attributes["AVERAGE-BANDWIDTH"],10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}return void this.trigger("data",i)}if(n=/^#EXT-X-I-FRAME-STREAM-INF:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"i-frame-stream-inf"},n[1]&&(i.attributes=e.parseAttributes(n[1]),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["AVERAGE-BANDWIDTH"]&&(i.attributes["AVERAGE-BANDWIDTH"]=parseInt(i.attributes["AVERAGE-BANDWIDTH"],10)),i.attributes.RESOLUTION)){var r=i.attributes.RESOLUTION.split("x"),a={};r[0]&&(a.width=parseInt(r[0],10)),r[1]&&(a.height=parseInt(r[1],10)),i.attributes.RESOLUTION=a}return void this.trigger("data",i)}return(n=/^#EXT-X-ENDLIST/.exec(t))?void this.trigger("data",{type:"tag",tagType:"endlist"}):(n=/^#EXT-X-DISCONTINUITY/.exec(t))?void this.trigger("data",{type:"tag",tagType:"discontinuity"}):(n=/^#EXT-X-KEY:?(.*)$/.exec(t))?(i={type:"tag",tagType:"key"},n[1]&&(i.attributes=e.parseAttributes(n[1]),i.attributes.IV&&(i.attributes.IV=i.attributes.IV.toLowerCase(),"0x"===i.attributes.IV.substring(0,2)&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=new Uint8Array(o.FormatHelper.hexToBytes(i.attributes.IV)).buffer)),void this.trigger("data",i)):(n=/^#EXT-X-MAP:?(.*)$/.exec(t))?(i={type:"tag",tagType:"map"},n[1]&&(i.attributes=e.parseAttributes(n[1])),void this.trigger("data",i)):(n=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))?(i={type:"tag",tagType:"date-time"},n[1]&&(i.dateTime=new Date(n[1])),void this.trigger("data",i)):(n=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))?void this.trigger("data",{type:"tag",tagType:"cue-out-cont",data:n[1]||""}):(n=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))?void this.trigger("data",{type:"tag",tagType:"cue-out",data:n[1]||""}):(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))?void this.trigger("data",{type:"tag",tagType:"cue-in",data:n[1]||""}):(n=/^#EXT-X-SCTE35:?(.*)?$/.exec(t))?void this.trigger("data",{type:"tag",tagType:"scte35",data:n[1]||""}):(n=/^#EXT-X-DATERANGE:?(.*)?$/.exec(t))?void this.trigger("data",{type:"tag",tagType:"daterange",data:n[1]||""}):void this.trigger("data",{type:"tag",tagType:"unknown",data:t.slice(0,t.length)})}},e.attributeSeparator=new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'),e}(u),d=function(t){function e(n){var r=t.call(this)||this;return r.onData=function(t){({tag:function(){(({"allow-cache":function(){r.manifestObj.allowCache=t.allowed,"allowed"in t||(r.trigger("info",{message:"defaulting allowCache to YES"}),r.manifestObj.allowCache=!0)},byterange:function(){var e={};"length"in t&&(r.currentUri.byterange=e,e.length=t.length,"offset"in t||(r.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&(r.currentUri.byterange=e,e.offset=t.offset)},endlist:function(){r.manifestObj.endList=!0},inf:function(){"mediaSequence"in r.manifest||(r.manifestObj.mediaSequence=0,r.trigger("info",{message:"defaulting media sequence to zero"})),t.duration>=0&&(r.currentUri.duration=t.duration),r.manifestObj.segments=r.uris},key:function(){if(!t.attributes)return void r.trigger("warn",{message:"ignoring key declaration without attribute list"});if("NONE"===t.attributes.METHOD)return void(r.keys=[]);if(!t.attributes.URI)return void r.trigger("warn",{message:"ignoring key declaration without URI"});t.attributes.METHOD||r.trigger("warn",{message:"defaulting key method to AES-128"}),r.keysInUse&&(r.keys=[],r.keysInUse=!1);var e={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI};void 0!==t.attributes.IV&&(e.iv=t.attributes.IV),t.attributes.KEYFORMAT&&(e.keyformat=t.attributes.KEYFORMAT),t.attributes.KEYFORMATVERSIONS&&(e.keyformatversions=t.attributes.KEYFORMATVERSIONS),t.attributes.KEYID&&(e.keyid=t.attributes.KEYID),r.keys.push(e)},"media-sequence":function(){return isFinite(t.number)?void(r.manifestObj.mediaSequence=t.number):void r.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){return isFinite(t.number)?void(r.manifestObj.discontinuitySequence=t.number):void r.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){return/VOD|EVENT/.test(t.playlistType)?void(r.manifestObj.playlistType=t.playlistType):void r.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},"stream-inf":function(){return r.manifestObj.playlists=r.uris,t.attributes?(r.currentUri.attributes||(r.currentUri.attributes={}),r.currentUri.id=i(t.attributes),void(r.currentUri.attributes=e.mergeFn(t.attributes,r.currentUri.attributes))):void r.trigger("warn",{message:"ignoring empty stream-inf attributes"})},"i-frame-stream-inf":function(){var e={name:"i-frame-stream-inf"};t.attributes&&(e.attributes=t.attributes),r.manifestObj.tags.push(e)},media:function(){r.manifestObj.media.push({attributes:t.attributes});var e={name:"media"};t.attributes&&(e.attributes=t.attributes),r.manifestObj.tags.push(e)},start:function(){var e={};t.attributes.hasOwnProperty("TIME-OFFSET")&&(e.timeOffset=Number(t.attributes["TIME-OFFSET"]),e.precise="YES"===t.attributes.PRECISE,r.manifestObj.start=e);var n={name:"start"};e.hasOwnProperty("timeOffset")&&(n.attributes={"TIME-OFFSET":e.timeOffset,PRECISE:e.precise}),r.manifestObj.tags.push(n)},discontinuity:function(){r.currentUri.discontinuity=!0,r.manifestObj.discontinuityStarts.push(r.uris.length)},"date-time":function(){r.manifestObj.dateTime=t.dateTime},targetduration:function(){return!isFinite(t.duration)||t.duration<0?void r.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):void(r.manifestObj.targetDuration=t.duration)},map:function(){if(t.attributes&&t.attributes.URI&&(r.init={url:t.attributes.URI},t.attributes.BYTERANGE)){var e=t.attributes.BYTERANGE.split("@"),n=e[0],i=e[1];r.init.byteRange={start:parseInt(i),end:parseInt(i)+parseInt(n)-1}}},"independent-segments":function(){r.manifestObj.independentSegments=!0,r.manifestObj.tags.push({name:"independent-segments"})},"session-data":function(){var e={name:"session-data"};t.attributes&&(e.attributes=t.attributes),r.manifestObj.tags.push(e)},"session-key":function(){var e={name:"session-key"};t.attributes&&(e.attributes=t.attributes),r.manifestObj.tags.push(e)},"cue-out":function(){r.cueTag=e.getCueTag(t)},"cue-out-cont":function(){r.cueTag=e.getCueTag(t)},"cue-in":function(){r.cueTag=e.getCueTag(t)},scte35:function(){r.scte35.push({type:a.MetadataType.SCTE,attributes:l.parseAttributes(t.data)})},daterange:function(){r.dateRange=e.getDateRange(t)},version:function(){r.manifestObj.version=void 0!==t.version?t.version:1},unknown:function(){r.customTags.push({type:a.MetadataType.CUSTOM,attributes:t.data});var e=r.getCustomTag(t.data);e&&r.manifestObj.tags.push(e)}})[t.tagType]||function(){})()},uri:function(){r.currentUri.uri=t.uri,!r.manifestObj.targetDuration||"duration"in r.currentUri||(r.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.currentUri.duration=r.manifestObj.targetDuration),r.keys.length>0&&(r.currentUri.keys=r.keys,r.keysInUse=!0),r.init&&(r.currentUri.init=r.init),r.cueTag&&(r.currentUri.cueTag=r.cueTag,r.cueTag=null),r.scte35.length>0&&(r.currentUri.scte35=r.scte35,r.scte35=[]),r.dateRange&&(r.currentUri.dateRange=r.dateRange,r.dateRange=null),r.customTags.length>0&&(r.currentUri.customTags=r.customTags,r.customTags=[]),r.manifestObj.dateTime&&(r.currentUri.dateTime=r.manifestObj.dateTime,delete r.manifestObj.dateTime),r.uris.push(r.currentUri),r.currentUri.duration&&(r.manifestObj.totalDuration+=r.currentUri.duration),r.currentUri={}},comment:function(){}})[t.type]()},r.end=function(){r.lineStream.push("\n")},r.logger=n,r.uris=[],r.currentUri={},r.keys=[],r.keysInUse=!1,r.cueTag=null,r.scte35=[],r.customTags=[],r.lineStream=new c,r.parseStream=new l,r.lineStream.pipe(r.parseStream),r.manifestObj={allowCache:!0,discontinuityStarts:[],endList:!1,media:[],segments:[],totalDuration:0,tags:[],version:1},r.parseStream.on("data",r.onData),r}return r(e,t),Object.defineProperty(e.prototype,"manifest",{get:function(){return this.manifestObj},enumerable:!0,configurable:!0}),e.getCueTag=function(t){var e={type:t.tagType.toUpperCase()};return t.data&&(e.attributes=t.data.split(",").map(function(t){return t.trim()})),e},e.getDateRange=function(t){var e={type:a.MetadataType.DATERANGE};if(t.data){var n=l.parseAttributes(t.data);e.clientAttributes={};for(var i in n)n.hasOwnProperty(i)&&(0===i.indexOf("X-")?e.clientAttributes[s.StringUtils.kebabCaseToCamelCase(i.substr(2))]=n[i]:e[s.StringUtils.kebabCaseToCamelCase(i)]=n[i])}return e.duration&&(e.duration=Number(e.duration)),e.plannedDuration&&(e.plannedDuration=Number(e.plannedDuration)),e.endOnNext&&(e.endOnNext=!0),e},e.prototype.getCustomTag=function(t){try{var e=/^#([^:=]*)(:|=)?(.*)$/.exec(t);if(e[1]){var n={name:e[1]},i="";if("="===e[2]&&e[3])i=e[3];else if(":"===e[2]&&e[3]){var r=/^([^:="]*)(:|=)?(.*)$/.exec(e[3]);"="===r[2]&&r[3]?n.attributes=l.parseAttributes(e[3]):i=e[3]}return i&&(n.value=i.replace(/^['"](.*)['"]$/g,"$1")),n}}catch(a){return this.logger,null}},e.prototype.push=function(t){this.lineStream.push(t)},e.mergeFn=function(t,n){if("object"!=typeof t||"object"!=typeof n)return t;if(Array.isArray(t)&&Array.isArray(t))return t;for(var i in t)n.hasOwnProperty(i)?n[i]=e.mergeFn(t[i],n[i]):n[i]=t[i];return n},e}(u),p=function(){function t(){}return t.parsePlaylist=function(t,e){var n=new d(e);if(n.push(t),n.end(),"playlists"in n.manifest){var i=n.manifest.playlists.map(function(t){return{name:"stream-inf",value:t.uri,attributes:t.attributes}});n.manifest.tags=n.manifest.tags.concat(i)}return n.manifest},t}();e.HlsUtils=p},152:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),r=n(203);e.setMasterPlaylistString=function(t){return i.createAction(r.HlsActionType.SetMasterPlaylistString,t)},e.setPlaylistType=function(t){return i.createAction(r.HlsActionType.SetPlaylistType,t)},e.setEndlist=function(t){return i.createAction(r.HlsActionType.SetEndlist,t)},e.setDefaultLanguages=function(t){return i.createAction(r.HlsActionType.SetDefaultLanguages,t)},e.setCustomTags=function(t){return i.createAction(r.HlsActionType.SetCustomTags,t)},e.updatePlaylist=function(t,e){return i.createAction(r.HlsActionType.UpdatePlaylist,{playlist:t,representation:e})},e.removeDroppedOutDiscontinuity=function(t,e){return i.createAction(r.HlsActionType.RemoveDroppedOutDiscontinuity,{discoSequences:t,representation:e})},e.updateDiscontinuityStartAndEndTimes=function(t,e){return i.createAction(r.HlsActionType.UpdateDiscontinuityStartAndEndTimes,{discoSequences:t,representation:e})},e.initSegmentStartTimes=function(t,e,n){return i.createAction(r.HlsActionType.InitSegmentStartTimes,{playlistId:t,segmentIndex:e,startTime:n})},e.dropSegmentStartTimes=function(){return i.createAction(r.HlsActionType.DropSegmentStartTimes)},e.initSegmentStartTimesFromReferenceSegment=function(t){return i.createAction(r.HlsActionType.InitSegmentStartTimesFromReferenceSegment,{playlistId:t.getRepresentationId().representationId,segmentUrl:t.getUrl(),segmentPlaybackTime:t.getPlaybackTime(),discontinuitySequenceNumber:t.getSegmentInfo().discontinuitySequenceNumber})},e.setPresentationTimeOffset=function(t,e){return i.createAction(r.HlsActionType.SetPresentationTimeOffset,{discoSequenceNumber:t,presentationTimeOffset:e})},e.setTimestampRolloverPositions=function(t,e){return i.createAction(r.HlsActionType.SetTimestampRolloverPositions,{next:t,previous:e})}},201:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=n(52),s=n(4),o=n(10),u=n(53),c=n(49),l=n(54),d=n(3),p=n(5),f=n(448),g=n(202),m=n(42),h=n(152),y=n(75);e.HLS_PERIOD_ID="0";var S=function(){function t(t,e){this.lastStartOffset=-(1/0),this.context=t,this.sourceContext=e,this.m3u8Translator=new g.M3u8Translator(t,e),this.totalDurationSec=1/0,this.dateRanges=[],this.sourceStore=t.serviceManager.get(d.ServiceName.SourceStoreService,e.sourceIdentifier)}return t.prototype.getCurrentHlsState=function(){return y.getHlsState(this.sourceStore.getState())},t.prototype.findAdaptationSet=function(t){return this.getManifest().Period[0].AdaptationSet.find(function(e){return e._internalId.adaptationSetId===t})},t.prototype.onMasterPlaylistAvailable=function(t,e){this.m3u8Translator=new g.M3u8Translator(this.context,this.sourceContext);var n=this.m3u8Translator.createDashManifestSkeleton(e,t);n=u.initializeInternalIds(n),this.sourceStore.dispatch(c.setManifestAction(n)),this.sourceStore.dispatch(h.setDefaultLanguages(t)),this.sourceStore.dispatch(h.setCustomTags(t)),this.sourceStore.dispatch(h.setMasterPlaylistString(t.rawString))},t.prototype.getManifest=function(){return l.getManifest(this.sourceStore.getState())},t.prototype.getAllVariantRepresentions=function(){var t=function(t){return p.MimeTypeHelper.isAV(t._mimeType)||p.MimeTypeHelper.isSubtitle(t._mimeType)||p.MimeTypeHelper.isImage(t._mimeType)};return this.getManifest().Period[0].AdaptationSet.filter(t).flatMap(function(t){return t.Representation})},t.prototype.onMediaLoaded=function(t,e,n,i,r){var a=this;this.sourceStore.dispatch(h.setMasterPlaylistString(t)),this.sourceStore.dispatch(h.setEndlist(Boolean(n.endList))),n.playlistType&&!y.getPlaylistType(this.getCurrentHlsState())&&this.sourceStore.dispatch(h.setPlaylistType(n.playlistType)),p.MimeTypeHelper.isAV(e._mimeType)&&(this.trackPlaylistDuration(n),this.updateDashManifestProperties(n,r)),this.calculatePlaylistStartTime(n,r);var s=this.getManifest().Period[0],o=this.getRepresentationsFromUrl(e.Uri,s),u=o.map(function(t){return a.updateRepresentation(t,r,n,i)});return u.forEach(function(t){a.sourceStore.dispatch(h.updatePlaylist(n,t)),a.sourceStore.dispatch(h.removeDroppedOutDiscontinuity(i,t)),a.sourceStore.dispatch(h.updateDiscontinuityStartAndEndTimes(i,t));var e=t._id,r=y.getPlaylistSegments(a.getCurrentHlsState(),e),o=a.determineFirstDiscoStartTime(r,n);a.updatePeriodStartAndDuration(s,o,i);var u=r.length>0&&null==r[0].startTime;u&&a.initSegmentStartTimesFromDiscoSequenceStartTime(e,i)}),f.handleDateRangeMetadata(n,this.dateRanges,this.context.serviceManager.get(d.ServiceName.TimedMetadataService)),u.find(function(t){return t._id===e._id})},t.prototype.determineFirstDiscoStartTime=function(t,e){var n=t.length>0&&null!=t[0].startTime;return n?y.getFirstDiscoSequenceTiming(this.getCurrentHlsState()).startTime:e.startTime},t.prototype.updatePeriodStartAndDuration=function(t,n,i){var r=i.reduce(function(t,e){return t+e.duration},0),a=0===t.duration?r:Math.min(t.duration,r),s=this.isLive()?1/0:a,o={start:n,_start:"PT"+n+"S",duration:s,_duration:"PT"+a+"S"};this.sourceStore.dispatch(c.updatePeriodTimingAction(e.HLS_PERIOD_ID,o))},t.prototype.trackPlaylistDuration=function(t){this.totalDurationSec=t.endList?Math.min(this.totalDurationSec,t.totalDuration):t.totalDuration},t.prototype.updateDashManifestProperties=function(t,e){var n,i=!t.endList,r=l.getManifest(this.sourceStore.getState()),a={_requestTimestamp:e,_type:i?"dynamic":"static",_mediaPresentationDuration:i?1/0:"PT"+this.totalDurationSec+"S",_maxSegmentDuration:"PT"+t.targetDuration+"S",_hasIndependentSegments:r._hasIndependentSegments||t.independentSegments};t.start&&(t.start.timeOffset=m.PlaylistUtils.getStartOffsetCloseToPlaylistEnd(t,this.lastStartOffset),this.lastStartOffset=t.start.timeOffset,a._startOffset=m.PlaylistUtils.getStartOffset(t)),i&&(a._minimumUpdatePeriod="PT"+t.targetDuration+"S",a._timeShiftBufferDepth=-this.totalDurationSec,a._availabilityStartTime=(n=r._availabilityStartTime,null!==n&&void 0!==n?n:new Date(e-s.toMilliSeconds(this.totalDurationSec)).toISOString())),this.sourceStore.dispatch(c.updateManifestAction(a))},t.prototype.getRepresentationsFromUrl=function(t,e){return e.AdaptationSet.flatMap(function(e){return e.Representation.filter(function(e){return o.URLHelper.isSubUrl(t,e.Uri)})})},t.prototype.updateRepresentation=function(t,e,n,r){var a=i({},t);return a._requestTimestamp=e,a._updateInterval=m.calculateUpdateIntervalInSeconds(this.context.settings,n),a._hls=i(i({},a._hls),{requestTimestamp:e,mediaSequence:n.mediaSequence}),a.SegmentList=[{SegmentURL:[]}],this.updateSegmentList(a,n,r),this.sourceStore.dispatch(c.updateRepresentationAction(a)),a},t.prototype.updateSegmentList=function(e,n,i){var r=i.flatMap(function(t){return t.segments});if(0!==r.length&&e.SegmentList){var a=this.getTranslatedSegmentList(e,r);a.contentProtectionInfos.length>0&&(e.ContentProtection=t.contentProtectionToXmlJson(a.contentProtectionInfos)),e.SegmentList[0].SegmentURL=a.entries,e.SegmentList[0]._duration=n.targetDuration,e.SegmentList[0]._timescale=1}},t.prototype.getTranslatedSegmentList=function(t,e){if(!this.isLive()){var n=this.context.serviceManager.maybeCall(d.ServiceName.ManifestCachingService,function(e){return e.getSegmentList(t.Uri)},null,this.sourceContext.sourceIdentifier);return n||(n=this.m3u8Translator.translateSegmentList(t,e),this.context.serviceManager.maybeCall(d.ServiceName.ManifestCachingService,function(e){return e.cacheSegmentList(n,t.Uri)},null,this.sourceContext.sourceIdentifier)),n}return this.m3u8Translator.translateSegmentList(t,e)},t.prototype.initSegmentStartTimesFromDiscoSequenceStartTime=function(t,e){var n=this.getCurrentHlsState(),i=n.discontinuitySequenceTiming,r=Object.keys(i).reverse().find(function(t){return 0!==i[t].startTime});if(null!=r){var a=e.find(function(t){return String(t.id)===r});a&&a.segments[0].discontinuity&&this.sourceStore.dispatch(h.initSegmentStartTimes(t,a.indexOfFirstSegment,i[r].startTime))}},t.prototype.calculatePlaylistStartTime=function(t,e){var n=t.segments[0];t.endList?(t.startTime=a.getStartTimeOffset(this.sourceStore.getState()),t.segments[0].startTime=t.startTime):n&&n.dateTime?(t.startTime=s.toSeconds(n.dateTime.getTime()),t.segments[0].startTime=t.startTime):t.startTime=s.toSeconds(e)-t.totalDuration},t.prototype.isLive=function(){return"dynamic"===this.getManifest()._type},t.contentProtectionToXmlJson=function(t){return t.map(function(t){var e={_schemeIdUri:t.schemeIdUri};return t.defaultKid&&(e["_cenc:default_KID"]=t.defaultKid),t.pssh&&(e.pssh=[{__text:t.pssh}]),e})},t.prototype.dispose=function(){this.m3u8Translator=r.dispose(this.m3u8Translator)},t}();e.M3u8DashManifest=S},202:function(t,e,n){"use strict";function i(t,e){if(!g.ModuleManager.has(m.ModuleName.DRM))return null;var n=g.ModuleManager.get(m.ModuleName.DRM).ContentProtectionHelper;return n.parseContentProtection(t,e)}function r(t){return t.split(",").map(function(t){return p.CodecStringHelper.hasOldAvc1CodecFormat(t)?p.CodecStringHelper.convertAvc1ToAvcotiCodecFormat(t):t}).join(",")}function a(t,e,n){void 0===n&&(n="und");var i,r,a,o=(a=null===(r=null===(i=t)||void 0===i?void 0:i.media)||void 0===r?void 0:r.filter(function(t){return u(t.attributes)}),null!==a&&void 0!==a?a:[]);o.forEach(function(i){var r=t.playlists.find(function(t){return t.attributes.AUDIO===e._groupId});if(r){var a=s(r,i.attributes["GROUP-ID"],t),o=f.URLHelper.getAbsoluteUrl(i.attributes.URI,e.BaseURL[0].url);i.attributes.NAME===e._name&&i.attributes.LANGUAGE===n&&o!==e.Uri&&a&&e.backupUris.push(o)}})}function s(t,e,n){var i;return!!(null===(i=n.tags)||void 0===i?void 0:i.filter(function(t){return"stream-inf"===t.name}).find(function(n){var i;return t.backupStreamUris.includes(n.value)&&(null===(i=n.attributes)||void 0===i?void 0:i.AUDIO)===e}))}function o(t,e,n){var i,r,a,s=null===(i=t.media)||void 0===i?void 0:i.find(function(t){return u(t.attributes)&&t.attributes["GROUP-ID"]===e}),o=null===(a=null===(r=s)||void 0===r?void 0:r.attributes)||void 0===a?void 0:a.URI;return o?f.URLHelper.getAbsoluteUrl(o,n):void 0}function u(t){return"AUDIO"===t.TYPE}var c=this&&this.__assign||function(){return c=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},c.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var l,d=n(46),p=n(26),f=n(10),g=n(2),m=n(0),h=n(43),y=n(34),S=n(53),v=n(450),T=n(451),b=n(42);!function(t){t.Mp4="mp4"}(l=e.ContainerFormat||(e.ContainerFormat={}));var A=function(){function t(t,e){this.adaptationsetId=0,this.backupStreams=[],this.context=t,this.sourceContext=e,this.representationFactory=new T.M3u8RepresentationFactory(t,e)}return t.prototype.createCeaCaptionObjects=function(t,e){for(var n={},i={_schemeIdUri:"urn:scte:dash:cc:cea-"+e+":2015",_value:""},r=0;r<t.length;r++){var a=t[r]["INSTREAM-ID"];n[a]={lang:t[r].LANGUAGE||t[r].NAME||a,label:t[r].NAME||t[r].LANGUAGE||a},i._value.length>0&&(i._value+=";"),"708"===e?i._value+=a.substr(7)+"=lang:":i._value+=a+"=",i._value+=t[r].LANGUAGE}return{closedCaptionLabel:n,accessibility:i}},t.prototype.createCaptionElements=function(t){if(!t)return{closedCaptionLabel:null,accessibility:[]};var e=this.createCeaCaptionObjects(t.cea608,"608"),n=this.createCeaCaptionObjects(t.cea708,"708"),i=[],r=null;return e.accessibility._value&&(i.push(e.accessibility),r=e.closedCaptionLabel),n.accessibility._value&&i.push(n.accessibility),{closedCaptionLabel:r,accessibility:i}},t.prototype.createAdaptationSetWithUnknownCodecs=function(t,e){var n=this.adaptationsetId.toString(),i={_id:n,_mimeType:"unknown",_internalId:new h.AdaptationSetId(e,n),Representation:[{Uri:f.URLHelper.concatBaseUrlWithPartial(this.baseURL,t.uri),BaseURL:[{url:b.PlaylistUtils.getBaseUrl(this.baseURL,t.uri)}],_bandwidth:Number(t.attributes["AVERAGE-BANDWIDTH"]||t.attributes.BANDWIDTH),_id:n}],isTransmuxingRequired:!0};return this.adaptationsetId++,i},t.prototype.createVideoAdaptationSet=function(t,e,n,i,r){for(var a=[],s=1/0,o=0,u=1/0,c=0,l=1/0,p=0,f=null,g="video/"+i,m=0,y=t;m<y.length;m++){var S=y[m];if(S.uri){var v=this.representationFactory.create(S,d.RepresentationType.VIDEO,i,this.baseURL,this.assumeAudioMuxedIntoVideoTs);a.push(v),s=Math.min(s,v._height),o=Math.max(o,v._height),u=Math.min(u,v._width),c=Math.max(c,v._width),l=Math.min(l,v._bandwidth),p=Math.max(p,v._bandwidth)}}a.sort(function(t,e){return t._bandwidth-e._bandwidth});var T={_id:"video",_contentType:"video"},b={Representation:a,ContentComponent:[T],_id:String(this.adaptationsetId),_group:f,_mimeType:g,_internalId:new h.AdaptationSetId(n,String(this.adaptationsetId++)),_minBandwidth:l,_maxBandwidth:p,_minHeight:s,_maxHeight:o,_minWidth:u,_maxWidth:c,isTransmuxingRequired:!0};r&&Object.keys(r).forEach(function(t){r[t].entries.filter(function(t){return!t.URI}).forEach(function(t){b.ContentComponent.push({_id:t.NAME,_contentType:"audio",_lang:t.LANGUAGE})})});var A=this.createCaptionElements(e);A.closedCaptionLabel&&(b.ClosedCaptionLabels=A.closedCaptionLabel),A.accessibility.length>0&&(b.Accessibility=A.accessibility);var E=this.getLabelForAdaptationSet(b);return E&&"string"==typeof E&&(b._label=E),b},t.prototype.createAudioAdaptationSet=function(t,e,n,i){for(var r=[],a=1/0,s=0,o=null,u=0,c=t;u<c.length;u++){var l=c[u];if(l.uri){var p=this.representationFactory.create(l,d.RepresentationType.AUDIO,i,this.baseURL,this.assumeAudioMuxedIntoVideoTs);r.push(p)}}r.sort(function(t,e){return t._bandwidth-e._bandwidth});var f={Representation:r,_id:String(this.adaptationsetId),_group:o,_mimeType:"audio/"+i,_internalId:new h.AdaptationSetId(n,String(this.adaptationsetId++)),_minBandwidth:a,_maxBandwidth:s,isTransmuxingRequired:!0},g=this.createCaptionElements(e);g.closedCaptionLabel&&(f.ClosedCaptionLabels=g.closedCaptionLabel),g.accessibility.length>0&&(f.Accessibility=g.accessibility);var m=this.getLabelForAdaptationSet(f);return m&&"string"==typeof m&&(f._label=m),f},t.prototype.createAudioAdaptationSets=function(t,e,n,i){var r=this,s=this.context.settings.IGNORE_HLS_AUDIO_GROUPS,o=0,u=[],c=function(e){return{Representation:[],_id:String(r.adaptationsetId),_internalId:new h.AdaptationSetId(t,String(r.adaptationsetId++)),_mimeType:"audio/"+n,_minBandwidth:1/0,_maxBandwidth:-1,_lang:e,_group:String(o++),isTransmuxingRequired:!0}};return Object.keys(e).forEach(function(t){var o,l=e[t],p=l.entries.find(function(t){return t.LANGUAGE&&"und"!==t.LANGUAGE});p&&(o=p.LANGUAGE);var f;s||(f=c(o));for(var g=v.uniqueRenditions(l.entries.filter(function(t){return t.URI})),m=0,h=g;m<h.length;m++){var y=h[m];s&&(f=c(o));var S=r.representationFactory.create(y,d.RepresentationType.AUDIO,n,r.baseURL,r.assumeAudioMuxedIntoVideoTs);a(i,S,o),f.Representation.push(S),f._minBandwidth=Math.min(f._minBandwidth,S._bandwidth),f._maxBandwidth=Math.max(f._maxBandwidth,S._bandwidth);var T=y.CHARACTERISTICS;if(T&&0===T.indexOf(r.context.settings.HLS_VR_CHARACTERISTICS_UTI)&&(f.Role=[{_schemeIdUri:r.context.settings.VR_SCHEME_ID_URI,_value:T.substring(r.context.settings.HLS_VR_CHARACTERISTICS_UTI.length)}]),!f._label){var b=r.getLabelForAdaptationSet(f);b&&"string"==typeof b?f._label=b:S._name?f._label=S._name:f._label=t}s&&f.Representation.length>0&&u.push(f),f.Representation.sort(function(t,e){return t._bandwidth-e._bandwidth})}!s&&f.Representation.length>0&&u.push(f)}),u},t.prototype.createSubtitleAdaptationSets=function(t,e,n){var i=this,r=0;return Object.values(e).filter(function(t){return t.URI}).map(function(e){var a={Representation:[],_id:String(i.adaptationsetId),_internalId:new h.AdaptationSetId(t,String(i.adaptationsetId++)),_mimeType:"application/mp4",_lang:e.LANGUAGE,_group:""+r++,_isFragmented:!0},s=i.representationFactory.create(e,d.RepresentationType.SUBTITLE,n,i.baseURL,i.assumeAudioMuxedIntoVideoTs);a.Representation.push(s);var o=i.getLabelForAdaptationSet(a);return o&&"string"==typeof o?a._label=o:s._name?a._label=s._name:a._label=e.LANGUAGE,a})},t.prototype.getLabelForAdaptationSet=function(t){var e={mimeType:t._mimeType,lang:t._lang};t._label&&(e.label=t._label);var n=this.getLabelingFunctionForAdaptationSet();return n(e)},t.prototype.getLabelingFunctionForAdaptationSet=function(){var t=this.context.sourceContext,e=t&&t.source&&t.source.labeling;return e&&e.hls&&e.hls.tracks?"function"!=typeof e.hls.tracks?this.getDefaultLabelForAdaptationSet:e.hls.tracks:this.getDefaultLabelForAdaptationSet},t.prototype.getDefaultLabelForAdaptationSet=function(){return null},t.prototype.handleBackupStreams=function(t){this.backupStreams=[];for(var e=t.playlists,n=0;n<e.length;n++){var i=e[n],r=f.URLHelper.getAbsoluteUrl(i.uri,this.baseURL);i.backupStreamUris=i.backupStreamUris||[];var a={};a[r]=o(t,i.attributes.AUDIO,this.baseURL);for(var s=n+1;s<e.length;s++){var u=e[s],c=i.attributes.BANDWIDTH===u.attributes.BANDWIDTH,l=i.attributes.RESOLUTION&&u.attributes.RESOLUTION,d=!l||l&&i.attributes.RESOLUTION.height===u.attributes.RESOLUTION.height&&i.attributes.RESOLUTION.width===u.attributes.RESOLUTION.width;
if(c&&d){if(!this.context.settings.DISABLE_HLS_BACKUP_STREAM_FAILOVER){i.backupStreamUris.push(u.uri);var p=o(t,u.attributes.AUDIO,this.baseURL);if(p){var g=f.URLHelper.getAbsoluteUrl(u.uri,this.baseURL);a[g]=p}}e.splice(s,1),s--}}this.backupStreams.push(a)}},t.prototype.getBackupStreams=function(){return this.backupStreams},t.prototype.createDashManifestSkeleton=function(t,e){var n=e;return this.baseURL=f.URLHelper.removeLastPathPart(t),this.handleBackupStreams(n),this.playlistPreprocessing(n),this.assumeAudioMuxedIntoVideoTs=!this.hasAudioRenditionsWithUri(n),y.orderAdaptationSetsByCodec({BaseURL:[{url:this.baseURL}],Period:[this.createPeriod(n,"0")],_hasIndependentSegments:e.independentSegments,_isHls:!0,isInitialized:!1},S.getCodecPriorities(this.context.config,this.sourceContext.source))},t.prototype.isVariantOfMimeType=function(t,e){var n=p.CodecStringHelper.getMimeTypeForCodecString(t.attributes.CODECS);return n===e},t.prototype.removeUnsupportedAudioOnlyVariants=function(t){var e=this,n=t.playlists.some(function(t){return e.isVariantOfMimeType(t,"video")}),i=t.playlists.some(function(t){return e.isVariantOfMimeType(t,"audio")});n&&i&&(t.playlists=t.playlists.filter(function(t){return e.isVariantOfMimeType(t,"video")}))},t.prototype.playlistPreprocessing=function(t){this.removeUnsupportedAudioOnlyVariants(t)},t.prototype.getVideoCodecForPlaylist=function(t,e){void 0===e&&(e=!1);var n=p.CodecStringHelper.extractCodecStrings(t.attributes.CODECS);return n.video?(p.CodecStringHelper.hasOldAvc1CodecFormat(n.video)&&(n.video=p.CodecStringHelper.convertAvc1ToAvcotiCodecFormat(n.video)),e?n.video:n.video.split(".")[0]):null},t.prototype.getAudioCodecForPlaylist=function(t,e){void 0===e&&(e=!1);var n=p.CodecStringHelper.extractCodecStrings(t.attributes.CODECS);return n.audio?e?n.audio:n.audio.split(".")[0]:null},t.prototype.getAllVideoCodecs=function(t){var e=this;return t.map(function(t){return e.getVideoCodecForPlaylist(t)}).filter(function(t,e,n){return t&&n.indexOf(t)===e})},t.prototype.getAllAudioCodecs=function(t){var e=this;return t.map(function(t){return e.getAudioCodecForPlaylist(t)}).filter(function(t,e,n){return t&&n.indexOf(t)===e})},t.prototype.groupPlaylistsByCodec=function(t){var e=this.getAllVideoCodecs(t),n=this.getAllAudioCodecs(t);if(0===e.length&&0===n.length)return{unknown:t};if(0===e.length){var i={};return n.forEach(function(e){i[e]=t.filter(function(t){return t.attributes.CODECS&&t.attributes.CODECS.includes(e)})}),i}var r={};return e.forEach(function(e){r[e]=t.filter(function(t){return t.attributes.CODECS&&t.attributes.CODECS.includes(e)})}),r},t.prototype.createPeriod=function(e,n){var i=this,a={_id:n,_duration:"PT0S",duration:0,AdaptationSet:[]},s=function(t){if(null!=t.attributes.CODECS){var e=r(t.attributes.CODECS);return i.context.renderer.isMediaTypeSupported("video/mp4",p.CodecStringHelper.extractCodecStrings(e).video)}return!0},o=E.extractMediaRenditions(e,this.context.settings.IGNORE_HLS_AUDIO_GROUPS,s),u=this.groupPlaylistsByCodec(e.playlists),c=Object.keys(u),d=c.filter(function(t){return p.CodecStringHelper.isVideoCodec(t)}).map(function(t){return i.createVideoAdaptationSet(u[t],o.captions,a._id,l.Mp4,o.audio)}).filter(function(e){return e.Representation=e.Representation.reduce(function(e,n){var r=t.isRepresentationSupported(n,i.context.renderer),a=Boolean(e.find(function(t){return t.Uri===n.Uri}));return r&&!a&&e.push(n),e},[]),e.Representation.length>0}),f=c.filter(function(t){return"unknown"===t}).flatMap(function(t){return u[t]}).map(function(t){return i.createAdaptationSetWithUnknownCodecs(t,a._id)}),h=this.createAudioAdaptationSets(a._id,o.audio,l.Mp4,e).filter(function(e){return e.Representation=e.Representation.filter(function(e){return t.isRepresentationSupported(e,i.context.renderer)}),e.Representation.length>0}).concat(c.filter(function(t){return p.CodecStringHelper.isAudioCodec(t)}).map(function(t){return i.createAudioAdaptationSet(u[t],o.captions,a._id,l.Mp4)})),y=this.createSubtitleAdaptationSets(a._id,o.subtitles,l.Mp4);return a.AdaptationSet=[].concat(d,h,y,f),g.ModuleManager.has(m.ModuleName.Thumbnail)&&(a.AdaptationSet=g.ModuleManager.get(m.ModuleName.Thumbnail).extendAdaptationSets(a.AdaptationSet,e,this.baseURL)),a},t.isRepresentationSupported=function(t,e){var n=!t._mimeType.includes("audio")&&!t._mimeType.includes("video");if(!t._codecs||n)return!0;var i=p.CodecStringHelper.extractCodecStrings(t._codecs);return Object.keys(i).every(function(t){return p.CodecStringHelper.isSupportedByRenderer(e,t+"/mp4",i[t])})},t.prototype.hasAudioRenditionsWithUri=function(t){return t.media.some(function(t){return u(t.attributes)&&Boolean(t.attributes.URI)})},t.parseBase64DataUrl=function(t){var e=new RegExp(/^data:text\/plain.*;base64.*,(.+)/),n=e.exec(t);return null!==n&&2===n.length?n[1]:null},t.prototype.translateSegmentList=function(e,n){var r=[],a=f.URLHelper.getDomainUrl(e.BaseURL[0].url),s=[];return n.forEach(function(n,o){n.uri=f.URLHelper.buildAbsoluteUrl(e.BaseURL[0].url,a,n.uri);var u=null;(n.keys||[]).forEach(function(n){var r=t.parseBase64DataUrl(n.uri);if(null!==r){var l=i(n,r);if(!l)return;var d=void 0!==s.find(function(t){return!Object.keys(l).some(function(e){return l[e]!==t[e]})});d||s.push(l),s.length>0&&(u=null)}else{var p=new ArrayBuffer(16);new DataView(p).setInt32(12,e._hls.mediaSequence+o),u=c(c({iv:p},n),{uri:f.URLHelper.buildAbsoluteUrl(e.BaseURL[0].url,a,n.uri)})}}),n.init&&(n.init.url=f.URLHelper.buildAbsoluteUrl(e.BaseURL[0].url,a,n.init.url),u&&(n.init.key=u));var l={_media:n.uri,_duration:n.duration,_key:u,_metadata:[],_init:n.init,_discontinuitySequenceNumber:n.discontinuitySequenceNumber};["cueTag","scte35","customTags"].filter(function(t){return n.hasOwnProperty(t)}).forEach(function(t){return l._metadata=l._metadata.concat(n[t])}),n.dateTime&&(l._dateTime=n.dateTime),n.byterange&&(l._byteRange={start:n.byterange.offset,end:n.byterange.offset+n.byterange.length-1}),r.push(l)}),{entries:r,contentProtectionInfos:s}},t.prototype.dispose=function(){this.baseURL=null},t}();e.M3u8Translator=A;var E;!function(t){function e(t,e){var n={};return t.forEach(function(t){var i=e[t["GROUP-ID"]]||e[Object.keys(e)[0]];t.BANDWIDTH=i[0].BANDWIDTH,t.CODECS=i[0].CODECS;var r=t["AVERAGE-BANDWIDTH"]||t.BANDWIDTH,a=n[t.NAME];void 0!==a?(a.entries.push(t),a.MIN_BANDWIDTH=Math.min(a.MIN_BANDWIDTH,r),a.MAX_BANDWIDTH=Math.max(a.MAX_BANDWIDTH,r)):n[t.NAME]={entries:[t],MIN_BANDWIDTH:r,MAX_BANDWIDTH:r}}),n}function n(t){var e={};return t.forEach(function(t){return e[t.NAME]=t}),e}function i(t){var e={cea608:[],cea708:[]};return t.forEach(function(t){t["INSTREAM-ID"]&&0===t["INSTREAM-ID"].indexOf("CC")?e.cea608.push(t):t["INSTREAM-ID"]&&0===t["INSTREAM-ID"].indexOf("SERVICE")&&e.cea708.push(t)}),e}function r(t,r,a){var s=t.playlists.filter(a),c=t.media.map(function(t){return t.attributes}),l=o(s),d=c.filter(function(t){var e=l[t["GROUP-ID"]];return u(t)&&(r||e)}),p=c.filter(function(t){return"SUBTITLES"===t.TYPE}),f=c.filter(function(t){return"CLOSED-CAPTIONS"===t.TYPE});return{audio:e(d,l),subtitles:n(p),captions:i(f)}}function a(t){var e={};return t.forEach(function(t){var n=t.attributes.AUDIO;e[n]||(e[n]=[]);var i={BANDWIDTH:t.attributes.BANDWIDTH,CODECS:void 0};t.attributes.CODECS&&t.attributes.CODECS.indexOf(",")>-1&&(i.CODECS=c(t)),e[n].push(i)}),e}function s(t){Object.values(t).forEach(function(t){t.sort(function(t,e){return t.BANDWIDTH-e.BANDWIDTH})})}function o(t){var e=a(t);return s(e),e}function c(t){var e=t.attributes.CODECS.split(",");return e.find(function(t){return p.CodecStringHelper.isAudioCodec(t)})}t.extractMediaRenditions=r,t.getPropertiesForAudioGroups=o}(E=e.HlsParsing||(e.HlsParsing={}))},203:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;!function(t){t.SetMasterPlaylistString="@instance/hls/setmasterplayliststring",t.SetPlaylistType="@instance/hls/setplaylisttype",t.SetEndlist="@instance/hls/setendlist",t.SetDefaultLanguages="@instance/hls/setsefaultlanguages",t.SetCustomTags="@instance/hls/setsustomtags",t.UpdatePlaylist="@instance/hls/updatePlaylist",t.RemoveDroppedOutDiscontinuity="@instance/hls/removedroppedoutdiscontinuity",t.UpdateDiscontinuityStartAndEndTimes="@instance/hls/updatediscontinuitystartandendtimes",t.InitSegmentStartTimes="@instance/hls/initsegmentstarttimes",t.DropSegmentStartTimes="@instance/hls/dropsegmentstarttimes",t.InitSegmentStartTimesFromReferenceSegment="@instance/hls/initsegmentstarttimesfromreferencesegment",t.SetPresentationTimeOffset="@instance/hls/setpresentationtimeoffset",t.SetTimestampRolloverPositions="@instance/hls/settimestamprolloverpositions"}(i=e.HlsActionType||(e.HlsActionType={}))},255:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.mimeTypeFilter=t,this.discoSequenceNumberChangedListeners=[],this.reset()}return t.prototype.notifyListeners=function(t){var e=this;this.discoSequenceNumberChangedListeners.forEach(function(n){return n(e.currentDiscontinuitySequenceNumber,t)})},t.prototype.trackSegment=function(t){var e;if(this.mimeTypeFilter(t.getMimeType())&&!t.isInit()){var n=t.getSegmentInfo(),i=null===(e=n)||void 0===e?void 0:e.discontinuitySequenceNumber,r=isFinite(this.currentDiscontinuitySequenceNumber),a=this.currentDiscontinuitySequenceNumber!==i;r&&a&&this.notifyListeners(i),this.currentDiscontinuitySequenceNumber=i}},t.prototype.subscribe=function(t){this.discoSequenceNumberChangedListeners.push(t)},t.prototype.unsubscribe=function(t){var e=this.discoSequenceNumberChangedListeners.indexOf(t);e<0||this.discoSequenceNumberChangedListeners.splice(e,1)},t.prototype.reset=function(){this.currentDiscontinuitySequenceNumber=-(1/0)},t.prototype.dispose=function(){this.reset(),this.discoSequenceNumberChangedListeners=[]},t}();e.DiscontinuitySequenceNumberTracker=i},256:function(t,e,n){"use strict";function i(t,e){var n=t.getSegmentInfo();return e.findIndex(function(t){var e=n.discontinuitySequenceNumber===t._discontinuitySequenceNumber,i=n.url.includes(t._media),a=r.compareValues(n.byteRange,t._byteRange);return e&&i&&a})}Object.defineProperty(e,"__esModule",{value:!0});var r=n(91),a=function(){function t(t,e){this.context=t,this.playbackTimeNextSegment=null,this.allowedGapSizeSec=e}return t.prototype.reset=function(){this.playbackTimeNextSegment=null},t.prototype.trackPlaybackTime=function(t){this.playbackTimeNextSegment=t.getPlaybackTime()+t.getDuration()},t.prototype.checkForTimelineGap=function(t,e,n){var r,a,s,o={hasGap:!1,expectedPlaybackTime:this.playbackTimeNextSegment,actualPlaybackTime:t.getPlaybackTime(),couldHandle:!0};if(null==this.playbackTimeNextSegment)return o;s=t.getPlaybackTime()-this.playbackTimeNextSegment;var u=s,c=e.SegmentList[0].SegmentURL,l=c.some(function(t){return t.downloaded}),d=i(t,c),p=d>=0?d:n,f=p;if(s>this.allowedGapSizeSec&&l){for(;c[f]&&!c[f].downloaded&&f>=0;)f--;o.hasGap=!0,o.couldHandle=!1,o.correctedIndex=f+1,o.gapSizeSec=u}else if(s>this.allowedGapSizeSec){for(;s>this.allowedGapSizeSec;)if(a=null===(r=c[f-1])||void 0===r?void 0:r._duration,s-=null!==a&&void 0!==a?a:0,f--,f<0){f=0,o.couldHandle=!1;break}o.hasGap=!0,o.gapSizeSec=u,o.correctedIndex=f}else if(s+t.getDuration()<-this.allowedGapSizeSec){for(;s+c[f]._duration<-this.allowedGapSizeSec;)if(s+=c[f]._duration,f++,f>=c.length){f=c.length;break}o.hasGap=!0,o.gapSizeSec=u,o.correctedIndex=f}return f===p&&o.hasGap&&(o.hasGap=!1),o},t}();e.HlsTimelineTracker=a},257:function(t,e,n){"use strict";function i(t,e,n){var i,o,u=s.getPlaylist(s.getHlsState(t),e._internalId.representationId);if(!(null===(i=u)||void 0===i?void 0:i.segments.length))return null;var c=u.segments,l=u.duration/c.length,d=a.findSegmentForTime(c,n,l),p=null===(o=d)||void 0===o?void 0:o.init;return p?r(r(r({},a.createInitSegmentInfoBase(e)),p),{mediaURL:p.url}):null}var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(124),s=n(75);e.provideSegmentInfoForHls=i},258:function(t,e,n){"use strict";function i(t,e,n){var i=n.url,r=n.manifestText,a=t.serviceManager.maybeCall(l.ServiceName.ManifestCachingService,function(t){return t.getParsedManifest(i)},null,e.sourceIdentifier);return a?a:O.parseHlsManifest(t,r)}function r(t,e){var n=I.getManifest(e).BaseURL[0].url;return D.PlaylistUtils.getBaseUrl(n,t)}var a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},a.apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,r++)i[r]=a[s];return i};Object.defineProperty(e,"__esModule",{value:!0});var o,u=n(6),c=n(7),l=n(3),d=n(15),p=n(1),f=n(113),g=n(17),m=n(13),h=n(21),y=n(16),S=n(11),v=n(5),T=n(4),b=n(12),A=n(53),E=n(57),_=n(49),I=n(54),R=n(447),O=n(449),M=n(201),U=n(202),P=n(452),D=n(42);!function(t){t[t.NoBackupStreams=0]="NoBackupStreams",t[t.LoadingFailed=1]="LoadingFailed"}(o=e.BackupStreamErrors||(e.BackupStreamErrors={})),e.getParsedManifest=i;var C=function(){function t(t,e){var n=this;this.variantUpdateLoaders={},this.onMasterLoaded=function(t){if(n.isCancelled)return Promise.reject();var e=t.url,r=t.body,a={url:e,manifestText:r},s=i(n.context,n.sourceContext,a);return n.context.serviceManager.maybeCall(l.ServiceName.ManifestCachingService,function(n){n.cacheHttpResponse(t,e),n.cacheParsedManifest(s,e)},null,n.sourceContext.sourceIdentifier),n.verifyMissingCodecs(s,r,e).then(function(t){return n.handleMasterPlaylist(t,e),n.loadFirstVariants().then(function(){return n.translatedManifest.getManifest()})["catch"](function(){return Promise.reject(new c.PlayerError(u.ErrorCode.SOURCE_HLS_STREAM_ERROR))})})["catch"](function(t){var e=t instanceof c.PlayerError?t:new c.PlayerError(u.ErrorCode.SOURCE_MANIFEST_INVALID);return Promise.reject(e)})},this.context=t,this.sourceContext=e,this.registeredOnPlayEventHandlers=[],this.registeredOnPausedEventHandlers=[],this.discontinuitySequences=[],this.isCancelled=!1,this.translatedManifest=new M.M3u8DashManifest(t,e),this.masterPlaylistLoader=this.createLoader(m.HttpRequestType.MANIFEST_HLS_MASTER),this.sourceStore=t.serviceManager.get(l.ServiceName.SourceStoreService,e.sourceIdentifier),this.manifestService=t.serviceManager.get(l.ServiceName.ManifestService,e.sourceIdentifier)}return t.prototype.loadFirstVariants=function(){var t=this.sourceStore.getState(),e=this.translatedManifest.getManifest().Period[0],n=A.findAdaptationSet(A.findAdaptationSetsForMimeType(e,v.MimeType.VideoMp4),A.getPreferredLanguage(v.MimeType.VideoMp4,t)),i=A.findAdaptationSet(A.findAdaptationSetsForMimeType(e,v.MimeType.AudioMp4),A.getPreferredLanguage(v.MimeType.AudioMp4,t)),r=[];return n&&r.push(this.loadFirstPlaylist(n)),i&&r.push(this.loadFirstPlaylist(i)),Promise.all(r)},t.prototype.loadFirstPlaylist=function(t){var e=this,n=this.getStartRepresentation(t.Representation,t._mimeType);return n?this.updateRepresentation(n).then(function(t){return e.sourceStore.dispatch(E.setRepresentationIdAction(n._internalId)),t})["catch"](function(){return t.Representation=t.Representation.filter(function(t){return t!==n}),e.loadFirstPlaylist(t)}):Promise.reject("all failed")},t.prototype.getStartRepresentation=function(t,e){var n=this.context.serviceManager.get(l.ServiceName.AdaptationService),i=n.selectRepresentation(e,{},t);return t.find(function(t){return t._internalId.equals(i)})},t.prototype.updateAdaptationSet=function(t){var e=this,n=this.translatedManifest.findAdaptationSet(t);return n?Promise.all(n.Representation.map(function(t){var n=e.createLoader(m.HttpRequestType.MANIFEST_HLS_VARIANT);return e.loadPlaylist(n,t.Uri).then(function(n){var i=e.onMediaLoaded(n,t);O.isM3u8Error(i)||e.sourceStore.dispatch(_.updateRepresentationAction(i))})})):Promise.reject("Could not find data")},t.prototype.verifyMissingCodecs=function(t,e,n){if(!O.isValidHlsPlaylist(t))return Promise.reject("invalid playlist");var i=a(a({},O.ensureMasterPlaylist(this.context,t,n)),{rawString:e}),r=new U.M3u8Translator(this.context,this.sourceContext),s=r.createDashManifestSkeleton(n,i);s=A.initializeInternalIds(s),this.backupStreamsMap=r.getBackupStreams();var o=O.getAdaptationSetsWithUnknownCodecs(s);return 0===o.length?Promise.resolve(i):this.parseMissingCodecs(i,o,r)},t.prototype.parseMissingCodecsFromPlaylistResponse=function(t,e,n){var r=t.url,a=t.body,s={url:e.Uri,manifestText:a},o=i(this.context,this.sourceContext,s);e._hls={mediaSequence:o.mediaSequence};var u=n.translateSegmentList(e,o.segments),c=!o.endList,d=c?e._updateInterval:1/0,p=Date.now()+T.toMilliSeconds(d);return this.context.serviceManager.maybeCall(l.ServiceName.ManifestCachingService,function(e){e.cacheHttpResponse(t,r,p),e.cacheParsedManifest(o,r,p)},null,this.sourceContext.sourceIdentifier),new R.CodecDetector(this.context).probeCodecs(u.entries,c)},t.prototype.getRepresentationForCodecDetection=function(t){var e=t.Representation;return this.getStartRepresentation(e,"video")},t.prototype.parseMissingCodecsForAdaptationSet=function(t,e,n){var i=this,r=this.getRepresentationForCodecDetection(t);if(!r)return Promise.reject("all failed");t.Representation.splice(t.Representation.indexOf(r),1);var a=new g.DefaultContentLoader(this.context,{requestType:m.HttpRequestType.MANIFEST_HLS_VARIANT});return this.loadPlaylist(a,r.Uri).then(function(t){return i.parseMissingCodecsFromPlaylistResponse(t,r,e)}).then(function(t){return O.updateMissingCodecsForPlaylists(t,n,r.Uri)})},t.prototype.parseMissingCodecs=function(t,e,n){var i=this;return 0===e.length?Promise.resolve(t):this.parseMissingCodecsForAdaptationSet(e.shift(),n,t).then(function(){return i.parseMissingCodecs(t,e,n)})},t.prototype.handleMasterPlaylist=function(t,e){var n=this;void 0===this.masterPlaylist&&(this.masterPlaylist=t),this.translatedManifest.onMasterPlaylistAvailable(t,e);var i=this.translatedManifest.getAllVariantRepresentions();i.forEach(function(t){n.variantUpdateLoaders[t._id]=n.createLoader(m.HttpRequestType.MANIFEST_HLS_VARIANT)})},t.prototype.onMediaLoaded=function(t,e,n){void 0===n&&(n=Date.now());var r;if(this.isCancelled)return e;var a=t.url,s=t.body,o={url:a,manifestText:s},u=i(this.context,this.sourceContext,o),c=P.M3u8Validator.checkForError(u);if(c)return f.M3u8Error.INAVLID;u.mediaSequence=u.mediaSequence||0,u.start=(r=u.start,null!==r&&void 0!==r?r:this.masterPlaylist.start),this.discontinuitySequences=O.createDiscontinuitySequences(u,this.discontinuitySequences);var d=this.filterTooSmallPeriods(this.discontinuitySequences,Boolean(u.endList)),p=this.translatedManifest.onMediaLoaded(s,e,u,d,n);return this.translatedManifest.isLive()||this.context.serviceManager.maybeCall(l.ServiceName.ManifestCachingService,function(e){e.cacheHttpResponse(t,a),e.cacheParsedManifest(u,a)},null,this.sourceContext.sourceIdentifier),p},t.prototype.filterTooSmallPeriods=function(t,e){return t.filter(function(n,i){var r=!e&&i===t.length-1,a=n.segments.reduce(function(t,e){return t+e.duration},0);return!!(0===i&&a>0||r)||a>0})},t.prototype.stop=function(){var t=this;this.registeredOnPlayEventHandlers.forEach(function(e){return t.context.eventHandler.off(p.PlayerEvent.Play,e)}),this.registeredOnPausedEventHandlers.forEach(function(e){return t.context.eventHandler.off(p.PlayerEvent.Paused,e)}),this.registeredOnPlayEventHandlers=[],this.registeredOnPausedEventHandlers=[],this.stopLoaders(),this.isCancelled=!0},t.prototype.stopLoaders=function(){var t=this;this.masterPlaylistLoader.cancel(),Object.keys(this.variantUpdateLoaders).forEach(function(e){t.variantUpdateLoaders[e].dispose(),delete t.variantUpdateLoaders[e]})},t.prototype.load=function(t){var e=this;return this.isCancelled=!1,this.loadPlaylist(this.masterPlaylistLoader,t).then(this.onMasterLoaded)["catch"](function(t){if(t&&!e.isCancelled){var n=t instanceof c.PlayerError?t:e.getErrorFromResponse(t);e.context.eventHandler.fireError(n)}return Promise.reject(null)})},t.prototype.updateRepresentation=function(t){var e=this,n=this.variantUpdateLoaders[t._id];return this.loadPlaylist(n,t.Uri).then(function(n){var i=e.onMediaLoaded(n,t);if(O.isM3u8Error(i))throw i;return i})["catch"](function(){return e.handleRepresentationUpdateFailure(t)})},t.prototype.handleRepresentationUpdateFailure=function(t){var e=this,n=new S.Deferred;return this.switchToBackupStream(t)["catch"](function(){throw n.reject(),f.M3u8Error.COULD_NOT_LOAD}).then(function(t){var i=t[0],r=t[1];if(n.resolve(i),r){var a=e.context.serviceManager.get(l.ServiceName.ManifestUpdateSchedulingService,e.sourceContext.sourceIdentifier);a.updateLinkedRepresentation(r)}}),n.promise},t.prototype.loadPlaylist=function(t,e){var n;if(!e)return this.context.eventHandler.fireError(new c.PlayerError(u.ErrorCode.SOURCE_INVALID)),Promise.reject(u.ErrorCode[u.ErrorCode.SOURCE_INVALID]);var i=this.context.serviceManager.maybeCall(l.ServiceName.ManifestCachingService,function(t){return t.getHttpResponse(e)},null,this.sourceContext.sourceIdentifier);if(i)return Promise.resolve(i);var r=null===(n=this.sourceContext.source.options)||void 0===n?void 0:n.manifestWithCredentials;return t.load(e,m.HttpRequestMethod.GET,null,null,null,r)},t.prototype.createLoader=function(t){var e=this;return new g.DefaultContentLoader(this.context,{onSuccess:function(t,n){t.length&&e.context.store.dispatch(h.addMetricsValue("default",y.MetricType.DownloadInformation,{bytes:t.length,time:t.elapsedTime,timeToFirstByte:t.timeToFirstByte}))},maxRetries:this.context.settings.MAX_MPD_RETRIES,requestType:t,resetRetriesWhenOffline:!0})},t.prototype.getErrorFromResponse=function(t){var e=new c.PlayerError(u.ErrorCode.SOURCE_COULD_NOT_LOAD_MANIFEST,{statusCode:t.status});return t.status===XMLHttpRequest.UNSENT&&(e=new c.PlayerError(u.ErrorCode.NETWORK_ERROR)),e},t.prototype.hasBackupStreams=function(t){return t.backupUris&&t.backupUris.length>0},t.prototype.findBackupStreamByUri=function(t){var e;return e=this.backupStreamsMap.find(function(e){return Object.keys(e).includes(t)}),null!==e&&void 0!==e?e:{}},t.prototype.getLinkedVideoBackupUri=function(t){var e,n=this.context.serviceManager.get(l.ServiceName.AdaptationService),i=n.getCurrentRepresentationId(v.MimeType.VideoMp4),r=this.manifestService.getRepresentationById(i),a=this.findBackupStreamByUri(null===(e=r)||void 0===e?void 0:e.Uri);return Object.keys(a).find(function(e){return a[e]===t})},t.prototype.getLinkedAudioBackupUri=function(t){var e=this.findBackupStreamByUri(t);return e[t]},t.prototype.getLinkedRepToRotate=function(t){var e=t._mimeType===v.MimeType.AudioMp4?this.getLinkedVideoBackupUri(t.backupUris[0]):this.getLinkedAudioBackupUri(t.backupUris[0]);if(e){var n=this.manifestService.getAllRepresentations().find(function(t){return t.backupUris.indexOf(e)!==-1});if(n){var i=n.backupUris.findIndex(function(t){return t===e});return i>0&&(n.backupUris=b.Util.arrayMove(n.backupUris,i,0)),n}}},t.prototype.switchToBackupStream=function(t){if(!this.hasBackupStreams(t))return Promise.reject(o.NoBackupStreams);var e=[];e.push(this.rotatePlaylistUrl(t));var n=this.getLinkedRepToRotate(t);return n&&e.push(this.rotatePlaylistUrl(n)),Promise.all(e).then(function(t){return Promise.resolve(t)})["catch"](function(){return Promise.reject(o.LoadingFailed)})},t.prototype.rotatePlaylistUrl=function(t,e){var n=this;if(void 0===e&&(e=[]),!this.hasBackupStreams(t))return Promise.reject(o.NoBackupStreams);var i=t._internalId,u=t.Uri,c=t.backupUris[0];e.push(u);var l=a(a({},t),{Uri:c,backupUris:t.backupUris.slice(1),BaseURL:[{url:r(c,this.sourceStore.getState())}]});return this.sourceStore.dispatch(_.updateRepresentationAction(l)),this.updateRepresentation(l)["catch"](function(){return n.rotatePlaylistUrl(O.getRepresentation(i,O.getPeriod(n.sourceStore)),e)["catch"](function(t){var r=O.getRepresentation(i,O.getPeriod(n.sourceStore));throw n.sourceStore.dispatch(_.updateRepresentationAction(a(a({},r),{backupUris:s(r.backupUris,[e.shift()])}))),t})}).then(function(){var t=O.getRepresentation(i,O.getPeriod(n.sourceStore)),r=a(a({},t),{backupUris:s(t.backupUris,[e.shift()])}),o=_.updateRepresentationAction(r);return n.sourceStore.dispatch(o),t})},t.prototype.dispose=function(){var t=this;this.stop(),this.translatedManifest=d.dispose(this.translatedManifest),this.masterPlaylist=null,this.masterPlaylistLoader.dispose(),Object.keys(this.variantUpdateLoaders).forEach(function(e){return t.variantUpdateLoaders[e].dispose()}),this.variantUpdateLoaders=null},t}();e.M3u8Loader=C},259:function(t,e,n){"use strict";function i(t,e){return t.masterPlaylist.string?t:_(_({},t),{masterPlaylist:{string:e}})}function r(t,e){return _(_({},t),{playlistType:e})}function a(t,e){return _(_({},t),{endlist:e})}function s(t,e){var n,i=e.playlist,r=e.representation,a=r._id,s=i.startTime,o=i.totalDuration,u=t.playlists[a]?I(t.playlists[a].segments):[];O.PlaylistUtils.removeDroppedOutSegments(u,i.segments,r.BaseURL[0].url),O.PlaylistUtils.addNewSegments(u,i.segments,r.BaseURL[0].url),v(u);var c=t.playlists[a]?_(_({},t.playlists[a]),{segments:u,startTime:s,duration:o}):{segments:u,startTime:s,duration:o};return _(_({},t),{playlists:_(_({},t.playlists),(n={},n[a]=c,n))})}function o(t,e){var n=e.discoSequences,i=e.representation,r=M.getPlaylistSegments(t,i._id);if(!r||!r.length)return t;var a=r[0].startTime,s={};return n.forEach(function(e){var n=String(e.id),i=M.getDiscoSequenceTiming(t,n);null===i?s[n]=null:(a<i.endTime||null==a)&&(s[n]=_({},i))}),_(_({},t),{discontinuitySequenceTiming:s})}function u(t,e,n,i){var r,a=t.filter(function(t){return t.discontinuitySequenceNumber===e.id}).every(function(t){return null!=t.startTime});if(a)return{startTime:t[e.indexOfFirstSegment].startTime,endTime:t[e.indexOfLastSegment].startTime+t[e.indexOfLastSegment].duration};var s=e.segments.reduce(function(t,e){return t+e.duration},0),o=t[e.indexOfFirstSegment-1];if(o&&null!=o.startTime)return c(o.startTime+o.duration,s);var u=i[e.id-1];if(null!=u)return c(u.endTime,s);var l=null!=(null===(r=n)||void 0===r?void 0:r.startTime);return l?c(n.startTime,s):c(0,s)}function c(t,e){return{startTime:t,endTime:t+e}}function l(t,e){var n,i=e.discoSequences,r=e.representation,a=M.getPlaylistSegments(t,r._id),s=!t.endlist,o={},c=null===(n=t)||void 0===n?void 0:n.playlists[r._id];return a&&a.length?(i.forEach(function(e,n){var i,r,l,d,p,f=M.getDiscoSequenceTiming(t,String(e.id)),g=u(a,e,c,o);f&&0!==(null===(i=f)||void 0===i?void 0:i.startTime)&&0!==n&&(g.startTime=f.startTime),s?g.endTime=Math.max((l=null===(r=f)||void 0===r?void 0:r.endTime,null!==l&&void 0!==l?l:0),g.endTime):g.endTime=Math.min((p=null===(d=f)||void 0===d?void 0:d.endTime,null!==p&&void 0!==p?p:1/0),g.endTime),o[String(e.id)]=g}),_(_({},t),{discontinuitySequenceTiming:_(_({},t.discontinuitySequenceTiming),o)})):t}function d(t,e){var n=e,i={};return n.media.forEach(function(t){var e=Boolean(t.attributes),n=e&&"YES"===t.attributes.DEFAULT,r=e&&Boolean(t.attributes.LANGUAGE),a=t.attributes,s=a.TYPE,o=a.LANGUAGE;n&&r&&!i[s]&&(i[s]=o)}),_(_({},t),{defaultLanguages:i})}function p(t,e){var n=e;return _(_({},t),{customTags:n.tags})}function f(t,e){var n,i=e.playlistId,r=e.segmentIndex,a=e.startTime,s=t.playlists[i];if(!s)return t;var o=_(_({},s),{segments:T(s.segments,r,a)});return _(_({},t),{playlists:_(_({},t.playlists),(n={},n[i]=o,n))})}function g(t,e){var n=function(t){var e={};return Object.keys(t).forEach(function(n){e[n]=_(_({},t[n]),{segments:t[n].segments.map(function(t){return _(_({},t),{startTime:void 0})})})}),e};return _(_({},t),{playlists:n(t.playlists)})}function m(t,e){var n,i=e.playlistId,r=e.segmentUrl,a=e.segmentPlaybackTime,s=e.discontinuitySequenceNumber,o=t.playlists[i];if(!o||o.segments.length<1)return t;var u=null!=o.segments[0].startTime;if(u)return t;var c=o.segments.findIndex(function(t){return r.includes(t.uri)&&s===t.discontinuitySequenceNumber});if(c<0)return t;var l=_(_({},o),{segments:T(o.segments,c,a)});return _(_({},t),{playlists:_(_({},t.playlists),(n={},n[i]=l,n))})}function h(t,e){var n,i=e.discoSequenceNumber,r=e.presentationTimeOffset;return _(_({},t),{presentationTimeOffsets:_(_({},t.presentationTimeOffsets),(n={},n[i]=r,n))})}function y(t,e){return _(_({},t),{timestampRolloverPositions:e})}function S(){return{masterPlaylist:{string:""},playlists:{},defaultLanguages:{},discontinuitySequenceTiming:{},presentationTimeOffsets:{},timestampRolloverPositions:{previous:-1,next:-1}}}function v(t){if(!(t.length<1||null==t[0].startTime)){for(var e,n=t.length-1;n>=0;n--)if(null!=t[n].startTime){e=n;break}b(t,e)}}function T(t,e,n){var i=I(t);return i[e]=_({},i[e]),i[e].startTime=n,A(i,e),b(i,e),i}function b(t,e){for(var n=e+1;n<t.length;n++)t[n]=_({},t[n]),t[n].startTime=t[n-1].startTime+t[n-1].duration}function A(t,e){for(var n=e-1;n>=0;n--)t[n]=_({},t[n]),t[n].startTime=t[n+1].startTime-t[n].duration}var E,_=this&&this.__assign||function(){return _=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},_.apply(this,arguments)},I=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,r++)i[r]=a[s];return i};Object.defineProperty(e,"__esModule",{value:!0});var R=n(25),O=n(42),M=n(75),U=n(203);e.HlsReducer=R["default"](S(),(E={},E[U.HlsActionType.SetMasterPlaylistString]=function(t,e){var n=e.payload;return i(t,n)},E[U.HlsActionType.SetPlaylistType]=function(t,e){var n=e.payload;return r(t,n)},E[U.HlsActionType.SetEndlist]=function(t,e){var n=e.payload;return a(t,n)},E[U.HlsActionType.SetDefaultLanguages]=function(t,e){var n=e.payload;return d(t,n)},E[U.HlsActionType.SetCustomTags]=function(t,e){var n=e.payload;return p(t,n)},E[U.HlsActionType.UpdatePlaylist]=function(t,e){var n=e.payload;return s(t,n)},E[U.HlsActionType.RemoveDroppedOutDiscontinuity]=function(t,e){var n=e.payload;return o(t,n)},E[U.HlsActionType.UpdateDiscontinuityStartAndEndTimes]=function(t,e){var n=e.payload;return l(t,n)},E[U.HlsActionType.InitSegmentStartTimes]=function(t,e){var n=e.payload;return f(t,n)},E[U.HlsActionType.DropSegmentStartTimes]=g,E[U.HlsActionType.InitSegmentStartTimesFromReferenceSegment]=function(t,e){var n=e.payload;return m(t,n)},E[U.HlsActionType.SetPresentationTimeOffset]=function(t,e){var n=e.payload;return h(t,n)},E[U.HlsActionType.SetTimestampRolloverPositions]=function(t,e){var n=e.payload;return y(t,n)},E)),e.extrapolateSegmentStartTime=T},42:function(t,e,n){"use strict";function i(t,e){var n=c.compareValues(t.byterange,e.byterange);return c.compareValues(t,e,["uri","discontinuitySequenceNumber"])&&n}function r(t,e){if(!l.isLive(e))return 1/0;var n=e.segments[e.segments.length-1];return void 0!==n?Math.max(t.MINIMUM_ALLOWED_UPDATE_PERIOD,n.duration):t.MINIMUM_ALLOWED_UPDATE_PERIOD}function a(t,e){return Math.floor(t*Math.pow(10,e))/Math.pow(10,e)}var s=this&&this.__assign||function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},s.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),u=n(10),c=n(91);e.isMasterPlaylist=function(t){return"playlists"in t},e.isMediaPlaylist=function(t){return!e.isMasterPlaylist(t)};var l=function(){function t(){}return t.createDiscontinuitySequences=function(e,n){var i=e.discontinuitySequence;return null==i&&(i=0!==n.length&&t.isLive(e)?this.findCurrentDiscontinuitySequenceNumber(e,n):0),e.segments.reduce(function(t,e,n){return void 0!==e.discontinuity&&(i++,
0===n?t[t.length-1].id=i:t.push({id:i,segments:[],duration:0})),e.discontinuitySequenceNumber=i,e.duration>0&&(t[t.length-1].segments.push(e),t[t.length-1].duration+=e.duration),t},[{id:i,segments:[],duration:0}])},t.findCurrentDiscontinuitySequenceNumber=function(t,e){for(var n=[],i=0,r=0;r<e.length-1;r++)i+=e[r].segments.length,n.push(i);var a=[];return t.segments.forEach(function(t,e){void 0!==t.discontinuity&&a.push(e)}),0===n.length?e[0]?e[0].id:0:0===a.length?e[e.length-1].id:a.length!==n.length?a.length>n.length?e[0].id:e[1].id:this.findFirstPeriodByIndexTracking(n,a,e)},t.findFirstPeriodByIndexTracking=function(t,e,n){if(t[0]>e[0])return n[0].id;if(t[0]<e[0]){for(var i=t[0]-e[0],r=0,a=0;a<t.length;a++)t[a]+i<e[0]&&r++;return n[r].id}var s=function(){return t.every(function(t,n){return t===e[n]})};if(s())return n[0].id;for(var o=1;t.length>0;){t.shift();for(var a=0;a<t.length;a++)t[a]--;if(s())break;o++}return n[o].id},t.extrapolateProgramDateTime=function(t){var e=null;if(t.find(function(t,n){return t.dateTime&&(e=n),void 0!==t.dateTime}),null!==e){var n;for(n=e-1;n>=0;n--){var i=t[n+1].dateTime,r=Math.ceil(o.toMilliSeconds(t[n].duration));t[n].dateTime=new Date(i.getTime()-r)}for(n=e+1;n<t.length;n++){var a=t[n-1].dateTime,s=Math.ceil(o.toMilliSeconds(t[n-1].duration));t[n].dateTime=new Date(a.getTime()+s)}}},t.isLive=function(t){return t.endList!==!0},t.getProgramDateTimeFromSegmentUrl=function(t,e){if(t.indexOf("akamaihd.net")>-1){var n=t.match(/segment(\d{9})/);if(n&&2===n.length){var i=parseInt(n[1])*Math.round(o.toMilliSeconds(e));return new Date(i)}}return null},t.correctStartOffsetToBounds=function(t,e){return t>0&&t>e?e:t<0&&Math.abs(t)>e?-e:t},t.getImpreciseStartOffsetFromStartOfPlaylist=function(t){for(var e=t.start.timeOffset,n=0,i=0;i<t.segments.length&&e-t.segments[i+1].duration>0;i++){var r=t.segments[i].duration;e-=r,n+=r}return n},t.getImpreciseStartOffsetFromEndOfPlaylist=function(t){for(var e=Math.abs(t.start.timeOffset),n=0,i=t.segments.length-1;i>=0&&a(e,1)>0;i--)e-=t.segments[i].duration,n+=a(t.segments[i].duration,2);return t.totalDuration-n},t.getImpreciseStartOffset=function(e){return e.start.timeOffset>=0?t.getImpreciseStartOffsetFromStartOfPlaylist(e):t.getImpreciseStartOffsetFromEndOfPlaylist(e)},t.getStartOffsetCloseToPlaylistEnd=function(e,n){var i=e.start.timeOffset;return i=t.correctStartOffsetToBounds(i,e.totalDuration),i=i<0?-a(Math.abs(i),2):a(i,2),Math.max(n,i)},t.getStartOffset=function(e){var n=e.start.timeOffset;return n=t.correctStartOffsetToBounds(n,e.totalDuration),n<0&&(n+=e.totalDuration),e.start.precise||(n=t.getImpreciseStartOffset(e)),Number(n.toFixed(2))},t.addNewSegments=function(t,e,n){var r=u.URLHelper.getDomainUrl(n);if(t.length<1)return void e.forEach(function(e){e.uri=u.URLHelper.buildAbsoluteUrl(n,r,e.uri),t.push(e)});for(var a=t[t.length-1],o=[],c=e.length-1;c>=0;c--){var l=s({},e[c]);if(l.uri=u.URLHelper.buildAbsoluteUrl(n,r,l.uri),i(l,a))break;o.unshift(l)}o.forEach(function(e){return t.push(e)})},t.removeDroppedOutSegments=function(t,e,n){var r=u.URLHelper.getDomainUrl(n),a=s({},e[0]);a.uri=a.uri=u.URLHelper.buildAbsoluteUrl(n,r,a.uri);for(var o=0;o<t.length&&!i(a,t[o]);o++)t.splice(o,1),o--},t.getBaseUrl=function(t,e){var n=t;return n=u.URLHelper.removeUrlParameters(n),e=u.URLHelper.removeLastPathPart(e),!e||e.indexOf("/")<0?t:u.URLHelper.concatUrlParts(n,e)},t}();e.PlaylistUtils=l,e.isSameSegmentEntry=i,e.calculateUpdateIntervalInSeconds=r},447:function(t,e,n){"use strict";function i(t,e){if(!p.ModuleManager.has(f.ModuleName.ContainerTS))return Promise.reject(new g.PlayerModuleMissingError(f.ModuleName.ContainerTS));var n=a(e);return n.transmuxSegment(t).then(function(e){var n=s(e.transmuxedSegments);if(!n)throw"couldn't detect codec for "+t.getMimeType();return n})["finally"](function(){n.dispose()})}function r(t){if(!p.ModuleManager.has(f.ModuleName.ContainerMP4))return Promise.reject(new g.PlayerModuleMissingError(f.ModuleName.ContainerMP4));var e=p.ModuleManager.get(f.ModuleName.ContainerMP4),n=e.getCodecFromSegment(t);return n?Promise.resolve(n):Promise.reject("couldn't detect codec for "+t.getMimeType())}function a(t){var e=p.ModuleManager.get(f.ModuleName.ContainerTS);return new e.WebWorkerTransmuxer(t)}function s(t){for(var e="",n=0,i=t;n<i.length;n++){var r=i[n];if(!r.getCodec())return null;e+=(""===e?"":",")+r.getCodec()}return e}function o(t){for(var e=t.getData(),n=new DataView(e,0,e.byteLength),i=[],r=0;r+8<n.byteLength;){var a=n.getUint32(r);if(0===a)break;var s=d.ArrayHelper.extractAsciiString(n,r+4,4);i.push(s),r+=a}return t.isInit()?["ftyp","moov"].every(function(t){return i.includes(t)}):["moof","mdat"].every(function(t){return i.includes(t)})}function u(t,e){var n=e&&e._byteRange?e._byteRange:void 0,i=e&&e._key?e._key:void 0;return{url:t,key:i,byteRange:n,downloaded:!1,mimeType:"unknown/mp4",internalRepresentationId:null,isInitSegment:Boolean(e._init)}}Object.defineProperty(e,"__esModule",{value:!0});var c=n(7),l=n(17),d=n(8),p=n(2),f=n(0),g=n(78),m=function(){function t(t){this.context=t,this.loader=new l.DefaultContentLoader(this.context)}return t.prototype.fetchSegment=function(t){if(!this.context.segmentPrefetchingService)return Promise.reject();var e=this.context.segmentPrefetchingService.hasPrefetchedSegment(t)?this.context.segmentPrefetchingService.getPrefetchedSegment(t):this.context.segmentPrefetchingService.fetch(t);return e?e:Promise.reject()},t.prototype.probeCodecs=function(t,e){var n=this,i=t.slice();if(0===i.length)throw"could not load any segment";var r=e?i.pop():i.shift(),a=r._init?r._init.url:r._media,s=u(a,r);return this.fetchSegment(s).then(function(t){return n.extractCodecsFromSegment(t)})["catch"](function(t){if(t instanceof c.PlayerError)throw t;return n.probeCodecs(i,e)}).then(function(t){return t})},t.prototype.extractCodecsFromSegment=function(t){return o(t)?r(t):i(t,this.context)},t}();e.CodecDetector=m,e.extractCodecFromTsSegment=i,e.extractCodecFromMp4Segment=r,e.mergeSegmentCodecs=s,e.isFmp4Segment=o},448:function(t,e,n){"use strict";function i(t,e){var n=e.findIndex(function(e){return e.id===t.id});e.splice(n,1,t)}function r(t,e){return e.some(function(e){return e.id===t.id})}function a(t,e){var n={};return n.startTime=o.toSeconds(Date.parse(t.startDate)),t.endDate?n.endTime=o.toSeconds(Date.parse(t.endDate)):t.duration?n.endTime=o.toSeconds(Date.parse(t.startDate))+t.duration:t.endOnNext&&e&&(n.endTime=o.toSeconds(Date.parse(e.startDate))),n.data=t,n}function s(t,e,n){for(var s=0;s<t.segments.length;s++){var o=t.segments[s].dateRange;o&&(r(o,e)?i(o,e):e.push(o))}return e.map(function(t,e,n){return a(t,n[e+1])}).forEach(function(t){return n.processDateRangeEvent(t,u.HLS_PERIOD_ID)})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),u=n(201);e.getDateRangeEvent=a,e.handleDateRangeMetadata=s},449:function(t,e,n){"use strict";function i(t){return t.playlists.length>0}function r(t){return t.segments.length>0}function a(t,e){return e.AdaptationSet.find(function(e){return e._internalId.equals(t)})}function s(t){return t.playlists||[]}function o(t){return t.media||[]}function u(t){return P.isMasterPlaylist(t)&&i(t)||P.isMediaPlaylist(t)&&r(t)}function c(t){return t in _.M3u8Error}function l(t){return U.getManifest(t.getState()).Period[0]}function d(t,e){var n=E.HlsUtils.parsePlaylist(e,t.logger);if("playlists"in n){var i=n.playlists.filter(function(e){return e.attributes.BANDWIDTH>=t.settings.HLS_AUDIO_ONLY_THRESHOLD_BITRATE});n.playlists=i.length?i:n.playlists}return n}function p(t,e,n){if(P.isMasterPlaylist(e))return e;var i=["#EXTM3U","#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=0",n].join("\n"),r=d(t,i);if(!P.isMasterPlaylist(r))throw new Error("Template is not of type HLS MasterPlaylist");return r}function f(t,e){var n=P.PlaylistUtils.createDiscontinuitySequences(t,e);return n.forEach(function(t,e){P.PlaylistUtils.extrapolateProgramDateTime(t.segments),t.indexOfFirstSegment=0===e?0:n[e-1].indexOfLastSegment+1,t.indexOfLastSegment=t.indexOfFirstSegment+t.segments.length-1}),n}function g(t){var e,n=t.Period.flatMap(function(t){return t.AdaptationSet.filter(function(t){return!(M.getCodecsFromAdaptationSet(t).length>0)})}),i=n.filter(function(t){var e=t._mimeType;return!R.MimeTypeHelper.isUnknown(e)}),r=n.filter(function(t){var e=t._mimeType;return R.MimeTypeHelper.isUnknown(e)}),a=A(i),s=r.shift();return s&&(s.Representation=A(null===(e=s)||void 0===e?void 0:e.Representation,r.flatMap(function(t){return t.Representation})),a.push(s)),a}function m(t,e,n){var i=S(e,n);v(t,i)}function h(t,e){var n=a(t,e);return n?n.Representation.find(function(e){return e._internalId.equals(t)}):null}function y(t,e){var n=o(t);return n.find(function(t){var n;return O.URLHelper.isSubUrl(e,null===(n=t.attributes)||void 0===n?void 0:n.URI)})}function S(t,e){var n,i=s(t),r=i.some(function(t){return O.URLHelper.isSubUrl(e,t.uri)}),a=y(t,e);if(!r&&a){var o=null===(n=a.attributes)||void 0===n?void 0:n["GROUP-ID"];if(o)return i.filter(function(t){var e,n;return(null===(e=t.attributes)||void 0===e?void 0:e.AUDIO)===o||(null===(n=t.attributes)||void 0===n?void 0:n.VIDEO)===o})}return i}function v(t,e){e.forEach(function(e){return e.attributes.CODECS=b(e.attributes.CODECS,t)})}function T(t,e,n){return"string"!=typeof t||0===t.length?e:t+n+e}function b(t,e){var n=Object.keys(I.CodecStringHelper.extractCodecStrings(t)),i=I.CodecStringHelper.extractCodecStrings(e),r=Object.keys(i).filter(function(t){return!n.includes(t)}).map(function(t){return i[t]}).join(",");return r&&0!==r.length?T(t,r,","):t}var A=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,r++)i[r]=a[s];return i};Object.defineProperty(e,"__esModule",{value:!0});var E=n(141),_=n(113),I=n(26),R=n(5),O=n(10),M=n(34),U=n(54),P=n(42);e.isValidHlsPlaylist=u,e.isM3u8Error=c,e.getPeriod=l,e.parseHlsManifest=d,e.ensureMasterPlaylist=p,e.createDiscontinuitySequences=f,e.getAdaptationSetsWithUnknownCodecs=g,e.updateMissingCodecsForPlaylists=m,e.getRepresentation=h,e.findAllOrMatchingVariants=S},450:function(t,e,n){"use strict";function i(t){var e=[];return t.forEach(function(t){var n=e.findIndex(function(e){return r.compareValues(t,e,["GROUP-ID","NAME","TYPE"])});if(n===-1)return void e.push(t);var i=e[n];"YES"===t.DEFAULT&&"YES"!==i.DEFAULT&&(e[n]=t)}),e}Object.defineProperty(e,"__esModule",{value:!0});var r=n(91);e.uniqueRenditions=i},451:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(46),r=n(9),a=n(26),s=n(195),o=n(10),u=n(42),c=function(){function t(t,e){this.context=t,this.sourceContext=e}return t.prototype.create=function(t,e,n,r,a){if(void 0===a&&(a=!0),!t)return null;var s=this.createBaseRepresentation(t,r);if(e===i.RepresentationType.AUDIO)s=this.extendToAudioRepresentation(t,s,n,r);else if(e===i.RepresentationType.VIDEO)s=this.extendToVideoRepresentation(t,s,n,r,a);else{if(e!==i.RepresentationType.SUBTITLE)return null;s=this.extendToSubtitleRepresentation(t,s,n,r)}var o=this.getLabelForRepresentation(s);return o&&(s._label=o),s},t.prototype.createBaseRepresentation=function(t,e){var n=t.uri||t.URI;n&&!o.URLHelper.isUrlAbsolute(n)&&(n=o.URLHelper.concatBaseUrlWithPartial(e,n));var i={_id:"",_mimeType:"",_bandwidth:0,_codecs:"",_hls:{requestTimestamp:0},BaseURL:null,SegmentList:[{SegmentURL:[]}],Uri:n,backupUris:[]};return t.backupStreamUris&&t.backupStreamUris.forEach(function(t){o.URLHelper.isUrlAbsolute(t)?i.backupUris.push(t):i.backupUris.push(o.URLHelper.concatBaseUrlWithPartial(e,t))}),t.NAME&&(i._label=t.NAME),i},t.prototype.extendToVideoRepresentation=function(t,e,n,i,r){var s=e;if(s._mimeType="video/"+n,s._width=0,s._height=0,s.BaseURL=[{url:u.PlaylistUtils.getBaseUrl(i,t.uri)}],s._bandwidth=t.attributes["AVERAGE-BANDWIDTH"]||t.attributes.BANDWIDTH,s._bandwidth||(s._bandwidth=this.context.settings.MIN_SELECTABLE_VIDEO_BITRATE),s._bandwidth=Number(s._bandwidth),t.attributes.CODECS){var o=a.CodecStringHelper.extractCodecStrings(t.attributes.CODECS);a.CodecStringHelper.hasOldAvc1CodecFormat(o.video)&&(o.video=a.CodecStringHelper.convertAvc1ToAvcotiCodecFormat(o.video)),r?o.video&&o.audio?s._codecs=o.video+","+o.audio:o.video&&!o.audio?s._codecs=o.video:!o.video&&o.audio&&(s._codecs=o.audio):s._codecs=o.video}return t.attributes["FRAME-RATE"]&&(s._frameRate=parseFloat(t.attributes["FRAME-RATE"])),t.attributes.RESOLUTION&&(s._width=t.attributes.RESOLUTION.width,s._height=t.attributes.RESOLUTION.height,s._id+=t.attributes.RESOLUTION.height+"_"),s._id+=t.attributes.BANDWIDTH,s},t.prototype.extendToAudioRepresentation=function(t,e,n,i){var r=e;return r._id=t.NAME+" "+t["GROUP-ID"]||"",r._mimeType="audio/"+n,r._codecs=t.CODECS,r._name=t.NAME||"",r._groupId=t["GROUP-ID"]||"",r._label=r._name+" "+r._groupId,r.BaseURL=[{url:u.PlaylistUtils.getBaseUrl(i,t.URI||t.uri)}],r},t.prototype.extendToSubtitleRepresentation=function(t,e,n,i){var r=e;return r._id=t.NAME,r._mimeType="application/"+n,r._codecs="wvtt",r._name=t.NAME||"",r.BaseURL=[{url:u.PlaylistUtils.getBaseUrl(i,t.URI)}],r._hls.isForced="YES"===t.FORCED,r},t.prototype.getLabelForRepresentation=function(t){var e={id:t._id,mimeType:t._mimeType,width:t._width,height:t._height,bitrate:t._bandwidth};return s.applyLabeling({source:this.sourceContext.source,logger:this.context.logger,streamType:r.StreamType.Hls,labelingType:s.LabelingType.Qualities},e)},t}();e.M3u8RepresentationFactory=c},452:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;!function(t){t[t.EmptyPlaylist=1]="EmptyPlaylist"}(i=e.M3u8ValidatorError||(e.M3u8ValidatorError={}));var r=function(){function t(){}return t.checkForError=function(e){for(var n=0,i=t.mediaPlaylistRules;n<i.length;n++){var r=i[n];if(!r.fn(e))return r.err}return null},t.mediaPlaylistRules=[{fn:function(t){return t.segments.length>0},err:i.EmptyPlaylist}],t}();e.M3u8Validator=r},453:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(141),r=n(0),a=n(255),s=n(256),o=n(257),u=n(258),c=n(42),l=n(152),d=n(259),p=n(75),f={initSegmentStartTimes:l.initSegmentStartTimes,initSegmentStartTimesFromReferenceSegment:l.initSegmentStartTimesFromReferenceSegment,setPresentationTimeOffset:l.setPresentationTimeOffset,dropSegmentStartTimes:l.dropSegmentStartTimes,setTimestampRolloverPositions:l.setTimestampRolloverPositions},g={getPresentationTimeOffset:p.getPresentationTimeOffset,getHlsState:p.getHlsState,getPlaylistType:p.getPlaylistType,getEndlist:p.getEndlist,getDefaultLanguages:p.getDefaultLanguages,getCustomTags:p.getCustomTags,hasPlaylist:p.hasPlaylist,getPlaylistStartTime:p.getPlaylistStartTime,getPlaylistSegments:p.getPlaylistSegments,getDiscoSequenceTiming:p.getDiscoSequenceTiming,getDiscoSequenceTimings:p.getDiscoSequenceTimings,getFirstDiscoSequenceTiming:p.getFirstDiscoSequenceTiming,hasSegmentStartTimesForPlaylist:p.hasSegmentStartTimesForPlaylist,getStartTimeForSegment:p.getStartTimeForSegment,hasInitializedSegmentStartTimes:p.hasInitializedSegmentStartTimes};e.HLSModuleDefinition={name:r.ModuleName.HLS,module:function(){return{HlsTimelineTracker:s.HlsTimelineTracker,M3u8Loader:u.M3u8Loader,HlsUtils:i.HlsUtils,PlaylistUtils:c.PlaylistUtils,DiscontinuitySequenceNumberTracker:a.DiscontinuitySequenceNumberTracker,HlsReducer:d.HlsReducer,actions:f,selectors:g,provideSegmentInfoForHls:o.provideSegmentInfoForHls}},dependencies:[r.ModuleName.EngineBitmovin]},e["default"]=e.HLSModuleDefinition},75:function(t,e,n){"use strict";function i(t){return t.hls}function r(t){var e;return null!=(null===(e=t.segments[0])||void 0===e?void 0:e.startTime)||!1}var a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},a.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.getHlsState=i,e.getPlaylistType=function(t){return t.playlistType},e.getEndlist=function(t){return t.endlist},e.getDefaultLanguages=function(t){return t.defaultLanguages},e.getCustomTags=function(t){return t.customTags},e.hasPlaylist=function(t,e){return Object.keys(t.playlists).includes(e)},e.getPlaylist=function(t,e){return t.playlists[e]},e.getPlaylistSegments=function(t,e){return t.playlists[e]?t.playlists[e].segments:[]},e.getPlaylistStartTime=function(t,e){return t.playlists[e]?t.playlists[e].startTime:0},e.getDiscoSequenceTiming=function(t,e){return t.discontinuitySequenceTiming[e]?a({},t.discontinuitySequenceTiming[e]):null},e.getDiscoSequenceTimings=function(t){return t.discontinuitySequenceTiming},e.getFirstDiscoSequenceTiming=function(t){var e=Object.keys(t.discontinuitySequenceTiming)[0];return null!=e?t.discontinuitySequenceTiming[e]:{startTime:0,endTime:0}},e.getStartTimeForSegment=function(t,e,n){var i=t.playlists[e];if(!i)return null;var r=i.segments.find(function(t){return n.url.includes(t.uri)&&t.discontinuitySequenceNumber===n.discontinuitySequenceNumber});return r&&null!=r.startTime?r.startTime:i.startTime},e.hasSegmentStartTimesForPlaylist=function(t,e){var n=t.playlists[e];return Boolean(n)&&n.segments.length>0&&null!=n.segments[0].startTime},e.getPresentationTimeOffset=function(t,e){return Object.keys(t.presentationTimeOffsets).includes(e)?t.presentationTimeOffsets[e]:null},e.hasInitializedSegmentStartTimes=function(t){return Object.values(t.playlists).some(r)}}},[453])});
})();
